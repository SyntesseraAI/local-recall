---
id: 74cb8259-2b32-4f86-84da-3f7b7b230a40
subject: Build passes. Let me provide a summary of what was added.
applies_to: global
occurred_at: '2025-12-02T22:36:29.028Z'
content_hash: e280aead74e52985
---
## Thought

Build passes. Let me provide a summary of what was added.

## Output

Build passes. Here's the summary:

## Added `cleanupTranscripts()` method

**`src/core/transcript-collector.ts:353-403`**

```typescript
async cleanupTranscripts(): Promise<{ invalidFormat: number; synthetic: number }>
```

**Removes:**
1. Files that don't match `UUID.jsonl` format (e.g., `.DS_Store`, `readme.txt`, malformed names)
2. Synthetic transcripts (contain `"<synthetic>"` model marker)

**Integration:**
- Automatically called at the start of `syncTranscripts()` 
- Can also be called directly for manual cleanup

**Efficiency:**
- Uses `fs.open()` with partial read (10KB) for synthetic detection instead of loading entire files
- Logs each removal for audit trail

To run cleanup manually now on your existing transcripts folder:

```bash
# Quick test - run the MCP server which will trigger sync/cleanup
node dist/mcp-server/server.js
```

Or I can add a CLI command to run cleanup directly if you'd like.
