---
id: b7481d37-d433-4b89-aacc-d5aef803fbb1
subject: >-
  Let me analyze this transcript to extract valuable memories for future
  sessions working on this...
applies_to: global
occurred_at: '2025-12-21T17:19:56.960Z'
content_hash: 329553879ec3cf42
---
## Thought

Let me analyze this transcript to extract valuable memories for future sessions working on this codebase.

Key learnings from this session:

1. **The MCP server startup issue was caused by missing scripts in the plugin distribution**
   - The `local-recall-plugin/scripts/` directory was gitignored
   - Claude Code fetches plugins from Git, so only committed files are available
   - When the plugin was cached locally, the MCP server files weren't present
   - This is a critical issue about plugin distribution

2. **Git-based plugin distribution requires careful .gitignore management**
   - The root `scripts/` directory should be ignored (build output)
   - But `local-recall-plugin/scripts/` needs to be tracked
   - The fix was to change `scripts/` to `/scripts/` (only root level) and add `!local-recall-plugin/scripts/`

3. **Claude Code plugin caching mechanism**
   - Plugins are fetched from GitHub
   - The `marketplace.json` defines what gets distributed
   - Without proper .gitignore patterns, distribution files get excluded
   - The plugin cache is at `~/.claude/plugins/cache/syntesseraai-local-recall/`

4. **How to diagnose plugin issues**
   - Check the plugin cache directory to see what files exist
   - Compare with `.mcp.json` to see what files it's trying to load
   - Use `git check-ignore` to verify what's being ignored
   - The issue manifested as the MCP server file missing from the cache

5. **Specific to this project**
   - The plugin publishes both `scripts/` (root, ignored) and `local-recall-plugin/scripts/` (tracked)
   - The solution was precise .gitignore patterns to distinguish between them
   - This is a distribution problem, not a code problem

Let me structure these as memory items:

**Memory 1: MCP Server Distribution via Git-Based Plugins**


I need to understand how plugin distribution works through GitHub. The critical insight is that only committed files become available in the plugin cache. Precise git tracking is essential for ensuring all necessary server files are distributed correctly.

**Memory 2: .gitignore Pattern for Root vs Subdirectory Scripts**
Crafting nuanced .gitignore patterns requires careful differentiation between root-level and project-specific directories. By using `/scripts/` and `!local-recall-plugin/scripts/`, I can selectively track or ignore script directories based on their location.

**Memory 3: Debugging Plugin Distribution Issues**
When plugins seem incomplete, I'll investigate the cache directory at `~/.claude/plugins/cache/{plugin-id}/`. Comparing actual files against the manifest and using `git check-ignore` helps diagnose tracking problems systematically.

**Memory 4: Plugin Cache Location and Update Mechanism**
The plugin cache resides in `~/.claude/plugins/cache/syntesseraai-local-recall/`. Updating happens through explicit `/plugin update` commands or by restarting Claude Code, ensuring the latest plugin versions are available.

## Output

```json
{
  "memories": [
    {
      "subject": "MCP server distribution requires git-tracked scripts for Claude Code plugins",
      "keywords": [
        "mcp-server",
        "plugin",
        "distribution",
        "github",
        "git-tracked",
        "local-recall-plugin"
      ],
      "applies_to": "global",
      "content": "Claude Code fetches plugins from GitHub repositories. The MCP server startup failure was caused by `local-recall-plugin/scripts/` being in .gitignore, so the files never made it to GitHub. When Claude Code cached the plugin from GitHub, the MCP server files (`scripts/mcp-server/server.js`) were missing. Solution: Only gitignore the root `scripts/` directory (build output), while explicitly tracking `local-recall-plugin/scripts/` (distribution artifacts). This is a critical distribution pattern for any plugin that includes built files in a subdirectory."
    },
    {
      "subject": "Precise .gitignore patterns needed to distinguish root scripts/ from plugin subdirectories",
      "keywords": [
        "gitignore",
        "pattern",
        "scripts",
        "negation",
        "root-level"
      ],
      "applies_to": "file:.gitignore",
      "content": "Use `/scripts/` (with leading slash) instead of `scripts/` to only ignore the root-level directory. Then use `!local-recall-plugin/scripts/` to explicitly un-ignore that subdirectory. This prevents accidental exclusion of files in subdirectories with the same name. Without the leading slash, the pattern matches `scripts/` at any level in the tree hierarchy."
    },
    {
      "subject": "Debug missing plugin files by checking cache vs git tracking status",
      "keywords": [
        "debugging",
        "plugin-cache",
        "distribution",
        "gitignore",
        "mcp"
      ],
      "applies_to": "global",
      "content": "When plugin files are missing: (1) Check ~/.claude/plugins/cache/syntesseraai-local-recall/ to see what files actually exist in the cache (2) Compare with .mcp.json/.claude-plugin/manifest.json to see what files should be there (3) Use `git check-ignore -v local-recall-plugin/scripts/` to verify gitignore patterns aren't blocking tracked files (4) Verify files are committed and on the remote GitHub repo. The plugin cache only contains files from GitHub, not local-only files."
    },
    {
      "subject": "Plugin cache location and refresh mechanism for local-recall",
      "keywords": [
        "plugin-cache",
        "claude-code",
        "update",
        "restart"
      ],
      "applies_to": "global",
      "content": "Plugin cache is stored at ~/.claude/plugins/cache/syntesseraai-local-recall/. Update with `/plugin update syntesseraai-local-recall` command or by restarting Claude Code (if autoUpdate is enabled). The cache pulls from the GitHub repository, so all distribution files must be git-tracked and pushed to the remote for them to appear in Claude Code."
    }
  ]
}
```
