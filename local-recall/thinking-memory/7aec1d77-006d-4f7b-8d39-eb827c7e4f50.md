---
id: 7aec1d77-006d-4f7b-8d39-eb827c7e4f50
subject: >-
  Now I understand the full picture. Both `memory-extractor.ts` and
  `thinking-extractor.ts` need to...
applies_to: global
occurred_at: '2025-12-02T22:34:31.057Z'
content_hash: 6a58a931a769a207
---
## Thought

Now I understand the full picture. Both `memory-extractor.ts` and `thinking-extractor.ts` need to filter out synthetic transcripts. The best approach is to:

1. Add a helper function to check if a transcript is synthetic (either in `transcript-collector.ts` or a utility)
2. Use it in both extractors to skip synthetic files early

The check should look at the model field in assistant messages - if it's `<synthetic>`, skip the file.

Let me create the implementation plan:

1. Add `isSyntheticTranscript()` method to `TranscriptCollector` class
2. Update `ThinkingExtractor.processTranscript()` to skip synthetic files
3. Update `MemoryExtractor.processTranscript()` to skip synthetic files

Actually, looking at the code more carefully, I think the best place to add this is:
- A helper function that reads a few lines and checks for `<synthetic>` model
- Call it early in `processTranscript()` for both extractors

Let me implement this.

## Output

Both extractors need the filter. I'll add a helper to `TranscriptCollector` and use it in both extractors:
