---
id: ae1c4307-20f4-4073-8cfd-455afb138d77
subject: >-
  Ah I see the issue now! The vectors are stored in a nested structure with
  metadata - `[docId,...
applies_to: global
occurred_at: '2025-12-03T10:49:53.558Z'
content_hash: 4ca27a852bde8866
---
## Thought

Ah I see the issue now! The vectors are stored in a nested structure with metadata - `[docId, [magnitude, [actual_vector]]]`. This is the internal format for Orama's vector index after persistence.

The issue is that when we call `search(restored, ...)`, Orama doesn't seem to properly restore the vector search capability. Let me check if maybe we need to use a different restore method or if there's a known issue with vector search after restore.

Actually, looking more closely at the error - the schema is `{ __placeholder: 'string' }` after restore, which suggests the schema information including the `vector[384]` type is not preserved. This might be breaking the vector search.

Let me check if we need to pass the schema when restoring, or if there's a different persistence approach for vector databases.

## Output

I see - the vectors are stored with nested metadata. The issue is that the schema with `vector[384]` is not preserved on restore. Let me check if we can fix this:
