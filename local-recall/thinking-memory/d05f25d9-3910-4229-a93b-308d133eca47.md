---
id: d05f25d9-3910-4229-a93b-308d133eca47
subject: >-
  The user is asking me to extract memories from a Claude Code session
  transcript. Let me analyze...
applies_to: global
occurred_at: '2025-12-21T19:31:05.354Z'
content_hash: 7766d43dc61ca5f5
---
## Thought

The user is asking me to extract memories from a Claude Code session transcript. Let me analyze what happened and what should be remembered:

1. **Problem**: The MCP server was failing to start because the `local-recall-plugin/scripts/` directory was gitignored and not included when Claude Code fetched the plugin from GitHub.

2. **Root Cause Found**: 
   - The `.gitignore` file had `scripts/` which was too broad and caught `local-recall-plugin/scripts/`
   - When Claude Code fetches plugins from GitHub, only tracked files are included
   - The MCP server file (`scripts/mcp-server/server.js`) wasn't available in the plugin cache

3. **Solution Applied**:
   - Changed `.gitignore` to only ignore `/scripts/` (root level)
   - Added `!local-recall-plugin/scripts/` to explicitly include plugin scripts
   - Committed and pushed the changes

4. **Key Learnings**:
   - Claude Code plugins are distributed via Git, so gitignore matters
   - Plugin files need to be tracked in Git to be included when fetched
   - The `dist_glob` pattern in `marketplace.json` controls what gets distributed
   - Build output should be gitignored, but plugin distribution files should not be

5. **Specific to this codebase**:
   - The project has both `/scripts/` (root build output) and `/local-recall-plugin/scripts/` (plugin distribution)
   - The plugin structure uses `.mcp.json` to reference scripts
   - The plugin is distributed via `syntesseraai/local-recall` GitHub repo
   - Configuration for the plugin is in `.claude-plugin/marketplace.json`

Let me extract meaningful memories that would help future developers:

1. **MCP Server Plugin Distribution Pattern** - The `.gitignore` needs to differentiate between root build output and plugin distribution files
2. **Claude Code Plugin Cache** - Plugins are fetched from Git repos and only tracked files are cached


3. **Configuration Specifics**: The `.mcp.json` file plays a crucial role in script referencing for the plugin
4. **Deployment Strategy**: Carefully manage gitignore to separate build artifacts from essential plugin files

I'll focus on the nuanced approach to managing plugin scripts and configuration across different project levels.

## Output

```json
{
  "memories": [
    {
      "subject": "MCP server plugin distribution requires scripts to be tracked in Git",
      "keywords": ["mcp server", "plugin distribution", "gitignore", "github", "scripts"],
      "applies_to": "global",
      "content": "Claude Code fetches plugins from GitHub and only includes files that are tracked in Git. The `local-recall-plugin/scripts/` directory must be committed to the repository for the MCP server to be available when Claude Code caches the plugin. Previously, `/scripts/` in `.gitignore` was too broad and caught the plugin scripts directory, preventing them from being distributed."
    },
    {
      "subject": "Gitignore pattern for separating root build output from plugin scripts",
      "keywords": ["gitignore", "scripts directory", "plugin scripts", "build output"],
      "applies_to": "file:.gitignore",
      "content": "To prevent gitignoring plugin scripts while still excluding root build output:\n- Use `/scripts/` (slash prefix) to only match root-level `scripts/` directory\n- Add `!local-recall-plugin/scripts/` exception to explicitly include plugin distribution files\n- This pattern allows root build artifacts to be excluded while ensuring plugin files are tracked and distributed"
    },
    {
      "subject": "MCP server startup failure due to missing plugin cache files",
      "keywords": ["mcp server startup", "plugin cache", "scripts missing", "troubleshooting"],
      "applies_to": "area:mcp-server",
      "content": "When MCP server fails to start, check if `local-recall-plugin/scripts/` directory exists in the plugin cache at `~/.claude/plugins/cache/syntesseraai-local-recall/`. The `.mcp.json` configuration references `${CLAUDE_PLUGIN_ROOT}/scripts/mcp-server/server.js`. If the scripts directory is missing from the cache, the issue is likely that the files aren't tracked in Git. Verify with `git check-ignore -v local-recall-plugin/scripts/` and update `.gitignore` if needed."
    },
    {
      "subject": "Claude Code plugin cache location and structure for local-recall",
      "keywords": ["plugin cache", "claude code", "plugin directory", "marketplace"],
      "applies_to": "global",
      "content": "Claude Code caches the local-recall plugin at `~/.claude/plugins/cache/syntesseraai-local-recall/`. The cache includes version-specific directories (e.g., `0.1.3/`) with subdirectories for: `.mcp.json` (MCP configuration), `manifest.json` (plugin metadata), and `scripts/` (MCP server files). If scripts are missing from cache, manually update with `/plugin update syntesseraai-local-recall` or restart Claude Code."
    }
  ]
}
```
