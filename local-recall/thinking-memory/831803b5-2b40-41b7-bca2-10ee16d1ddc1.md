---
id: 831803b5-2b40-41b7-bca2-10ee16d1ddc1
subject: >-
  The user has confirmed: 1. Use `BAAI/bge-small-en-v1.5` as specified in the
  plan 2. No fallback -...
applies_to: global
occurred_at: '2025-12-01T17:44:53.061Z'
content_hash: 62d77c910e714571
---
## Thought

The user has confirmed:
1. Use `BAAI/bge-small-en-v1.5` as specified in the plan
2. No fallback - skip search if embedding fails
3. Sync on startup, sync every 10 mins, and insert immediately on createMemory

Let me create a todo list and start implementing this. This is a significant change that will touch multiple files.

Let me plan the implementation:

1. Install dependencies: `@xenova/transformers`, `better-sqlite3`, `sqlite-vec`
2. Update gitignore to include SQLite files
3. Create embedding service (`src/core/embedding.ts`)
4. Create vector store (`src/core/vector-store.ts`)
5. Update memory manager to call vector store on createMemory
6. Update MCP server to sync on startup and every 10 mins
7. Refactor search engine to use vector search
8. Update user-prompt-submit hook to use direct embedding (remove Claude Haiku call)

Let me start with the todo list and begin implementation.

## Output

I'll implement the vector database migration. Let me create a task list and get started.
