---
id: 9d115684-376f-4c06-a3c3-1fa9b15a489b
subject: >-
  The user wants something that: 1. Can be added as an npm dependency 2. Runs as
  a daemon (separate...
applies_to: global
occurred_at: '2025-12-03T11:25:03.222Z'
content_hash: 1e84383148828d55
---
## Thought

The user wants something that:
1. Can be added as an npm dependency
2. Runs as a daemon (separate process)
3. Handles concurrency properly

This rules out Ollama (not an npm package). They want something embeddable that can be started as part of the local-recall system.

Let me think about options:

1. **text-embeddings-inference** - Hugging Face's embedding server, but it's a Rust binary, not npm

2. **Run fastembed/ONNX in a separate Node.js daemon** - Create our own HTTP server that wraps fastembed, and all hooks call this daemon. This is essentially what the CLAUDE.md describes but we'd implement it.

3. **Use a pure WASM embedding approach** - Transformers.js can run in pure WASM mode without native bindings, which might not have mutex issues. Worth investigating.

4. **embeddings-server npm packages** - Let me search for this

Actually, the simplest solution might be:
- Create an HTTP server that wraps the embedding service
- Start it as part of the MCP server (or separately)
- Hooks call the HTTP endpoint

But wait, they said they don't want the daemon option because it prevents running multiple Claude instances. However, what they might mean is they don't want a SINGLE daemon that all Claude instances share. 

If each Claude instance runs its own embedding daemon as part of its MCP server, that would work. The issue is just the hooks (which run as separate processes) calling into a shared embedding service within that instance.

Actually, let me re-read what they said: "i dont want the daemon option, it means I can't run multiple instances of claude at once"

Hmm, but actually a daemon per project/directory would work. Each Claude instance in a different directory would have its own daemon.

Let me search for npm packages that provide embedding servers.

## Output

Got it - needs to be npm-installable and self-contained. Let me search for embedding server packages:
