---
id: 36a733a3-31c6-4462-b92f-11e0c68d27a7
subject: >-
  Now I can clearly see the issue: **UserPromptSubmit hook (line 270-276):**
  Uses JSON format with...
applies_to: global
occurred_at: '2025-12-21T17:38:53.374Z'
content_hash: b22024d5f3af5976
---
## Thought

Now I can clearly see the issue:

**UserPromptSubmit hook (line 270-276):** Uses JSON format with `hookSpecificOutput`
```javascript
console.log(JSON.stringify({
  hookSpecificOutput: {
    hookEventName: "UserPromptSubmit",
    additionalContext,
  },
}));
```

**SessionStart hook (lines 97-141):** Uses plain `console.log()` for each line - **NO JSON format**

The SessionStart hook is NOT using the structured JSON format that might be required for plugin hooks to work correctly.

This is likely the issue! The hooks need to use the JSON format with `hookSpecificOutput` to work through the plugin layer.

Let me create a todo list and propose a fix.

## Output

## Root Cause Identified

`★ Insight ─────────────────────────────────────`
**The issue is an output format mismatch:**
1. `user-prompt-submit.ts` uses JSON format with `hookSpecificOutput.additionalContext`
2. `session-start.ts` uses plain `console.log()` statements

Plugin hooks require the JSON format for stdout to be injected into Claude's context. Plain text output gets swallowed by the plugin layer, which only shows a status message.
`─────────────────────────────────────────────────`
