---
id: 769d37fe-d6a3-4540-a70c-633e92491b2d
subject: >-
  The config module is clean too. This is odd - the hooks don't seem to be
  loading sqlite-vec...
applies_to: global
occurred_at: '2025-12-03T10:03:34.064Z'
content_hash: 790417ef85448efb
---
## Thought

The config module is clean too. This is odd - the hooks don't seem to be loading sqlite-vec directly. Let me check the compiled output in the dist folder to see what's actually being loaded. The error might be a build/bundling issue.

Actually, wait. Let me re-read the error message carefully:"UserPromptSubmit says: Plugin hook error: libc++abi: terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument"

This error is happening in the **daemon process**, but Claude Code is capturing it as a hook error because the HTTP request to the daemon is failing. The daemon process crashes and the hook gets an error response.

The issue is in the daemon (MCP server) when handling concurrent requests. Let me look at the http-server more carefully to see if there's a way requests could overlap.

## Output

The hooks are clean - they don't load sqlite-vec. The error must be happening in the **daemon process** when handling concurrent HTTP requests. Let me check the MCP server entry point and see how it handles concurrent requests.
