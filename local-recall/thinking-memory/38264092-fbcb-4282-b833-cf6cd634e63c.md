---
id: 38264092-fbcb-4282-b833-cf6cd634e63c
subject: >-
  There are test failures in the integration tests. The error is: "A LIMIT or 'k
  = ?' constraint is...
applies_to: global
occurred_at: '2025-12-01T20:22:28.690Z'
content_hash: cb0599ff08ea088e
---
## Thought

There are test failures in the integration tests. The error is: "A LIMIT or 'k = ?' constraint is required on vec0 knn queries." This is a sqlite-vec requirement. The `SearchEngine.search` function needs to always provide a limit parameter.

Looking at the vector-store.ts search function, I see that it does have a default limit of 10, but there might be an issue with how the SQL query is constructed. Let me check the search function in vector-store.ts.

## Output

There are test failures related to sqlite-vec requiring a LIMIT constraint. Let me check the vector store search function:
