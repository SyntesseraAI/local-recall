---
id: ff527709-19c5-44ad-86a7-85d4f132acc2
subject: >-
  AHA! I found the problem! Looking at the two hooks: **SessionStart hook**
  (lines 88-108): - Outputs...
applies_to: global
occurred_at: '2025-11-29T23:56:05.808Z'
content_hash: 95d14d7ced3e9a3f
---
## Thought

AHA! I found the problem!

Looking at the two hooks:

**SessionStart hook** (lines 88-108):
- Outputs plain text directly to stdout with `console.log()`
- Format: "# Local Recall: Loaded Memories"
- Plain markdown output

**UserPromptSubmit hook** (lines 126-134):
- Outputs structured JSON with `hookSpecificOutput` and `additionalContext`
- Format: `{ "hookSpecificOutput": { "hookEventName": "UserPromptSubmit", "additionalContext": "..." } }`

These two hooks have **different output formats**! The UserPromptSubmit hook is using the correct format for Claude Code hooks (structured JSON), but the SessionStart hook is using plain text output.

According to Claude Code's hook documentation, hooks should output their context as JSON with a specific structure. The SessionStart hook needs to be updated to match the UserPromptSubmit format.

Let me verify this is indeed the issue and propose a fix.

## Output

**Found the issue!** The hooks have **inconsistent output formats**:

**SessionStart hook** ([src/hooks/session-start.ts:88-108](src/hooks/session-start.ts#L88-L108)):
```typescript
console.log('# Local Recall: Loaded Memories');
console.log('');
console.log(`Found ${memories.length} relevant memories...`);
```
Outputs plain text to stdout.

**UserPromptSubmit hook** ([src/hooks/user-prompt-submit.ts:126-134](src/hooks/user-prompt-submit.ts#L126-L134)):
```typescript
const output = {
  hookSpecificOutput: {
    hookEventName: 'UserPromptSubmit',
    additionalContext,
  },
};
console.log(JSON.stringify(output));
```
Outputs structured JSON with `hookSpecificOutput` and `additionalContext`.

The VS Code extension expects hooks to output JSON in a specific format. The SessionStart hook is outputting plain text, which is why those 8 memories aren't appearing in my context, even though the hook found them!

Would you like me to fix the SessionStart hook to use the same JSON output format as UserPromptSubmit?
