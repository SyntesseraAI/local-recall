---
id: e0668c53-bf70-48bc-ac39-78f6113d9460
subject: >-
  I see how it works now. The key lines are: 1. Line 241: `similarity: 0` - This
  disables Orama's...
applies_to: global
occurred_at: '2025-12-03T11:56:28.385Z'
content_hash: 14db6cb53c4492dc
---
## Thought

I see how it works now. The key lines are:

1. Line 241: `similarity: 0` - This disables Orama's default threshold (~0.8) so we can filter ourselves
2. Line 258-259: `score: Math.round(hit.score * 100) / 100` - Orama returns similarity scores from 0-1 (higher is better)

The score returned by Orama is already in 0-1 range where higher is better. So:
- 1.0 = identical/perfect match
- 0.8 = 80% similarity
- 0.5 = 50% similarity

Now let me check the hook to see how the filtering is done against the config threshold.

## Output

I see - Orama returns similarity scores in 0-1 range where higher is better. The hook at `src/hooks/user-prompt-submit.ts:45-47` compares:

```javascript
if (result.score < minSimilarity) {
  continue;
}
```

So with 50% (0.5), memories scoring 0.5 or higher will be included. Let me verify the search engine doesn't add any additional filtering:
