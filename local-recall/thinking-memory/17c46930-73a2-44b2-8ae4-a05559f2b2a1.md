---
id: 17c46930-73a2-44b2-8ae4-a05559f2b2a1
subject: >-
  Now I've successfully completed the migration from fastembed to Ollama. Let me
  give the user a...
applies_to: global
occurred_at: '2025-12-03T11:46:06.927Z'
content_hash: d53fed689e870854
---
## Thought

Now I've successfully completed the migration from fastembed to Ollama. Let me give the user a summary of what was done.

## Output

Done! Here's the summary of changes:

## Migration: fastembed → Ollama

**Embedding Service** (`src/core/embedding.ts`):
- Now uses Ollama's HTTP API (`/api/embed`)
- Model: `nomic-embed-text` (768 dimensions, ~274MB) - fast, small, high quality
- No more native dependencies = no mutex errors

**Removed**:
- `fastembed` dependency
- `proper-lockfile` dependency (only needed for ONNX mutex workarounds)
- `local_cache/` directory references
- All file-based locking code

**Updated Documentation**:
- `CLAUDE.md` - architecture, setup instructions, troubleshooting
- `docs/architecture.md` - embedding and vector store sections

**To use**, ensure Ollama is running:
```bash
ollama pull nomic-embed-text
ollama serve
```

**Migration note**: Since the embedding dimension changed (384 → 768), delete your old indexes:
```bash
rm local-recall/orama-episodic-index.json
rm local-recall/orama-thinking-index.json
```
