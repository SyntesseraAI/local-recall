---
id: ffed7207-b300-44fb-a769-53e6b91ef645
subject: >-
  I found the problem. Looking at line 13:```bash esbuild
  src/mcp-server/server.ts --bundle...
applies_to: global
occurred_at: '2025-12-12T10:11:10.917Z'
content_hash: 5d681e205465c8dd
---
## Thought

I found the problem. Looking at line 13:```bash
esbuild src/mcp-server/server.ts --bundle --platform=node --format=esm --outdir=dev-marketplace/local-recall-plugin/scripts/mcp-server --external:@modelcontextprotocol/sdk
```

The `--external:@modelcontextprotocol/sdk` flag tells esbuild NOT to bundle that dependency. This means the compiled server.js still expects to find `@modelcontextprotocol/sdk` in node_modules, but the plugin system doesn't include node_modules.

The fix is to **remove** `--external:@modelcontextprotocol/sdk` so that the MCP SDK gets bundled into the server.js file.

Let me make this change.

## Output

Found it! The build script has:

```bash
--external:@modelcontextprotocol/sdk
```

This tells esbuild **NOT to bundle** the MCP SDK, leaving it as an external import. But the plugin system doesn't ship node_modules.

**Fix**: Remove `--external:@modelcontextprotocol/sdk` from the build script:
