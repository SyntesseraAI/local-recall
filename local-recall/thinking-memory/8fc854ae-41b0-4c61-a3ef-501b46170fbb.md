---
id: 8fc854ae-41b0-4c61-a3ef-501b46170fbb
subject: >-
  The session-start hook currently just reads memories from files via
  MemoryManager - it doesn't use...
applies_to: global
occurred_at: '2025-12-03T09:54:48.824Z'
content_hash: d0547c4fee12d5f8
---
## Thought

The session-start hook currently just reads memories from files via MemoryManager - it doesn't use the vector store at all. This is actually safe and doesn't need to use the daemon client since MemoryManager just reads markdown files, not SQLite.

However, for consistency and to keep the option open to use vector search in session-start later, I could update it to use the daemon client. But looking at the code, the current implementation deliberately avoids the vector store:

```
// Load recent memories directly (skip vector store to avoid slow initialization)
// Vector store will be initialized lazily by MCP server or user-prompt-submit
```

This is actually fine - MemoryManager just reads markdown files from disk, it doesn't load sqlite-vec. So session-start doesn't have the mutex issue.

I'll leave session-start as-is since it doesn't use sqlite-vec. Let me update the todo and move on to updating the MCP server to start the HTTP server.

## Output

Looking at session-start, it actually doesn't use sqlite-vec at all - it just reads markdown files via `MemoryManager`. So it's safe from the mutex issue. I'll leave it as-is.
