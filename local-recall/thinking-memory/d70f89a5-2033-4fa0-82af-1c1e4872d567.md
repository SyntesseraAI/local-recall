---
id: d70f89a5-2033-4fa0-82af-1c1e4872d567
subject: >-
  Looking at the logs, I can see: 1. The UserPromptSubmit hook fired at
  `15:06:23.864Z` 2. It started...
applies_to: global
occurred_at: '2025-11-30T15:08:53.035Z'
content_hash: 0e53c8f6d8a03fc4
---
## Thought

Looking at the logs, I can see:

1. The UserPromptSubmit hook fired at `15:06:23.864Z`
2. It started processing the prompt
3. Then about 30 seconds later at `15:06:53.984Z`, a NEW session started - which means the hook probably timed out!

The hook is timing out before the Claude CLI can return keywords. The 30-second timeout in the code matches roughly the time between the hook firing and the new session starting.

But there's a bigger issue here - I see that the `[LOCAL_RECALL_INTERNAL]` check is working at `15:06:54.088Z`. So the recursion prevention is working.

The AbortError is happening because:
1. Claude Code has its own timeout for hooks (probably 30 seconds from the config)
2. When the hook times out, Claude Code aborts the process using an AbortSignal
3. This causes an unhandled AbortError

Let me check if there's a `.claude/settings.json` or similar file with hook configuration:

## Output

The logs are helpful! I can see the issue now - the hook starts at `15:06:23.864Z` and then times out. A new session starts at `15:06:53.984Z` (about 30 seconds later), which aligns with the timeout in the code.

The `AbortError` occurs because when Claude Code's hook timeout fires, it aborts the child process, and this abort isn't being caught properly. Let me check where the hooks configuration is:
