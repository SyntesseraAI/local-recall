---
id: 53aae5d5-dbdf-4c09-9794-93e01a68557b
subject: >-
  Looking at the code, I can see that on session start: 1. It creates a new
  `MemoryManager` instance...
applies_to: global
occurred_at: '2025-12-02T11:39:06.096Z'
content_hash: fd948f81b50bc2b8
---
## Thought

Looking at the code, I can see that on session start:

1. It creates a new `MemoryManager` instance (line 57)
2. It calls `listMemories()` to get ALL memories (line 58)
3. It then sorts by `occurred_at` timestamp and takes the 5 most recent (lines 61-63)

So it's a full reload - all memories are loaded from disk each time. There's no delta/incremental loading. The code reads all memory files fresh on each session start.

Let me also check if there's any caching mechanism in the MemoryManager to be thorough.

## Output

On session start, it's a **full reload**, not a delta. Looking at the code in `src/hooks/session-start.ts:57-63`:

```typescript
const memoryManager = new MemoryManager();
const allMemories = await memoryManager.listMemories();

// Get the 5 most recent memories for session context
const memories = allMemories
  .sort((a, b) => new Date(b.occurred_at).getTime() - new Date(a.occurred_at).getTime())
  .slice(0, 5);
```

Each session:
1. Creates a fresh `MemoryManager` instance
2. Calls `listMemories()` which reads all memory files from disk
3. Sorts by timestamp and takes the 5 most recent

There's no index caching or delta mechanism - it scans the entire `local-recall/episodic-memory/` directory on every session start. The `index.json` file mentioned in CLAUDE.md exists for keyword search (used by `UserPromptSubmit`), but the session-start hook bypasses it and reads files directly.
