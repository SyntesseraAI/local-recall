---
id: ce98d58b-abc2-49ea-9195-c2ff33306d93
subject: >-
  This is very helpful. The thinking memory from a previous session clearly
  states: 1. The hooks work...
applies_to: global
occurred_at: '2025-12-21T17:38:41.051Z'
content_hash: 3f21004fe9bb4103
---
## Thought

This is very helpful. The thinking memory from a previous session clearly states:

1. The hooks work (verified by logs)
2. The stdout output isn't reaching Claude - only a "Success" status message appears
3. The issue is likely that **plugin hooks handle output differently** than direct hooks in `.claude/settings.json`
4. A suggested fix was to try the JSON format with `hookSpecificOutput.additionalContext`

Looking at the current `user-prompt-submit.ts` hook (lines 268-276):
```typescript
const output = {
  hookSpecificOutput: {
    hookEventName: "UserPromptSubmit",
    additionalContext,
  },
};

console.log(JSON.stringify(output));
```

The UserPromptSubmit hook IS using the JSON format! But the SessionStart hook isn't - it just uses plain `console.log()` for each memory.

Let me check if that's the issue. Also, I should check if the session-start hook needs to use the JSON format too.

Actually, let me re-read the session-start hook output format...

Looking at `src/hooks/session-start.ts` lines 96-132:
- It uses plain `console.log()` calls for memory output
- It doesn't use the JSON format with `hookSpecificOutput`

This could be the issue for SessionStart! The hook might need to use the JSON format like UserPromptSubmit does.

But wait - the thinking memory also said the UserPromptSubmit hook wasn't working, and that one DOES use JSON format. So the JSON format might not be the fix.

The real issue seems to be: **Plugin hooks don't inject stdout content properly**. Claude only sees a status message from the plugin layer.

Let me check for any Claude Code documentation or issues about this.

## Output

Found it! This thinking memory from a previous session identifies the issue clearly:

**The problem is that plugin-layer hooks (`SessionStart:Callback`) don't inject stdout content into Claude's context** - they only show a status message like "hook success: Success".

Let me verify the output format used by each hook and check if there's a format mismatch:
