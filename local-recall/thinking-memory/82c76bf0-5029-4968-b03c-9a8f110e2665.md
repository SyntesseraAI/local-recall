---
id: 82c76bf0-5029-4968-b03c-9a8f110e2665
subject: >-
  The type says `content: string` but in reality, Claude's transcripts can have
  content as either: -...
applies_to: global
occurred_at: '2025-12-20T22:29:47.295Z'
content_hash: 87ace355f944f804
---
## Thought

The type says `content: string` but in reality, Claude's transcripts can have content as either:
- A string
- An array of content blocks

Let me look at some actual error cases. The type definition says `content: string` but the runtime shows `content.toLowerCase is not a function`, meaning `content` is not a string at runtime.

Looking at the Claude API documentation and real transcripts, `tool_result` content can actually be an array of content blocks, not just a string. The type definition is incorrect.

Let me fix this by:
1. Making `isErrorResult` handle non-strings defensively
2. Possibly updating the type, though that might break other things

The quickest fix is to make `summarizeToolResult` handle the case where `resultContent` is not a string.

## Output

Found it. The `ToolResultContent.content` is typed as `string` but Claude's transcript can sometimes have it as an array of content blocks. The fix is to make the function defensive:
