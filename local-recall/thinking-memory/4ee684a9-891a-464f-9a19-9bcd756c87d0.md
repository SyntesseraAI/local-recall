---
id: 4ee684a9-891a-464f-9a19-9bcd756c87d0
subject: >-
  The user is experiencing mutex lock errors with the sqlite-vec extension.
  They're asking if it's...
applies_to: global
occurred_at: '2025-12-03T10:01:44.323Z'
content_hash: 94ab336b300f7a71
---
## Thought

The user is experiencing mutex lock errors with the sqlite-vec extension. They're asking if it's related to running both episodic and thinking memory together.

Let me look at the user-prompt-submit hook to understand how it handles both memory types and whether there could be a concurrency issue.

The architecture described in CLAUDE.md shows that hooks should communicate with the MCP daemon via HTTP to avoid loading sqlite-vec directly. The mutex error suggests that sqlite-vec is being loaded somewhere it shouldn't be.

Let me check the user-prompt-submit hook implementation to see if there's an issue with how it's handling the searches.

## Output

Let me investigate the user-prompt-submit hook to see how it handles the episodic and thinking memory searches.
