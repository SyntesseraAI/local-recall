---
id: b0f2a61c-1199-4bd1-8701-0c2dbe88c4e4
subject: >-
  The session-start hook only uses `MemoryManager` (file-based, no vectors), so
  it doesn't have the...
applies_to: global
occurred_at: '2025-12-03T11:20:58.714Z'
content_hash: ae90cec0dd52ed1e
---
## Thought

The session-start hook only uses `MemoryManager` (file-based, no vectors), so it doesn't have the mutex issue.

The problem is that the user-prompt-submit hook is directly instantiating `SearchEngine` and `ThinkingSearchEngine` which load the embedding model. According to CLAUDE.md, the hooks should use `DaemonClient` to call the daemon via HTTP, not load the embeddings directly.

Let me check if there's a DaemonClient that the user-prompt-submit hook should be using.

## Output

Session-start only uses `MemoryManager` (file-based, no embeddings) - that's why it's safe.

The `user-prompt-submit` hook directly loads the embedding model. Let me check for the `DaemonClient` mentioned in CLAUDE.md:
