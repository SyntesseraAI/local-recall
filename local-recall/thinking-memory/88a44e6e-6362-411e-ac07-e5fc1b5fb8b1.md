---
id: 88a44e6e-6362-411e-ac07-e5fc1b5fb8b1
subject: >-
  I can see the issue. The hook doesn't have any check to skip processing
  internal prompts like...
applies_to: global
occurred_at: '2025-12-01T21:30:17.644Z'
content_hash: 7c061d869da2fae4
---
## Thought

I can see the issue. The hook doesn't have any check to skip processing internal prompts like `[LOCAL_RECALL_INTERNAL]`. We need to add a check early in the function to skip processing these internal prompts.

Looking at the code, we should add a check after validating the prompt exists (around line 48-52) to skip if the prompt starts with `[LOCAL_RECALL_INTERNAL]`.

## Output

The hook is missing the recursion check. We need to skip vector searches for internal prompts. Here's the fix:
