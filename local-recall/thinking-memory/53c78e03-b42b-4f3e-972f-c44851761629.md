---
id: 53c78e03-b42b-4f3e-972f-c44851761629
subject: >-
  The user is seeing the mutex lock error from the UserPromptSubmit hook. This
  is the sqlite-vec...
applies_to: global
occurred_at: '2025-12-03T10:16:08.656Z'
content_hash: 23e4d0206fd97c37
---
## Thought

The user is seeing the mutex lock error from the UserPromptSubmit hook. This is the sqlite-vec concurrent access issue that the architecture was designed to avoid. The hook should be communicating with the daemon via HTTP to avoid loading sqlite-vec directly, but something is going wrong.

Let me look at the current implementation of the user-prompt-submit hook to understand what's happening and how to improve the logging.

## Output

That mutex error indicates the hook is still trying to load sqlite-vec directly instead of using the HTTP daemon. Let me look at the current hook implementation to improve the logging.
