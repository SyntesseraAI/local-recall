---
id: eae89ceb-c82b-4844-a7de-07e18955db8c
subject: >-
  The search tests need to be updated to match the new SearchEngine API:1. The
  SearchEngine...
applies_to: global
occurred_at: '2025-12-01T18:00:31.577Z'
content_hash: 5cc002045ec62a87
---
The search tests need to be updated to match the new SearchEngine API:1. The SearchEngine constructor now only takes MemoryManager, not IndexManager
2. The search methods use vector similarity instead of keyword matching
3. The fastembed model needs to be initialized (which requires downloading the model)

The tests as written won't work with the new vector-based search because:
1. They create memories and expect immediate keyword-based search to work
2. Vector search requires the embedding model to be initialized
3. The test expectations (like `matchedKeywords`) don't match the new API

I need to update the test file to work with the new API. However, since the fastembed model needs to download files on first use, the tests might be slow on first run. I should also consider mocking the embedding service for unit tests.

For now, let me update the test file to use the new SearchEngine constructor and update the tests to reflect the vector-based search behavior. I'll also skip or modify tests that rely on the embedding model.
