---
id: d07669cc-58c0-4449-9071-ebf2ff7f42ba
subject: >-
  Now I need to update the `withDbMutex` function to use file-based locking.
  Since the hooks and...
applies_to: global
occurred_at: '2025-12-03T10:06:54.011Z'
content_hash: fcb22ad2d8fa4a6d
---
## Thought

Now I need to update the `withDbMutex` function to use file-based locking. Since the hooks and daemon run in different processes, the lock needs to be based on a file path that they all agree on (the database directory).

## Output

Now let me update `withDbMutex` to use file-based locking:
