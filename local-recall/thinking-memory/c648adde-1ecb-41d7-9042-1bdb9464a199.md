---
id: c648adde-1ecb-41d7-9042-1bdb9464a199
subject: >-
  The search tests need to be updated to match the new SearchEngine API:1. The
  SearchEngine...
applies_to: global
occurred_at: '2025-12-01T18:00:31.577Z'
content_hash: ca78c67ac727d474
---
## Thought

The search tests need to be updated to match the new SearchEngine API:1. The SearchEngine constructor now only takes MemoryManager, not IndexManager
2. The search methods use vector similarity instead of keyword matching
3. The fastembed model needs to be initialized (which requires downloading the model)

The tests as written won't work with the new vector-based search because:
1. They create memories and expect immediate keyword-based search to work
2. Vector search requires the embedding model to be initialized
3. The test expectations (like `matchedKeywords`) don't match the new API

I need to update the test file to work with the new API. However, since the fastembed model needs to download files on first use, the tests might be slow on first run. I should also consider mocking the embedding service for unit tests.

For now, let me update the test file to use the new SearchEngine constructor and update the tests to reflect the vector-based search behavior. I'll also skip or modify tests that rely on the embedding model.

## Output

The search tests need updating to match the new API. The SearchEngine now:
1. Only takes MemoryManager (not IndexManager) 
2. Uses vector similarity instead of keyword matching
3. Returns empty `matchedKeywords` array since keywords aren't used for matching

Let me update the tests:
