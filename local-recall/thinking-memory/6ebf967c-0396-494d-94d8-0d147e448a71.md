---
id: 6ebf967c-0396-494d-94d8-0d147e448a71
subject: >-
  I see the issue now - many tests are failing because they don't provide
  `occurred_at` in the test...
applies_to: global
occurred_at: '2025-11-29T21:59:41.184Z'
content_hash: aeec61e35f4e2d77
---
I see the issue now - many tests are failing because they don't provide `occurred_at` in the test data. This is a separate issue from my transcript changes. The tests were already failing before my changes because of the `occurred_at` field requirement.

Also, my transcript parsing changes broke some tests because:
1. The old tests expected the format with `role` field but now I'm looking for `type` field
2. The tests are using the old format

Let me check what's happening and focus on the transcript tests first - those are the ones I changed.

Looking at the failures:
- `should parse valid transcript input` - expects 2 messages but gets 0 (because the test data uses `role` not `type`)
- Other transcript tests also fail

I need to make the parsing backward-compatible to handle both formats. Let me update the code to check for both `role` and `type` fields.
