---
id: 62159fcc-9f93-417c-bbc9-281de6b0a4ab
subject: >-
  Now I have a complete picture of the vector approach. Let me summarize it
  clearly for the user. Key...
applies_to: global
occurred_at: '2025-12-02T12:40:11.309Z'
content_hash: 0f037a427d79b798
---
Now I have a complete picture of the vector approach. Let me summarize it clearly for the user.

Key components:
1. **Embedding Model**: BGE-small-en-v1.5 via fastembed, produces 384-dimensional vectors
2. **Storage**: SQLite with sqlite-vec extension
3. **What gets embedded**: Subject + Content combined (`${memory.subject}\n\n${memory.content}`)
4. **When**: When a memory is added to the vector store
5. **Search**: Uses `queryEmbed` for the search query (different from `passageEmbed` for documents - this is an asymmetric embedding approach where queries and passages are embedded differently)
6. **Similarity**: Cosine distance, converted to a 0-1 similarity score

The distinction between `passageEmbed` and `queryEmbed` is important - BGE is an asymmetric embedding model where queries and documents are embedded differently for better retrieval.
