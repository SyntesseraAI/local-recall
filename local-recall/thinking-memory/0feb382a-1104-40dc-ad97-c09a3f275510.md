---
id: 0feb382a-1104-40dc-ad97-c09a3f275510
subject: >-
  Now I understand the full picture. Both `memory-extractor.ts` and
  `thinking-extractor.ts` need to...
applies_to: global
occurred_at: '2025-12-02T22:34:31.057Z'
content_hash: 84a99d3f927ab9a5
---
Now I understand the full picture. Both `memory-extractor.ts` and `thinking-extractor.ts` need to filter out synthetic transcripts. The best approach is to:

1. Add a helper function to check if a transcript is synthetic (either in `transcript-collector.ts` or a utility)
2. Use it in both extractors to skip synthetic files early

The check should look at the model field in assistant messages - if it's `<synthetic>`, skip the file.

Let me create the implementation plan:

1. Add `isSyntheticTranscript()` method to `TranscriptCollector` class
2. Update `ThinkingExtractor.processTranscript()` to skip synthetic files
3. Update `MemoryExtractor.processTranscript()` to skip synthetic files

Actually, looking at the code more carefully, I think the best place to add this is:
- A helper function that reads a few lines and checks for `<synthetic>` model
- Call it early in `processTranscript()` for both extractors

Let me implement this.
