---
id: 4b895e78-ee21-427a-8849-8c3d000ff023
subject: >-
  I can see that the hook calls `claude -p` with a prompt that starts with
  "Extract keywords from...
applies_to: global
occurred_at: '2025-11-30T14:51:10.758Z'
content_hash: 0601d959f591bb2b
---
## Thought

I can see that the hook calls `claude -p` with a prompt that starts with "Extract keywords from this text...". This triggers the UserPromptSubmit hook again, creating a recursive loop.

I need to add a check to skip prompts that are part of the extraction process. The user suggested checking for "[EXTRACTION PROCESS]" but looking at the code, I don't see that marker being added. Let me add a check for prompts that match the extraction pattern.

Actually, a simpler approach would be to check if the prompt starts with "Extract keywords from this text" which is the pattern used by this hook. Let me add that check early in the main function.

## Output

I see the issue. The hook calls `claude -p` which triggers another UserPromptSubmit, creating a recursive loop. Let me add a check to skip extraction-related prompts:
