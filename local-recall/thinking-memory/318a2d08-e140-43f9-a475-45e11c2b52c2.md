---
id: 318a2d08-e140-43f9-a475-45e11c2b52c2
subject: >-
  I can see the issue: 1. **Plugin cache** at
  `~/.claude/plugins/cache/.../server.js` is **704KB**...
applies_to: global
occurred_at: '2025-12-12T10:16:46.640Z'
content_hash: 0cfa58b1fc892541
---
## Thought

I can see the issue:

1. **Plugin cache** at `~/.claude/plugins/cache/.../server.js` is **704KB** (dated Dec 9)
2. **Local dev** at `dev-marketplace/local-recall-plugin/scripts/mcp-server/server.js` is **1.15MB** (dated Dec 12)

The larger file (1.15MB) includes the bundled dependencies. The smaller file (704KB) is the old version that still had `--external:@modelcontextprotocol/sdk`.

Looking at the current package.json build script on line 13, I can see it now DOES bundle everything (no `--external` flag). So the fix has been applied to the build script.

The problem is: the plugin cache has the **old** server.js (704KB from Dec 9) that was built before the fix. Users need to either:
1. Manually copy the new server.js to the plugin cache
2. Reinstall the plugin

Let me verify the current build is correct by checking if it runs:

## Output

The issue is clear:

| Location | Size | Date | Status |
|----------|------|------|--------|
| Plugin cache (`~/.claude/plugins/cache/...`) | 704KB | Dec 9 | **Outdated** (missing bundled deps) |
| Local dev (`dev-marketplace/.../server.js`) | 1.15MB | Dec 12 | **Fixed** (deps bundled) |

The build script was fixed (no `--external` flag), but the plugin cache still has the old unbundled version.

**To fix other Claude instances:**

```bash
# Copy the fixed server to the plugin cache
cp /Users/joe/Code/Syntessera/local-recall/dev-marketplace/local-recall-plugin/scripts/mcp-server/server.js \
   ~/.claude/plugins/cache/local-recall-marketplace/local-recall/0.1.0/scripts/mcp-server/server.js
```

Then restart Claude Code in those instances.

Want me to run that copy command now?
