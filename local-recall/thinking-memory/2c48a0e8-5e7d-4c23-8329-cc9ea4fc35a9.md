---
id: 2c48a0e8-5e7d-4c23-8329-cc9ea4fc35a9
subject: >-
  I need to modify the args to: 1. Add `--model haiku` to use Haiku 2. The
  `--output-format json` is...
applies_to: global
occurred_at: '2025-11-30T15:01:15.781Z'
content_hash: 0dbd6ca96504905b
---
## Thought

I need to modify the args to:
1. Add `--model haiku` to use Haiku
2. The `--output-format json` is already there which wraps the response in JSON, but to make Claude return only JSON content, I should also add proper instructions in the prompt or use a JSON schema

Looking at the user-prompt-submit.ts for reference on how they call haiku:
```javascript
const args = ['-p', prompt, '--model', 'haiku', '--output-format', 'json', '--strict-mcp-config'];
```

So I need to add `--model`, `'haiku'` to the args. 

For making Claude return JSON only, I see there's already a `MEMORY_EXTRACTION_JSON_SCHEMA` defined in the prompts file. I could use `--json-schema` flag if available, or I could update the prompt to be more explicit about returning only JSON.

Let me update the callClaudeCLI method to use haiku and also add the JSON schema requirement.

## Output

I'll update the `callClaudeCLI` method to use Haiku and add JSON schema validation:
