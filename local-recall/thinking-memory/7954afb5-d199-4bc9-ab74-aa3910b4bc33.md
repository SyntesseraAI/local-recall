---
id: 7954afb5-d199-4bc9-ab74-aa3910b4bc33
subject: >-
  There are test failures in the integration tests. The error is: "A LIMIT or 'k
  = ?' constraint is...
applies_to: global
occurred_at: '2025-12-01T20:22:28.690Z'
content_hash: d6ef3b4c6cfa06f1
---
There are test failures in the integration tests. The error is: "A LIMIT or 'k = ?' constraint is required on vec0 knn queries." This is a sqlite-vec requirement. The `SearchEngine.search` function needs to always provide a limit parameter.

Looking at the vector-store.ts search function, I see that it does have a default limit of 10, but there might be an issue with how the SQL query is constructed. Let me check the search function in vector-store.ts.
