---
id: 52925bc0-03e4-4f76-8148-d475581c90ed
subject: Plugin hooks were using stale better-sqlite3 dependency that no longer exists
keywords:
  - plugin
  - hooks
  - better-sqlite3
  - stale-code
  - dev-marketplace
  - user-prompt-submit-thinking
applies_to: 'area:plugin-development'
occurred_at: '2025-12-21T19:21:32.710Z'
content_hash: 73a0f1341c3e1a4b
---
The dev-marketplace/local-recall-plugin had a stale `user-prompt-submit-thinking.js` hook that attempted to import `better-sqlite3`, which is no longer used in the project. The main codebase migrated from SQLite to Orama (pure JavaScript vector store) for embeddings and search.

The plugin's `config/hooks.json` was pointing to this deleted file, causing 'Cannot find package better-sqlite3' errors when the hook executed.

Fix: Remove the stale hook file and update hooks.json to point to `user-prompt-submit.js` which now handles both episodic and thinking memory searches using Orama.
