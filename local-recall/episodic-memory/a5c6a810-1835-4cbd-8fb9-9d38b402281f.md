---
id: a5c6a810-1835-4cbd-8fb9-9d38b402281f
subject: >-
  Memory deduplication uses occurred_at timestamp and content_hash for
  idempotency
keywords:
  - deduplication
  - occurred_at
  - content_hash
  - idempotent
  - memory-creation
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T07:27:55.935Z'
content_hash: 0844643a39774ba8
---
The `findDuplicate()` function in memory.ts checks for existing memories using both `occurred_at` timestamp and `content_hash` (SHA-256 prefix of content). This enables idempotent memory creation - the `createMemory()` function returns an existing memory if a duplicate is detected, preventing duplicate memory files from being created even if the extraction process runs multiple times.
