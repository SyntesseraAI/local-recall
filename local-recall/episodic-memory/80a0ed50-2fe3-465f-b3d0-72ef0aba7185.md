---
id: 80a0ed50-2fe3-465f-b3d0-72ef0aba7185
subject: Keyword extraction for memory search uses Claude Haiku via shell
keywords:
  - keyword-extraction
  - claude-haiku
  - memory-search
  - shell-command
  - prompt-submit-hook
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T07:35:13.910Z'
content_hash: 30498aac3911925f
---
# Keyword Extraction Implementation

The user-prompt-submit hook extracts keywords from user prompts using Claude Haiku via shell command.

## Implementation Details

- Uses `claude -p --model haiku` shell command to invoke Claude Haiku
- Sends the user prompt as stdin with a specific extraction prompt
- Parses the response as a JSON array of keywords
- These keywords are then used to search the memory index for relevant memories

## Key Points

- The `-p` flag appears to be a prompt flag for the Claude CLI
- Keywords should be lowercase and specific for better fuzzy matching against the memory index
- This approach allows dynamic keyword extraction without hardcoding search terms
- Error handling should account for shell command failures or invalid JSON responses
