---
id: 8da159a0-51ac-4e6e-b9ca-75755529c73a
subject: 'Memory deduplication strategy - only duplicate prevention, no compaction'
keywords:
  - deduplication
  - duplicate prevention
  - memory management
  - findDuplicate
  - content-hash
  - occurred_at
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T18:19:38.550Z'
content_hash: 503ce70cd7b52b3a
---
The MemoryManager implements duplicate prevention (not compaction):

- Uses `findDuplicate()` method before creating memories
- Checks for matching `occurred_at` timestamp AND `content_hash`
- Returns existing memory instead of creating duplicate if found
- Located in `src/core/memory.ts:52-67`

Memories are NOT compacted or merged over time. There is a `maxMemories` configuration option (default: 1000) in `src/utils/config.ts`, but no active cleanup logic removes old memories when limit is exceeded.
