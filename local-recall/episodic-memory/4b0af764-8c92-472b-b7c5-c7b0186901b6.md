---
id: 4b0af764-8c92-472b-b7c5-c7b0186901b6
subject: SessionStart hook timeout issue - avoid initializing vector store in hooks
keywords:
  - session-start
  - hook
  - timeout
  - vector-store
  - embedding
  - performance
applies_to: 'file:src/hooks/session-start.ts'
occurred_at: '2025-12-21T18:17:02.145Z'
content_hash: 25d744e022d84042
---
The SessionStart hook was timing out (30s limit) because it initialized the vector store, which downloads a 133MB embedding model on first use. Fixed by loading the 5 most recent memories directly from files without vector store initialization. Vector store is now lazily initialized by MCP server or user-prompt-submit hook instead. This prevents slow startup for new sessions.
