---
id: 73eabe72-a33c-4c7f-8ed4-585e66f1c35e
subject: Claude CLI requires stdin for large prompts to avoid E2BIG error
keywords:
  - claude
  - cli
  - stdin
  - e2big
  - spawn
  - argument-limit
  - memory-extractor
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-02T06:30:32.846Z'
content_hash: b8c3db57562e8ab8
---
When calling Claude CLI with large prompts (like condensed transcripts), passing the prompt as a command-line argument via `spawn('claude', ['-p', prompt, ...])` can exceed the OS argument size limit (~2MB on macOS). Solution: Use stdin instead by piping the prompt to the process: `const proc = spawn('claude', ['-p', '--model', 'haiku']); proc.stdin.write(prompt); proc.stdin.end();`. This allows arbitrarily large inputs without hitting E2BIG errors.
