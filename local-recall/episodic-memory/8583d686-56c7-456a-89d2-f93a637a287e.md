---
id: 8583d686-56c7-456a-89d2-f93a637a287e
subject: >-
  Vector search scoring: cosine distance converted to 0-1 scale, rounded to 2
  decimals with recency tie-breaking
keywords:
  - scoring
  - similarity
  - ranking
  - vector-search
  - recency
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-21T19:20:08.847Z'
content_hash: d11eb41a5beb25f8
---
# Vector Search Scoring and Ranking

Vector store search results use the following scoring mechanism:

**Similarity Score Calculation**:
- Raw distance from sqlite-vec is in range 0-2 (cosine distance)
- Converted to 0-1 similarity scale: `1 - (distance / 2)`
- Rounded to 2 decimal places: `Math.round(score * 100) / 100`
- Results in scores like 0.65, 0.81, etc.

**Result Ranking**:
1. Primary sort: By similarity score (descending, highest first)
2. Secondary sort (tie-breaking): By `occurred_at` timestamp (newest first)
- When two results have identical rounded scores, more recent memories appear first

This ensures:
- Clean, readable similarity scores
- Consistent, deterministic ordering
- Newer memories preferred when relevance is equal
