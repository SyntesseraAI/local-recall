---
id: 96139106-a58f-47c4-ab2d-8e3a2c294655
subject: Current hooks architecture uses Orama pure JavaScript instead of SQLite
keywords:
  - architecture
  - hooks
  - orama
  - vector-store
  - embeddings
  - no-native-modules
applies_to: global
occurred_at: '2025-12-21T19:21:32.710Z'
content_hash: fb4cb977b8d56e74
---
The hooks system has been refactored to use Orama (pure JavaScript) for vector storage and search instead of better-sqlite3. This provides several benefits:

- No native module dependencies that can't be bundled
- Works seamlessly in hook processes without mutex/process isolation issues
- Embeddings still generated via Ollama, but storage/search is pure JavaScript
- Single `user-prompt-submit.js` hook handles both episodic and thinking memories

This is important when updating plugin code or adding new hooks - never introduce native module dependencies into hook files as they execute in ephemeral processes.
