---
id: 1dc95d16-b6fb-433e-a22a-7932369bd253
subject: Memory deduplication uses occurred_at timestamp and content_hash
keywords:
  - deduplication
  - memory
  - hash
  - duplicate-detection
  - occurred_at
  - content_hash
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T11:30:04.869Z'
content_hash: 5fe14238b0e5e7e2
---
# Memory Deduplication Strategy

The `findDuplicate()` function in memory.ts uses two fields to detect if a memory already exists:

1. **occurred_at**: The timestamp when the event originally happened (ISO-8601 format)
2. **content_hash**: SHA-256 hash prefix (16 characters) of the memory content

Both must match for a memory to be considered a duplicate. This allows:
- Same content from different times to coexist (events that happen repeatedly)
- Different content from the same event to be updated when transcripts are reprocessed
- Precise deduplication without false positives

The occurred_at timestamp is extracted from the original event in the transcript, not when the memory is created.
