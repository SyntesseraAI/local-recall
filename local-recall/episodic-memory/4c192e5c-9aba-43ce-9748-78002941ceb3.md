---
id: 4c192e5c-9aba-43ce-9748-78002941ceb3
subject: >-
  Embedding and vector search implementation added to local-recall for semantic
  memory matching
keywords:
  - embedding
  - vector-store
  - semantic-search
  - bge-small
  - fastembed
  - similarity
  - memory-search
applies_to: global
occurred_at: '2025-12-02T02:13:06.443Z'
content_hash: 0b8d0c75fd5d6b34
---
# Embedding and Vector Store Implementation

Local Recall now includes semantic search capabilities using embeddings.

## New Components

1. **`src/core/embedding.ts`** - Embeddings generation using the BGE-small-en-v1.5 model via fastembed library
   - `generateEmbedding(text)` - Generates embedding vector for text
   - Embeddings cached by content hash to avoid recomputation
   - Model (~133MB) auto-downloads to `local_cache/` on first use

2. **`src/core/vector-store.ts`** - Vector storage and similarity search
   - Stores embeddings alongside memory files (in YAML frontmatter)
   - `buildVectorStore()` - Processes all memories and generates embeddings
   - `searchByEmbedding(query)` - Finds semantically similar memories using cosine similarity
   - Returns results sorted by similarity score

## Integration Points

- Memory files now include `embedding` field in frontmatter (vector representation)
- Search module enhanced to use embeddings for improved recall
- Handles duplicate embeddings efficiently

## Performance Notes

- First run downloads embedding model (~133MB)
- Embeddings cached to avoid recomputation
- Vector store scales efficiently for thousands of memories
