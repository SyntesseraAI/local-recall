---
id: b2d9967e-1c69-46dd-8eb2-72a285b97f97
subject: >-
  Memory extractor uses Claude API with token counting for efficient transcript
  processing
keywords:
  - memory-extractor
  - claude-api
  - token-counting
  - transcript-processing
  - streaming
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T15:55:58.663Z'
content_hash: 22b19e6c5a3705b7
---
The memory extractor in `src/core/memory-extractor.ts` uses the Anthropic Claude API (claude-3-5-sonnet-20241022 model) with token counting to efficiently process session transcripts. It uses streaming for responses and batch processing for efficiency. The extractor takes a transcript path and system prompt as input, reads the transcript file, and calls Claude API to extract structured memories. Token counting via `countTokens()` is used to stay within token budgets.
