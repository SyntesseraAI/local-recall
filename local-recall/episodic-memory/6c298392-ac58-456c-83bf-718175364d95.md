---
id: 6c298392-ac58-456c-83bf-718175364d95
subject: >-
  Memory extraction uses Claude Haiku with structured prompts and handles
  transcript condensing
keywords:
  - memory-extractor
  - claude haiku
  - transcript condensing
  - prompt engineering
  - memory extraction
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:16:32.476Z'
content_hash: d91fd83c5b6cc9f2
---
The memory extraction system in `memory-extractor.ts` uses Claude Haiku to analyze transcripts and extract valuable memories. The process:

1. Uses `claude -p` with the Haiku model for cost-effective extraction
2. Accepts condensed transcripts (not full transcripts) to reduce token usage
3. Applies structured prompts from `src/prompts/memory-extraction.ts` to guide extraction
4. Returns an array of memory objects with subject, keywords, applies_to, and content fields
5. Handles deduplication using content_hash and occurred_at timestamps

Key insight: Transcripts are condensed before being sent to Haiku to optimize token usage and focus on relevant events.
