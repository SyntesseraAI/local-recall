---
id: cde0cbf3-d87a-4d1d-ac63-516ec0780088
subject: >-
  Memory extraction system uses Claude API with structured prompts for
  identifying valuable session insights
keywords:
  - memory-extractor
  - claude-api
  - prompt-engineering
  - memory-extraction
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T22:14:08.520Z'
content_hash: 4eda6afff4ff528b
---
The memory extraction process in `src/core/memory-extractor.ts` uses the Claude API to analyze session transcripts and identify valuable memories. Key aspects:

- Uses `claude-3-5-haiku-20241022` model for efficient transcript processing
- Extracts memories from condensed transcripts that include User, Assistant, Tool, and Result events
- Uses a detailed extraction prompt from `src/prompts/memory-extraction.ts` to guide Claude on what constitutes valuable memories
- Returns memories with subject, keywords, applies_to scope, and markdown content
- Handles memory filtering to avoid duplicates and ensures memories are specific and actionable

This is the core mechanism for the background daemon that processes transcripts every 5 minutes to create persistent memories.
