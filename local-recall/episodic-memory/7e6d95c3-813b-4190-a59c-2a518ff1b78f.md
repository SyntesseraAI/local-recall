---
id: 7e6d95c3-813b-4190-a59c-2a518ff1b78f
subject: Memory extraction process uses claude -p with haiku model
keywords:
  - memory-extraction
  - claude
  - haiku
  - transcript
  - processing
  - mcp-server
applies_to: global
occurred_at: '2025-12-01T16:00:47.350Z'
content_hash: 74c3e7ee7d3219fd
---
# Memory Extraction with Claude Haiku

The memory extraction process uses `claude -p --model haiku` to analyze transcripts and extract valuable memories.

## Implementation Details

- Located in `src/core/memory.ts` and used by the MCP server
- Haiku model is chosen for speed and cost-effectiveness in processing transcripts
- The process reads JSONL transcripts from Claude's cache
- Extracts structured memories with metadata (subject, keywords, scope, timestamp, content_hash)
- Deduplicates memories using `occurred_at` and `content_hash` fields

## Transcript Processing Workflow

1. MCP server daemon syncs transcripts from `~/.claude/projects/<project>/transcripts/`
2. Passes transcript content to `claude -p --model haiku` for analysis
3. Claude Haiku extracts memories in the expected format
4. Memories are validated and stored in `local-recall/episodic-memory/`
5. Index is rebuilt to include new memories

This approach leverages Claude's understanding while keeping processing lightweight and efficient.
