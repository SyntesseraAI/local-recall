---
id: 7634965e-5f5a-49af-b6c7-1b1ada6e78c5
subject: Transcript parsing must be backward-compatible with both old and new formats
keywords:
  - transcript parsing
  - backward compatibility
  - content blocks
  - legacy format
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-21T19:22:24.167Z'
content_hash: b0c6c129c0ee349a
---
The transcript parser should support both formats:
1. **New format**: content as array of blocks with type field
2. **Old format**: content as string, thinking as optional string

The parser tries to detect which format is being used and normalizes to a common structure. This allows existing tests and code to continue working while supporting the actual Claude Code transcript format.
