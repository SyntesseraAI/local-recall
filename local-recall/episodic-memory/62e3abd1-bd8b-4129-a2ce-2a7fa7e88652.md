---
id: 62e3abd1-bd8b-4129-a2ce-2a7fa7e88652
subject: Transcript extraction uses claude -p to parse and analyze transcript events
keywords:
  - transcript
  - extraction
  - claude
  - '-p'
  - parsing
  - mcp-server
  - memory-creation
applies_to: 'area:transcript-collector'
occurred_at: '2025-12-01T15:54:55.613Z'
content_hash: 5418383a44ee116e
---
# Transcript Extraction Process

The MCP server daemon uses `claude -p` (pipe mode) to analyze transcripts and extract memories.

## Process

1. Raw transcripts are read from `~/.claude/projects/{project}/transcripts/`
2. Transcripts are condensed/summarized into a readable format
3. The condensed transcript is piped to `claude -p --model haiku` via stdin
4. Claude Haiku analyzes the transcript and extracts valuable memories
5. Extracted memories are created using the memory creation API

## Implementation

The `stop.ts` hook (and MCP server daemon) implements this workflow:
- Reads transcript files from Claude's project cache
- Condenses them into event format (`[User]`, `[Assistant]`, `[Tool: Name]`, `[Result]`)
- Uses `claude -p --model haiku` to extract memories
- Parses the JSON output and creates memory files

## Key Details

- The transcript is piped to stdin with a prompt asking Claude to extract memories
- Output format is expected to be JSON with a `memories` array
- Each extracted memory includes subject, keywords, applies_to scope, and content
- This allows the system to continuously learn from session transcripts
