---
id: a66697dd-624e-418b-8430-3273ed64cdcb
subject: >-
  Memory extractor handles streaming responses and parses JSON from Claude Haiku
  output
keywords:
  - streaming
  - json parsing
  - error handling
  - stdout parsing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:00:24.564Z'
content_hash: 9d13d30e458de8f8
---
The memory extractor processes Claude Haiku streaming responses by:

1. Spawning a child process with `claude -p --model haiku`
2. Sending the extraction prompt with transcript content via stdin
3. Collecting streamed output from stdout
4. Parsing the collected output as JSON to extract memories array
5. Handling cases where output may be empty or invalid JSON
6. Returning parsed memories or empty array on error

The streaming approach allows real-time processing without waiting for the entire response, making transcript analysis more efficient.
