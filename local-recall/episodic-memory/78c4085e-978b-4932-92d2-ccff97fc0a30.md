---
id: 78c4085e-978b-4932-92d2-ccff97fc0a30
subject: >-
  Plugin hooks configuration uses old user-prompt-submit-thinking.js that
  requires better-sqlite3
keywords:
  - plugin
  - hooks
  - better-sqlite3
  - stale
  - user-prompt-submit-thinking
applies_to: 'file:dev-marketplace/local-recall-plugin/config/hooks.json'
occurred_at: '2025-12-21T19:22:18.525Z'
content_hash: d58569a1ec761148
---
The plugin's hooks.json was pointing to a stale `user-prompt-submit-thinking.js` file that attempted to import `better-sqlite3`, a native module that cannot be bundled. This file is from an older version before the codebase migrated to Orama (pure JavaScript) for vector search. The fix is to update hooks.json to use `user-prompt-submit.js` instead, which handles both episodic and thinking memories and uses only Orama (pure JS, no native dependencies).
