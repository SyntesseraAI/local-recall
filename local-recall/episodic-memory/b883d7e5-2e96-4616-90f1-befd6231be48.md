---
id: b883d7e5-2e96-4616-90f1-befd6231be48
subject: Transcript condenser reduces token usage for memory extraction by 60-80%
keywords:
  - transcript-condenser
  - token-optimization
  - memory-extraction
  - performance
  - JSONL-parsing
applies_to: global
occurred_at: '2025-12-21T18:31:32.415Z'
content_hash: cb966eb9dd75dc27
---
Implemented a transcript condenser (`src/core/transcript-condenser.ts`) that parses raw JSONL transcripts and extracts only essential content for memory creation. Instead of passing entire transcript lines to Claude for memory extraction, the condenser:

1. Parses JSONL using TypeScript types defined in `src/types/transcript-schema.ts`
2. Filters and extracts minimum necessary content from each event type:
   - **User/Assistant**: Message text only (no metadata)
   - **Tool invocations**: Tool name + relevant params only
   - **Results**: Success/error status + key output (not full output)
   - **Thinking blocks**: Condensed thinking summary
3. Creates structured `CondensedTranscript` objects with parsed events
4. Passes condensed data to memory extractor instead of raw JSONL

This approach dramatically reduces token usage (estimated 60-80% reduction) and improves extraction speed while maintaining context quality for memory creation.
