---
id: 92919967-e641-4088-9cc0-99a5c1bb069e
subject: Backward compatibility maintained in transcript parsing
keywords:
  - backward compatibility
  - transcript
  - format migration
  - parsing
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-21T18:28:38.979Z'
content_hash: 602970627f5761ee
---
Updated transcript parsing to support both message formats:

1. **Old format** (from tests/mocks): `content` as string, `role` field
2. **New format** (from Claude Code): `content` as array, `type` field

The parser attempts to normalize both to internal format during `parseTranscript`. This prevents breaking existing code while supporting the actual Claude Code transcript structure.

Invalid messages (missing required fields) are silently skipped rather than throwing errors, which is more robust for processing real transcripts.
