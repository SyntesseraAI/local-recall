---
id: 1622f26f-0338-49ef-92f7-1282c1a2dcd8
subject: Processed log refactored to append-only JSONL format for performance
keywords:
  - processed-log
  - jsonl
  - append-only
  - performance
  - format-migration
applies_to: 'file:src/core/processed-log.ts'
occurred_at: '2025-12-21T18:14:34.568Z'
content_hash: 070e94955af46165
---
The processed log was migrated from JSON array to JSONL (JSON Lines) format. The new implementation:
- Uses append-only writes for better I/O performance
- Each entry is a single JSON line with `action: "add"` or `action: "remove"`
- `recordProcessed()` appends an "add" line, `removeEntry()` appends a "remove" line
- On load, replays all entries to build current state (idempotent reconstruction)
- Includes a `compact()` method to clean up the file by removing redundant entries

This design provides better performance and cleaner append semantics than the previous array-based approach.
