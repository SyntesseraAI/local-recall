---
id: e1256d53-5aac-4059-bfe8-5a3e4d13c95d
subject: >-
  Core components: MemoryManager for CRUD ops, VectorStore for semantic search,
  Embedding service using fastembed with BGE-small-en-v1.5 model
keywords:
  - architecture
  - vector-store
  - embedding
  - fastembed
  - semantic-search
applies_to: global
occurred_at: '2025-12-02T22:01:41.097Z'
content_hash: b324471000ea43c2
---
The system has three main components:
1. **MemoryManager** (`src/core/memory.ts`): CRUD operations for memory files (no update - memories are idempotent)
2. **VectorStore** (`src/core/vector-store.ts`): SQLite-backed with `sqlite-vec` extension for vector similarity search using cosine distance (0.0-1.0 score)
3. **Embedding Service** (`src/core/embedding.ts`): Uses `fastembed` library with BGE-small-en-v1.5 model (~133MB), cached in `local_cache/`

Search results are ranked by cosine similarity score, with recency (`occurred_at`) as a tie-breaker.
