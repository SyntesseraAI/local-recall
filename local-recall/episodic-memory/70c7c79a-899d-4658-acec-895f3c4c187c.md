---
id: 70c7c79a-899d-4658-acec-895f3c4c187c
subject: >-
  UserPromptSubmit hook now handles both episodic and thinking memories via
  single hook
keywords:
  - hook
  - user-prompt-submit
  - episodic
  - thinking
  - unified
  - configuration
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T18:29:21.341Z'
content_hash: deca1e2d0133d334
---
The UserPromptSubmit hook is now unified and handles both episodic and thinking memory retrieval based on configuration flags rather than having separate hook files. The hook checks `episodicEnabled` and `thinkingEnabled` configuration options to determine which memory types to search and inject. This replaces the previous approach of having separate user-prompt-submit-thinking.js and user-prompt-submit.js files. The hook uses Orama (pure JavaScript) for vector search, making it safely bundleable without native module issues.
