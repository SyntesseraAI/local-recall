---
id: ad983d81-66e5-458f-b663-7d2456fab334
subject: VectorStore singleton needs reset function for tests
keywords:
  - vectorstore
  - singleton
  - testing
  - isolation
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-01T21:47:19.758Z'
content_hash: b00b65b3f98dbef8
---
Added `_resetForTesting()` function to clear the VectorStore singleton between tests. Without this, test isolation was broken because the same singleton instance was reused across tests with different temporary directories.

**Implementation:** Function closes current connection and clears the singleton reference so next `getVectorStore()` call creates a fresh instance.

**Usage:** Called in test `beforeEach` hooks to ensure clean state between tests.
