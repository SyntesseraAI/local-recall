---
id: 9cd21605-5c9c-4a95-bbe1-00e93077bd15
subject: All unit tests pass after memory extractor array wrapper fix (220 total tests)
keywords:
  - tests
  - memory-extractor
  - vitest
  - unit-tests
  - parsing
applies_to: 'file:tests/unit/core/memory-extractor.test.ts'
occurred_at: '2025-12-21T18:26:15.052Z'
content_hash: ab208f7cf95d8a27
---
Created comprehensive test suite for `memory-extractor.ts` covering both the wrapped object format and raw array format that Claude returns. All 220 unit tests pass including the new test cases that verify:

1. Raw array parsing: Claude returning `[{...}, {...}]` is correctly wrapped to `{ memories: [...] }`
2. Wrapped object parsing: Claude returning `{ memories: [...] }` works as expected
3. Error handling: Invalid data structures are properly caught and reported

Tests are in `tests/unit/core/memory-extractor.test.ts` and cover both happy paths and edge cases.
