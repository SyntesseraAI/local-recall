---
id: 4bd0a77c-183d-4910-939d-ff6077179897
subject: UserPromptSubmit hook AbortError caused by spawn timeout option
keywords:
  - abort error
  - user-prompt-submit
  - spawn
  - timeout
  - child process
  - promise rejection
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T16:31:50.084Z'
content_hash: faa6e24bfd2f182b
---
The AbortError in the user-prompt-submit hook was caused by using `timeout: 30000` option in the `spawn()` call. Node.js kills the child process when this timeout is reached, causing an unhandled promise rejection. Solution: Remove the timeout option from spawn() and instead use a timeout wrapper (Promise.race with timeout promise) at a higher level in the execution flow. This provides better control over how timeouts are handled.
