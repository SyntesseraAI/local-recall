---
id: a35059c8-1977-4720-865b-c1588c23467a
subject: transcript-collector.ts needs refactoring for JSONL parsing
keywords:
  - transcript-collector
  - jsonl
  - parsing
  - refactor
  - bug
  - line-by-line
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:22:33.355Z'
content_hash: cdbdf96eadb6be5a
---
# Transcript Collector Refactoring Needed

The `transcript-collector.ts` module currently tries to parse transcripts as complete JSON objects, but Claude stores them as JSONL (newline-delimited JSON) format.

## Issue

The current implementation likely fails or produces incorrect results because:
- JSONL files have one JSON object per line
- The current parser probably tries to parse the entire file as a single JSON object
- This won't work with newline-delimited format

## Solution

Refactor `transcript-collector.ts` to:
1. Read the file line-by-line
2. Parse each line as an individual JSON object
3. Collect these parsed objects into the transcript structure
4. Handle cases where some lines might be incomplete or malformed

## Files Affected

- `src/core/transcript-collector.ts` - Main file needing refactor
- Tests in `tests/` should be updated to verify JSONL parsing works correctly
