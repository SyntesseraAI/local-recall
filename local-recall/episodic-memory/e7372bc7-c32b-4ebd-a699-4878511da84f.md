---
id: e7372bc7-c32b-4ebd-a699-4878511da84f
subject: >-
  Plugin bundling issue: MCP server needs all dependencies included since
  node_modules aren't shipped with marketplace plugins
keywords:
  - plugin
  - mcp server
  - bundling
  - dependencies
  - marketplace
  - esbuild
  - external
applies_to: global
occurred_at: '2025-12-21T18:16:19.596Z'
content_hash: 9e1f1215473d22a0
---
The local-recall plugin deploys to `~/.claude/plugins/cache/local-recall-marketplace/local-recall/<version>/scripts/mcp-server/server.js` but the MCP server requires all dependencies to be bundled into the distributable since node_modules are not included in marketplace plugin deployments.

The build script uses esbuild with `--bundle` flag (no `--external` flag) to ensure all dependencies are included in the final server.js file. When built correctly, server.js is ~1.1MB (includes all bundled dependencies).

Old versions with unbundled server.js (using `--external` flag) fail when other Claude instances try to run them outside the plugin development repository, resulting in missing dependencies errors.
