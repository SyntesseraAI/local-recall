---
id: c28a9aa5-6a89-4fa9-915d-7a800c57d919
subject: 'Memory extraction runs as background daemon in MCP server, not in Stop hook'
keywords:
  - memory extraction
  - mcp server
  - background daemon
  - transcript processing
  - stop hook
applies_to: global
occurred_at: '2025-12-01T16:33:15.069Z'
content_hash: 41e73daf9dd6a464
---
The project design separates memory extraction from the Stop hook:

1. **Architecture**: Memory extraction is handled by the MCP server daemon which runs continuously and processes transcripts every 5 minutes
2. **Why**: The Stop hook is disabled to avoid blocking user workflow when Claude sessions end
3. **Process**: The daemon syncs transcripts from Claude's cache, processes them asynchronously, and creates memories
4. **Benefit**: Users get responsive session endings while memories are still extracted and stored
5. **Implementation**: See MCP server in `src/mcp-server/` for the daemon logic
