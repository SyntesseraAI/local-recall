---
id: 4e65a595-b523-4675-b6f8-0bfee0849251
subject: Stop hook is disabled - memory extraction handled by MCP background daemon
keywords:
  - hook
  - memory-extraction
  - mcp-server
  - background-daemon
  - transcript-processing
  - disabled
applies_to: global
occurred_at: '2025-12-01T15:53:42.080Z'
content_hash: f10fdfd344a817aa
---
# Stop Hook Disabled

The Stop hook is currently disabled in this project. Memory extraction is instead handled by a background daemon process in the MCP server.

## How It Works

1. The MCP server runs a background daemon that wakes up every 5 minutes
2. It scans Claude's transcript cache (`~/.claude/projects/<project>/transcripts/`)
3. It processes transcripts using `claude -p` to extract memories
4. It tracks processed transcripts with content hashes to avoid reprocessing
5. If a transcript changes, it deletes old memories and creates new ones

## Why This Approach

This is superior to the Stop hook because:
- Stop hook doesn't guarantee memory extraction (hook failure = no memory)
- Background daemon ensures memories are eventually created
- Asynchronous processing doesn't slow down the user's session
- Daemon can process multiple transcripts continuously

## Configuration

See `src/mcp-server/server.ts` for daemon implementation details.
