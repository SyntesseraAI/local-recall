---
id: 0ed0ac45-94d3-4b30-85b4-f19592eb7e5f
subject: Memory extraction and transcript processing in local-recall MCP server
keywords:
  - memory-extraction
  - transcript-processing
  - mcp-server
  - daemon
  - background-job
  - claude-api
applies_to: 'area:mcp-server'
occurred_at: '2025-12-02T07:18:38.784Z'
content_hash: 0079cffbdcf2bcfb
---
# Transcript Processing and Memory Extraction

The MCP server runs a background daemon that:
1. Syncs transcripts from Claude's cache at `~/.claude/projects/<project-folder>/transcripts/`
2. Processes transcripts using the Claude Haiku API to extract memories
3. Tracks processed transcripts with content hashes for change detection
4. Deletes and recreates memories when transcripts change
5. Runs every 5 minutes

## Implementation

The transcript processing is implemented in the MCP server (see `src/mcp-server/server.ts`). The daemon extracts memories using Claude's API rather than the local `stop` hook, allowing for more intelligent memory extraction and handling of transcript updates.

## Deduplication

Memories are deduplicated using `occurred_at` timestamp and `content_hash` (SHA-256 prefix) to avoid creating duplicate memories when transcripts haven't changed.
