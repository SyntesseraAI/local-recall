---
id: 340f9147-082f-4fd6-8f15-9ea5da76105e
subject: Stop hook redesigned to process entire transcript history
keywords:
  - stop-hook
  - transcript-processing
  - memory-extraction
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-21T18:22:28.112Z'
content_hash: 4c9407aa4e1b74d6
---
Removed 30-second time window filter that was preventing memory extraction. Now:

- Processes entire transcript history instead of only recent messages
- Allows duplicate detection via `occurred_at` + `content_hash` to skip re-extracting
- Sends extracted memories to MCP server for creation

Old design filtered messages older than 30 seconds, causing most content to be ignored by the time the hook fired.
