---
id: 8b7b9f5b-077b-41a5-bdfb-7a01b71de8a0
subject: Ollama-based embeddings integrate with user-prompt hook for semantic search
keywords:
  - embedding
  - ollama
  - semantic search
  - user-prompt-submit
  - keywords
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T18:28:08.458Z'
content_hash: bae87931211db364
---
## Integration Pattern
The user-prompt-submit hook uses Claude itself (via spawn) to extract keywords from user prompts, which are then used for semantic searching against the memory vector stores.

## Process
1. User submits a prompt to Claude Code
2. The hook spawns a child process that calls Claude CLI to generate keywords from the prompt
3. These keywords are used to search both episodic and thinking memory vectors
4. Results are filtered by similarity threshold and injected into context

## Key Detail
This approach leverages Claude's own language understanding to identify relevant keywords, which improves the quality of semantic searches compared to simple keyword extraction.
