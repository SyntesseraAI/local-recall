---
id: aa7d972c-5bf9-447c-ac75-c3ce14178a20
subject: Background daemon pattern used for transcript processing in MCP server
keywords:
  - daemon
  - background-processing
  - mcp-server
  - transcripts
  - memory-extraction
  - async
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T21:41:07.145Z'
content_hash: 09a320f80d5c955f
---
# MCP Server Background Daemon Pattern

Local Recall implements a background daemon in the MCP server that:
- Runs every 5 minutes to process new transcripts
- Syncs transcripts from Claude's cache directory
- Uses content hashing to detect changes
- Extracts memories asynchronously

## Why This Pattern
- Avoids blocking the Stop hook execution
- Allows for more complex analysis and memory extraction
- Enables processing of transcripts from multiple sessions
- More flexible than synchronous hook-based extraction

## Implementation Details
- Tracks processed transcripts by content hash
- Deletes and recreates memories when transcripts change
- Runs independently of Claude Code session lifecycle
- Useful for continuous memory building across sessions
