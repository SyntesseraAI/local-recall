---
id: 18864925-ca7d-492a-b15f-96d8aceb28fe
subject: >-
  Hook-daemon architecture prevents sqlite-vec mutex errors through HTTP
  communication
keywords:
  - hook-daemon
  - http
  - architecture
  - sqlite-vec
  - mutex prevention
applies_to: global
occurred_at: '2025-12-03T11:21:33.144Z'
content_hash: 79ec2444217081bd
---
Hooks are thin clients that communicate with the MCP daemon via HTTP (localhost:7847) to avoid loading the sqlite-vec native extension directly. This prevents "mutex lock failed" errors. The daemon owns the database connection and handles all vector store operations, while hooks use fallback file-reading methods when the daemon is unavailable. This is a critical design pattern that prevents concurrent access issues.
