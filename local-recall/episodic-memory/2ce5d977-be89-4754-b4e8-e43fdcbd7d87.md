---
id: 2ce5d977-be89-4754-b4e8-e43fdcbd7d87
subject: >-
  Cannot use per-instance daemon servers - ONNX mutex conflicts still occur at
  startup
keywords:
  - daemon
  - architecture
  - concurrency
  - multiple-instances
  - onnx
applies_to: global
occurred_at: '2025-12-21T19:19:54.289Z'
content_hash: 64ba497f8b77041a
---
The proposed HTTP daemon architecture (embedding server built into MCP server on dynamic ports) doesn't solve the ONNX mutex problem. Running multiple Claude instances still means multiple ONNX runtime initializations happening concurrently, which triggers the same mutex conflicts. The mutex issue is fundamental to ONNX's initialization, not the hook invocation pattern.

**Key insight**: The problem isn't about hooks vs HTTP callsâ€”it's that ONNX runtime can't be safely initialized by multiple concurrent processes. Multiple Claude instances = multiple ONNX initializations = same mutex risk.
