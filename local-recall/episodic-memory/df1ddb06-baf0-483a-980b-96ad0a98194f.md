---
id: df1ddb06-baf0-483a-980b-96ad0a98194f
subject: Claude Code hook integration and transcript processing
keywords:
  - hooks
  - session-start
  - user-prompt-submit
  - transcript
  - keyword-extraction
applies_to: global
occurred_at: '2025-12-01T16:23:11.832Z'
content_hash: cf9e38df261c588f
---
Claude Code integration uses hooks that execute as shell commands receiving JSON via stdin:

**SessionStart Hook:**
- Triggered when Claude Code session begins
- Input: `session_id`, `transcript_path`, `cwd`
- Process: Loads memory index from `local-recall/index.json`
- Output: Relevant memories injected into Claude's context

**UserPromptSubmit Hook:**
- Triggered when user submits a prompt (before Claude processes it)
- Input: `session_id`, `transcript_path`, `cwd`, `prompt`
- Process: Extracts keywords from prompt using Claude Haiku
- Performs fuzzy matching against memory index
- Output: Matching memories injected into Claude's context

**Stop Hook (Currently Disabled):**
- Memory extraction now handled by MCP server daemon
- Daemon processes transcripts asynchronously every 5 minutes
- Syncs transcripts from Claude's cache at `~/.claude/projects/<project>/transcripts/`
- Uses content hashes for change detection

**Configuration:**
- Hooks configured in `hooks.json`
- Use `${CLAUDE_PLUGIN_ROOT}` for relative paths to scripts
- Receive `cwd` via stdin to operate on user's project directory
