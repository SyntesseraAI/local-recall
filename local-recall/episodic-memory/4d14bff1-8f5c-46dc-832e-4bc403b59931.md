---
id: 4d14bff1-8f5c-46dc-832e-4bc403b59931
subject: Key changes to memory and transcript utilities
keywords:
  - memory.ts
  - transcript.ts
  - markdown.ts
  - implementation details
  - codebase changes
applies_to: global
occurred_at: '2025-12-01T15:52:53.508Z'
content_hash: 3e3165ab68ce3c22
---
Recent implementation changes across utility files:

**src/utils/transcript.ts**:
- Removed unused `formatMessageWithRole()` function
- `analyzeForMemories()` now skips user messages and filters single-line assistant messages
- Message content stored without role prefixes

**src/core/memory.ts**:
- Implements CRD operations (no update - memories are idempotent)
- `createMemory()` returns existing memory if duplicate found via `findDuplicate()`
- Uses content_hash and occurred_at for deduplication

**src/core/index.ts**:
- Maintains keyword index for fast searching
- Index stored at `local-recall/index.json` (gitignored)

**src/utils/markdown.ts**:
- Handles YAML frontmatter parsing and memory file creation
