---
id: 6f9b1760-f74b-4103-ac7b-9918a5fbcd16
subject: >-
  Vector store uses cosine distance similarity with recency tie-breaker for
  ranking results
keywords:
  - vector-store
  - search
  - ranking
  - similarity-scoring
  - embeddings
applies_to: global
occurred_at: '2025-12-02T12:50:46.418Z'
content_hash: 719fd8ce5c880a2f
---
The vector store implementation in `src/core/vector-store.ts` uses SQLite with the sqlite-vec extension and fastembed for embeddings. Search results are ranked using:
- Cosine distance similarity (0.0 to 1.0 scale, rounded to 2 decimal places)
- Recency tie-breaker: When scores are equal, more recent memories (by `occurred_at`) rank higher
- Results sorted descending by similarity score

The BGE-small-en-v1.5 model (~133MB) is used for semantic embeddings, cached in `local_cache/`.
