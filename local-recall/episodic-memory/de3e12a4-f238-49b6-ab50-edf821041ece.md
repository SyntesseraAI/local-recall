---
id: de3e12a4-f238-49b6-ab50-edf821041ece
subject: Memory extraction uses claude -p flag for processing transcripts
keywords:
  - claude
  - cli
  - processing
  - transcripts
  - memory-extraction
  - mcp-server
  - daemon
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T12:51:21.795Z'
content_hash: 48678faaba56193e
---
# Memory Extraction Process

The MCP server daemon uses the `claude -p` command to process transcripts for memory extraction.

## How It Works

1. The daemon reads transcripts from Claude's cache
2. For each transcript, it invokes: `claude -p < transcript.jsonl`
3. The `-p` flag processes the transcript and returns extracted memories
4. Memories are then stored in the local-recall system

## Implementation Details

- The `-p` flag is a built-in Claude CLI feature for processing/analyzing content
- It's used in the `memory-extractor.ts` to transform raw transcript data into structured memories
- This approach allows leverage of Claude's native understanding without reimplementing extraction logic

## Important Notes

- This is part of the background daemon that runs every 5 minutes
- The Stop hook is disabled because memory extraction is handled asynchronously by the daemon
- Transcripts are tracked with content hashes to detect changes and avoid reprocessing
