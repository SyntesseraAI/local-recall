---
id: 5d33aca7-b4d3-4c01-9d98-b373f6b7f25a
subject: Transcript condenser reduces token usage for memory extraction
keywords:
  - transcript-condenser
  - token optimization
  - memory extraction
  - JSONL parsing
  - performance
applies_to: global
occurred_at: '2025-12-21T18:30:37.940Z'
content_hash: 76c75275e40577ba
---
Implemented a transcript condenser (src/core/transcript-condenser.ts) that parses raw JSONL transcript entries and extracts only essential content for memory creation. This reduces token usage significantly by:

1. **Selective content extraction**: Only extracts relevant parts from each transcript entry type
2. **Structured condensation**: Creates condensed, structured format for the extractor prompt
3. **Entry type handling**: Processes different entry types (User, Assistant, Tool, Result) with appropriate content filtering
4. **Batch processing**: Handles multiple transcript lines efficiently

The condenser is integrated into memory-extractor.ts and is called before building the memory extraction prompt, replacing the previous approach of passing raw JSONL content to Claude.
