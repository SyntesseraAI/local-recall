---
id: 8e4239fb-a2fa-4cd3-9ca8-200e9424231a
subject: Memory extraction uses Haiku model with 10 minute timeout and JSON-only output
keywords:
  - memory extraction
  - haiku model
  - timeout
  - json output
  - claude cli
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-03T09:48:52.171Z'
content_hash: a834ef9d499a5b2a
---
The `callClaudeCLI` method at line 70-120 was updated to:
1. Use `--model haiku` (line 79-80) instead of Sonnet for faster, cheaper extraction
2. Set timeout to 600000ms (10 minutes) at line 40 to handle transcript processing
3. Add `--max-turns 1` (line 83-84) to ensure single turn responses
4. The prompt in `src/prompts/memory-extraction.ts` was updated to explicitly require JSON-only output with no markdown formatting or code blocks, preventing formatting errors during JSON parsing
