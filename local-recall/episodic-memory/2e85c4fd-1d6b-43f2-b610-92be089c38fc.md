---
id: 2e85c4fd-1d6b-43f2-b610-92be089c38fc
subject: >-
  Memory deduplication uses occurred_at timestamp and content_hash SHA-256
  prefix for change detection
keywords:
  - deduplication
  - content-hash
  - occurred-at
  - sha256
  - memory-files
  - idempotent
  - change-detection
applies_to: 'area:memory-management'
occurred_at: '2025-12-01T15:59:21.015Z'
content_hash: 6a3741399fa5fdd0
---
# Memory Deduplication Strategy

The memory system uses a two-part deduplication approach:

## Fields Used for Deduplication

1. **occurred_at**: ISO-8601 timestamp of when the original event occurred
2. **content_hash**: 16-character SHA-256 hash prefix of the memory content

## Why Both Fields Matter

- `occurred_at` allows grouping related memories from the same time period
- `content_hash` enables detecting when content has changed (for transcript updates)
- Together, they prevent duplicate memories while allowing legitimate updates

## Implementation Details

- The `findDuplicate(occurredAt, contentHash)` method in `src/core/memory.ts` checks for existing duplicates
- Create operations are idempotent - creating the same memory twice returns the existing one
- When transcript content changes, the old memory can be deleted and a new one created with a different hash
