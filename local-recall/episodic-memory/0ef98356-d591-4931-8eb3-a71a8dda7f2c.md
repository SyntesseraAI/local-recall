---
id: 0ef98356-d591-4931-8eb3-a71a8dda7f2c
subject: >-
  Memory files use SHA-256 content_hash for deduplication across transcript
  changes
keywords:
  - deduplication
  - content_hash
  - occurred_at
  - memory
  - idempotent
  - transcript
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T15:55:36.260Z'
content_hash: 73edc8ddba17858d
---
Memory deduplication uses a two-field composite key to prevent duplicate memories:

**Deduplication Strategy**:
- `occurred_at`: ISO-8601 timestamp of when the memory event occurred
- `content_hash`: SHA-256 hash prefix (16 characters) of the memory content
- The combination of these two fields serves as a deduplication key

**Key Implementation Detail**:
- The `findDuplicate(occurredAt, contentHash)` function checks for existing memories with the same occurred_at and content_hash
- If found, the existing memory ID is returned instead of creating a new one
- This ensures the same event won't create multiple memory entries

**When Deduplication Matters**:
- When a transcript is re-processed (e.g., if the transcript file changes slightly)
- When the same development event is discussed multiple times in a session
- Helps maintain a clean, non-redundant memory index
