---
id: 6b8cbb8a-39ef-4a61-bc17-214d2af62f51
subject: Mutex lock errors occur when multiple processes load sqlite-vec concurrently
keywords:
  - sqlite-vec
  - mutex
  - concurrency
  - native extension
  - error handling
applies_to: global
occurred_at: '2025-12-03T11:21:33.144Z'
content_hash: b0622b59ebdf2b10
---
The sqlite-vec native extension can cause "mutex lock failed: Invalid argument" errors when multiple processes try to load it simultaneously. This is why the hook-daemon architecture was designed: hooks communicate with the MCP daemon via HTTP (localhost:7847) instead of loading sqlite-vec directly. The daemon owns sqlite-vec and prevents concurrent access issues. Reference: src/mcp-server/server.ts:230
