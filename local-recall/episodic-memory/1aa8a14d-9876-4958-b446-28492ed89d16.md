---
id: 1aa8a14d-9876-4958-b446-28492ed89d16
subject: Hooks execute but return empty stdout - breaks memory injection for users
keywords:
  - hooks
  - empty stdout
  - SessionStart
  - UserPromptSubmit
  - bug
  - memory injection
applies_to: global
occurred_at: '2025-12-21T18:59:30.332Z'
content_hash: c2e8d4f584714624
---
## Problem

Hooks are executing successfully but returning empty stdout, preventing memory content from being injected into Claude's context during sessions.

## Root Cause

The hooks are being invoked by Claude Code but not outputting the memory content to stdout. This is likely because:
1. Memory retrieval logic exists but isn't being called
2. Output isn't being written to stdout properly
3. Async operations may not be awaited before process exits

## Impact

Users configure hooks and see no errors, but memories don't appear in context. This creates a broken user experience where the system appears to work but provides no actual functionality.

## Solution Path

Investigate:
1. `src/hooks/session-start.ts` - Check if it's actually retrieving and outputting memories
2. `src/hooks/user-prompt-submit.ts` - Verify semantic search results are being output
3. Hook configuration in `.claude/settings.json` - Ensure paths and commands are correct
4. Add logging to see what's happening in hook execution

## Testing

Manually invoke hooks with test input to verify they output memory content to stdout before users set them up.
