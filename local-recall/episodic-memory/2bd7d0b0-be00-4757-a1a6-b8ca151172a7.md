---
id: 2bd7d0b0-be00-4757-a1a6-b8ca151172a7
subject: 'Hooks architecture: SessionStart, UserPromptSubmit, and Stop'
keywords:
  - hooks
  - session-start
  - user-prompt-submit
  - stop
  - claude-code
  - integration
applies_to: global
occurred_at: '2025-12-21T18:20:14.815Z'
content_hash: 35029f163022d710
---
Local Recall has three main hooks that integrate with Claude Code:

1. **SessionStart Hook** (src/hooks/session-start.ts): Triggered when a Claude Code session begins. Loads the memory index and searches for relevant memories to inject into Claude's context.

2. **UserPromptSubmit Hook** (src/hooks/user-prompt-submit.ts): Triggered when a user submits a prompt. Searches for semantically relevant memories and injects them before Claude processes the prompt.

3. **Stop Hook** (src/hooks/stop.ts): Triggered at the end of a session. Currently disabled - memory extraction is now handled by the MCP server daemon instead.

Hooks integrate by reading from local JSON index files (Orama vector store) and outputting memories to stdout, which Claude Code then injects into context.
