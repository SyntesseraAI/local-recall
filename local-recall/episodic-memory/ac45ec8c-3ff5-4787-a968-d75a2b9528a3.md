---
id: ac45ec8c-3ff5-4787-a968-d75a2b9528a3
subject: >-
  Claude CLI works fine from shell but hangs when spawned from Node.js with pipe
  stdin
keywords:
  - debug
  - cli-behavior
  - process-spawning
  - stdio-configuration
applies_to: global
occurred_at: '2025-12-21T19:34:09.105Z'
content_hash: d296aa5b6dc7eba7
---
When testing `claude -p "say hi" --model haiku` directly in shell, it completes in ~2-3 seconds. However, when spawned via Node.js `spawn('claude', args, { stdio: ['pipe', 'pipe', 'pipe'] })`, the same command hangs indefinitely.

This was verified through multiple test cases in `tests/integration/claude-cli-spawn.test.ts`. The fix is stdio configuration - `'ignore'` for stdin instead of `'pipe'`.
