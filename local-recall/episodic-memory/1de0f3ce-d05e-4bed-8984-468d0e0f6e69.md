---
id: 1de0f3ce-d05e-4bed-8984-468d0e0f6e69
subject: >-
  Three hooks provide Claude Code integration: SessionStart loads index,
  UserPromptSubmit searches based on prompt, Stop extracts memories from
  transcripts
keywords:
  - hooks
  - session-start
  - user-prompt-submit
  - stop hook
  - claude code integration
  - memory injection
applies_to: global
occurred_at: '2025-12-01T16:17:05.923Z'
content_hash: 6df634a86add12f6
---
Local Recall has three main hooks that integrate with Claude Code:

1. **SessionStart Hook** (`src/hooks/session-start.ts`)
   - Triggered when a Claude Code session begins
   - Loads the memory index from `local-recall/index.json`
   - Searches for relevant memories based on context (files, areas)
   - Outputs memories to stdout for injection into Claude's context
   - Shows index stats (total memories, etc.)

2. **UserPromptSubmit Hook** (`src/hooks/user-prompt-submit.ts`)
   - Triggered when a user submits a prompt, before Claude processes it
   - Extracts keywords from the prompt
   - Searches memory index for matching keywords (fuzzy matching)
   - Outputs matching memories to stdout for context injection

3. **Stop Hook** (`src/hooks/stop.ts`)
   - Currently disabled - memory extraction handled by MCP server daemon instead
   - MCP server processes transcripts asynchronously every 5 minutes
   - Allows for asynchronous memory extraction without blocking the session
