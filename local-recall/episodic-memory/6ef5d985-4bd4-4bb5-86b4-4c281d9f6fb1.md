---
id: 6ef5d985-4bd4-4bb5-86b4-4c281d9f6fb1
subject: Thinking blocks extracted with 20 parallel workers from transcripts
keywords:
  - thinking-extraction
  - parallel
  - workers
  - transcript
  - llm-api
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T19:16:47.225Z'
content_hash: 794e6b1b2bcf9ed8
---
ThinkingExtractor processes transcripts to extract Claude's thinking blocks paired with their outputs:

**Process**:
1. Reads transcript file to find all assistant messages
2. For each message with a thinking block:
   - Extracts the `<claude:thinking>` content
   - Pairs it with the text response that followed
   - Skips tool-only responses (no text output)
3. Uses 20 parallel worker processes to speed up extraction
4. Returns array of thought-output pairs

**Output format**: Each extracted item has `thinking` (the thought) and `output` (text response).

**Key detail**: Thinking blocks are ONLY extracted from assistant messages that also have text content (not pure tool responses). This ensures we capture the reasoning that led to an actual response the user saw.

**Concurrency**: 20 parallel workers means transcripts are processed in batches, improving performance on multi-core systems.
