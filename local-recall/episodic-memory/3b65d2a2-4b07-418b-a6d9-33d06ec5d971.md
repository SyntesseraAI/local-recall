---
id: 3b65d2a2-4b07-418b-a6d9-33d06ec5d971
subject: Memory extraction uses transcript processing and deduplication
keywords:
  - memory-extraction
  - transcripts
  - deduplication
  - mcp-server
  - background-daemon
  - hashing
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-01T16:15:45.848Z'
content_hash: f9a52bf13d0dfcd0
---
# Memory Extraction Process

Memory extraction is handled by the MCP server daemon which processes transcripts asynchronously.

## How It Works

1. Daemon runs every 5 minutes (background process)

2. Syncs transcripts from Claude's cache:
   - Source: `~/.claude/projects/<project>/transcripts/`
   - Format: `.jsonl` files

3. Processes each transcript using Claude Haiku (`claude -p` flag)
   - Extracts memories from conversation content
   - Condenses transcripts to key insights

4. Deduplication via content hashing:
   - Each memory stores a SHA-256 hash prefix (16 chars) of content
   - When transcripts change, old memories are deleted and recreated
   - Tracks processed transcripts with content hashes for change detection

## Why This Approach

- Asynchronous processing avoids blocking user interactions
- Deduplication prevents duplicate memories from repeated transcripts
- 5-minute interval balances responsiveness with resource usage
- Allows memories to accumulate over time for better context
