---
id: bb145396-3530-429d-906d-60cfc940285c
subject: analyzeForMemories only saves multi-line content messages
keywords:
  - memory-extraction
  - content-filtering
  - multi-line
  - analysis
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-21T18:28:33.686Z'
content_hash: bf77019177c3e6e3
---
The `analyzeForMemories` function filters messages and only saves those with multi-line content (2+ lines when split by newline). Single-line messages are skipped. This prevents trivial or incomplete responses from becoming memories.

The function correctly extracts thinking from messages and creates separate memory records for substantive responses. Tests should use multi-line content when testing memory creation.
