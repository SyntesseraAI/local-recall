---
id: 3d159d80-6556-438b-a617-8c1f3482709c
subject: Memory extraction requires understanding transcript format and content
keywords:
  - memory-extraction
  - transcript-parsing
  - claude-messages
  - content-hashing
  - deduplication
  - event-structure
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-01T16:00:43.583Z'
content_hash: 8aab273652d6cd1d
---
# Transcript Format Understanding for Memory Extraction

## Transcript Structure

Transcripts contain structured events with:
- `type`: Event type (e.g., 'message', 'tool_use', 'tool_result')
- `role`: 'user' or 'assistant'
- `content`: Message or tool data
- `timestamp`: When the event occurred

## Content Parsing Challenges

### Message Content
Messages can contain:
- Plain text
- Tool invocations (JSON formatted)
- Nested content objects with different types (text, tool_use, tool_result)

### Memory Extraction Strategy
1. Parse transcript events sequentially
2. Extract meaningful information from assistant responses
3. Identify tool usage patterns and results
4. Combine context to understand what was accomplished
5. Generate memories with appropriate keywords

## Deduplication Considerations

- Same memory shouldn't be extracted multiple times
- Use `occurred_at` timestamp and `content_hash` for deduplication
- Hash only the memory content, not metadata
- Check for existing memories before creating new ones

## Integration with Local Recall

The transcript collector/memory extraction should:
- Be triggered by the MCP server daemon
- Process new transcripts every 5 minutes
- Store memories with proper metadata
- Handle errors gracefully without stopping the daemon
