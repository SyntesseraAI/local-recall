---
id: f95833d5-da33-4180-867e-44b1b533b689
subject: >-
  Memory extraction from transcripts uses claude -p to identify keywords and
  create memory files
keywords:
  - memory-extraction
  - transcript-processing
  - keyword-extraction
  - memory-creation
  - content-hash
  - deduplication
applies_to: 'area:memory-lifecycle'
occurred_at: '2025-12-02T07:02:46.575Z'
content_hash: 1d89704d0749e5df
---
# Memory Extraction Process

## Workflow

1. **Transcript Collection**: Raw transcripts are collected from Claude's cache via `transcript-collector`
2. **Keyword Extraction**: The MCP server uses `claude -p --model haiku` to analyze the transcript and extract keywords
   - This is done via stdin (piping transcript content)
   - Returns structured keywords relevant to the conversation
3. **Memory Creation**: For significant sessions, new memory files are created with:
   - Extracted keywords
   - Subject line (brief description)
   - Full content from the transcript
   - Metadata: `occurred_at` (ISO timestamp), `content_hash` (SHA-256 prefix)
4. **Deduplication**: New memories are checked against existing ones using:
   - `occurred_at` timestamp
   - `content_hash` of the memory content
   - If a duplicate is found, the existing memory is reused

## Content Hash Purpose

- Prevents duplicate memories when transcripts are modified or re-processed
- Enables tracking which transcripts have been processed
- 16-character SHA-256 prefix is sufficient for deduplication

## Transcript Processing

- MCP server processes transcripts asynchronously (every 5 minutes)
- Only new/modified transcripts are re-processed
- Deleted transcripts can trigger memory deletion if they're the only source
