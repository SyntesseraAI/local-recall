---
id: 955caccd-721f-4970-a355-ea7ca3d5a939
subject: >-
  TypeScript regex capture group safety: use optional chaining for defensive
  access
keywords:
  - typescript
  - regex
  - capture-group
  - optional-chaining
  - defensive-programming
  - undefined-check
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T18:58:55.753Z'
content_hash: 495957ff9d635fbd
---
When accessing regex capture groups in TypeScript, always use optional chaining (`match?.[1]`) rather than direct indexing (`match[1]`). Even when the regex match is truthy, capture groups can be undefined if the group didn't participate in the match. This was discovered when fixing a TS2532 error on line 211 of memory-extractor.ts where `codeBlockMatch[1]` was accessed without checking if the capture group actually matched. The fix uses `codeBlockMatch?.[1]?.trim()` to safely handle both the match being null/undefined and the capture group being undefined.
