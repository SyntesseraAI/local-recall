---
id: 98e354b8-f64d-44de-8357-5a6ff52d4b48
subject: User-prompt-submit hook has unhandled AbortError from spawn timeout
keywords:
  - spawn
  - timeout
  - aborterror
  - child process
  - user-prompt-submit
  - bug
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T18:27:26.099Z'
content_hash: 976f3562f74c0016
---
The `callClaudeForKeywords` function in user-prompt-submit.ts had an unhandled AbortError caused by Node.js's built-in `spawn` timeout option. When the timeout fires, Node.js aborts the child process and throws an AbortError that wasn't being caught, causing unhandled promise rejections. The timeout option should be removed from spawn calls and instead handled with a manual timeout wrapper using Promise.race() with setTimeout.
