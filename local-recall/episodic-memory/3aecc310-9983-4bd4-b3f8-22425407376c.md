---
id: 3aecc310-9983-4bd4-b3f8-22425407376c
subject: >-
  transcript-collector.ts processes transcripts from Claude and extracts
  memories via MCP calls
keywords:
  - transcript-collector
  - mcp
  - memory-extraction
  - transcript-processing
  - claude-api
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:12:52.887Z'
content_hash: 32c92947c7435ce6
---
# Transcript Collector Architecture

The `transcript-collector.ts` module handles processing of Claude Code transcripts and extracting memories.

## Key Responsibility

The transcript collector:
1. Locates and reads transcript files from `~/.claude/projects/`
2. Parses JSONL format transcripts
3. Extracts meaningful memories from the transcript content
4. Creates memory records via the MCP server's `memory_create` tool

## Integration

The collector integrates with:
- **Transcript Storage**: Reads from `~/.claude/projects/<project>/transcripts/`
- **MCP Server**: Uses `memory_create` tool to persist extracted memories
- **Memory System**: Creates memory records with proper metadata (id, subject, keywords, applies_to, occurred_at, content_hash)

## Usage Pattern

The transcript collector is typically invoked:
- By the MCP server background daemon (processes transcripts every 5 minutes)
- During the Stop hook (when a Claude Code session ends)
- Manually via the `index_rebuild` tool with transcript processing

## Important Notes

- Transcript files contain sensitive session information and project context
- The collector must filter transcripts to extract only relevant, persistent memories
- Content hashing is used to detect duplicate memories from the same transcript
