---
id: 755c1afb-e1c6-4169-b89e-dcbe9c458cd7
subject: >-
  Claude CLI keyword extraction in user-prompt-submit hook uses -p flag for
  piped input
keywords:
  - claude cli
  - keyword extraction
  - pipe input
  - '-p flag'
  - prompt submission
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T16:39:25.462Z'
content_hash: 350add106ea8424d
---
The user-prompt-submit hook uses Claude CLI with the `-p` flag to extract keywords from user prompts. The process:

1. User submits a prompt to Claude Code
2. Hook spawns `claude -p` subprocess with the user prompt piped to stdin
3. Claude extracts keywords from the prompt text
4. Keywords are used for semantic search in the vector store

This allows dynamic keyword generation without hardcoding, but requires proper error handling for subprocess timeouts.
