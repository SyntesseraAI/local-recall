---
id: 4f527a56-902a-4553-918d-c84963bd942d
subject: Memory extraction uses structured prompt with careful field validation
keywords:
  - prompt engineering
  - field validation
  - markdown frontmatter
  - memory format
applies_to: 'file:src/prompts/memory-extraction.ts'
occurred_at: '2025-12-01T16:30:58.719Z'
content_hash: 08e6f810d7b0fd76
---
The memory extraction prompt in `src/prompts/memory-extraction.ts` includes careful validation of extracted memory fields:

- `id`: Must be a valid UUID
- `subject`: Must be brief (< 200 chars) and descriptive
- `keywords`: Array of 1-10 lowercase keywords without spaces
- `applies_to`: Must be one of: `global`, `file:<path>`, or `area:<name>`
- `occurred_at`: Must be ISO-8601 timestamp
- `content_hash`: SHA-256 hash prefix (16 chars)

The prompt explicitly instructs Claude to only extract memories about:
- Architectural decisions and reasoning
- Bug fixes and root cause analysis
- Code patterns or conventions
- Configuration quirks
- User preferences
- Component relationships
- Performance optimizations

And to avoid extracting:
- Generic programming knowledge
- Temporary debugging steps
- Obvious/trivial information
- Sensitive data
- Quickly-outdated information
