---
id: 289e906b-99bd-4bf6-ad1a-30406e35cf30
subject: >-
  Local Recall MCP server background daemon processes transcripts every 5
  minutes
keywords:
  - mcp-server
  - background-daemon
  - transcript-processing
  - memory-extraction
  - interval
  - async
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T15:58:48.359Z'
content_hash: 19947b931d54fa23
---
# MCP Server Background Daemon

## Transcript Processing Loop

The Local Recall MCP server includes a background daemon that:

1. Runs on a 5-minute interval (`setInterval` with 300000ms)
2. Syncs transcripts from Claude's cache directory (`~/.claude/projects/<project>/transcripts/`)
3. For each new or modified transcript:
   - Computes content hash to detect changes
   - Uses transcript collector to parse JSONL events
   - Extracts memories using Claude Haiku (`claude -p --model haiku`)
   - Compares content hash with stored hash to avoid duplicates
   - Creates new memories or updates existing ones
4. Tracks processed transcripts with their content hashes for change detection

## Location in Codebase

This daemon is part of the MCP server implementation, likely in `src/mcp-server/server.ts` or a related file.

## Current Status

The background daemon is the primary mechanism for memory extraction, as the Stop hook is currently disabled.
