---
id: 597c4c4e-d83a-45a6-bd0e-35b927bcebc6
subject: >-
  transcript-collector.ts needs to implement transcriptFilePath as async
  generator for iterating transcripts
keywords:
  - transcript-collector
  - async-generator
  - jsonl
  - file-iteration
  - project-path
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:26:20.140Z'
content_hash: 99763f246031473b
---
# TranscriptFilePath Implementation

The `transcriptFilePath` function in `src/core/transcript-collector.ts` needs to be an async generator that yields file paths to transcript `.jsonl` files.

## Requirements

1. **Input**: Takes a project directory path (e.g., `/Users/joe/Code/Syntessera/local-recall`)
2. **Output**: Yields full paths to `.jsonl` transcript files
3. **Logic**:
   - URL-encode the project path (replace `/` with `%2F`)
   - Look for transcripts at `~/.claude/projects/{encoded-path}/transcripts/`
   - Read all `.jsonl` files from that directory
   - Yield each file path

## Implementation Notes

- Use `fs.promises` for async file operations
- Handle case where transcripts directory doesn't exist (no yield)
- Use async generator function syntax: `async function* transcriptFilePath(projectDir)`
- Parse the project path correctly for encoding (handle leading slash if present)

## Related Functions

- Needs to work with `readTranscripts()` which will parse the yielded `.jsonl` files
- Called by the MCP server daemon to find transcripts to process
