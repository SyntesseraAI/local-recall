---
id: 954994e9-7fd3-43a4-9816-4b12b0cd5320
subject: Memory extraction process uses claude -p with transcript content
keywords:
  - claude
  - memory-extraction
  - transcript
  - subprocess
  - api
  - haiku
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T15:54:22.827Z'
content_hash: 44a84a6043012f54
---
# Memory Extraction via Claude API

The MCP server's background daemon extracts memories by invoking `claude -p` with transcript content as input.

## Process

1. Read transcript JSONL files from `~/.claude/projects/<project>/transcripts/`
2. Parse each transcript into events
3. Call `claude -p` (Haiku model) with the transcript content
4. Claude extracts structured memories from the transcript
5. Parse the response and create memory files

## Key Details

- Uses the `claude` CLI command available in PATH
- Haiku model is selected for cost efficiency
- Transcript content is passed via stdin to `claude -p`
- The `-p` flag indicates prompt input mode
- Response includes structured memory data ready for storage

## Integration

This is part of the asynchronous transcript processing in the MCP server daemon (runs every 5 minutes).
