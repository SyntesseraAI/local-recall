---
id: bd3852e1-efbb-4703-a4df-5dedd3e3c071
subject: Similarity scores rounded to 2 decimals with recency tie-breaker
keywords:
  - scoring
  - vector-search
  - similarity
  - ranking
  - recency
applies_to: 'area:vector-store'
occurred_at: '2025-12-21T19:44:41.483Z'
content_hash: 7a402921b7faa2dd
---
Vector search results now use **rounded cosine distance similarity** with recency as a secondary sort:

- **Scoring**: Scores are calculated as `Math.round((1 - distance / 2) * 100) / 100` resulting in values 0.00 to 1.00 rounded to 2 decimal places (e.g., 0.65 instead of 0.6523)
- **Primary Sort**: By similarity score descending (most similar first)
- **Secondary Sort**: When scores are equal, sorted by `occurred_at` descending (most recent first)

This ensures consistent, readable score display and prevents older memories from appearing before newer ones when similarity scores are equivalent. Implemented in `src/core/vector-store.ts:258-268`.
