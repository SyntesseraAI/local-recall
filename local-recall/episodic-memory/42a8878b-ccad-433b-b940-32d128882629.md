---
id: 42a8878b-ccad-433b-b940-32d128882629
subject: >-
  Memory extraction prompt starts with [LOCAL_RECALL_INTERNAL] prefix for hook
  filtering
keywords:
  - memory extraction
  - prompt prefix
  - hook filtering
  - local recall internal
applies_to: 'file:src/prompts/memory-extraction.ts'
occurred_at: '2025-12-03T09:48:52.171Z'
content_hash: ae4af993508c2f3f
---
The `buildMemoryExtractionPrompt` function was updated to prepend `[LOCAL_RECALL_INTERNAL]` to the memory extraction prompt (line 62-63). This prefix signals to the UserPromptSubmit hook (at `src/hooks/user-prompt-submit.ts:161`) that the prompt is internal and should skip processing, preventing the MCP daemon from triggering memory extraction recursion when calling `claude -p`.
