---
id: d938d3c0-06c9-401b-8b47-e50de263311e
subject: Memory extraction prompt structure drives consistency of extracted memories
keywords:
  - prompt-engineering
  - memory-extraction
  - json-schema
  - consistency
applies_to: 'file:src/prompts/memory-extraction.ts'
occurred_at: '2025-12-02T07:08:03.673Z'
content_hash: 0f9610b58866a85b
---
The memory extraction system relies on a carefully structured prompt that guides Claude's output format. This prompt:

- Defines the expected memory structure (subject, keywords, applies_to, content)
- Instructs Claude on when to extract memories vs skip irrelevant content
- Specifies JSON output format for reliable parsing
- Includes guidelines for memory scope (global vs file vs area)

The quality and consistency of extracted memories depends heavily on this prompt configuration. Any changes to memory schema should be reflected in the prompt template.
