---
id: 9ce613e8-f479-4667-a928-279ecfcc76ce
subject: Claude Code hooks for session management and memory retrieval
keywords:
  - hooks
  - session start
  - user prompt submit
  - stop hook
  - context injection
applies_to: global
occurred_at: '2025-12-02T16:35:44.694Z'
content_hash: 472a48546bdd4e65
---
Local Recall integrates with Claude Code via three hooks configured in `.claude/settings.json`:

1. **SessionStart Hook**: Triggered when session begins. Loads 5 most recent memories and injects them into context (sorted by `occurred_at`). Does NOT use vector store to avoid slow initialization.

2. **UserPromptSubmit Hook**: Triggered before Claude processes a user prompt. Initializes vector store (lazy init, cached) and performs semantic search to inject matching memories into context.

3. **Stop Hook**: Currently disabled. Memory extraction is handled by MCP server daemon running asynchronously every 5 minutes.

Hooks are shell commands receiving JSON via stdin and outputting memory content to stdout for context injection.
