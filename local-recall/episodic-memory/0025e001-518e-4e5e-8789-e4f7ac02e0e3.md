---
id: 0025e001-518e-4e5e-8789-e4f7ac02e0e3
subject: VectorStore singleton needs reset method for test isolation
keywords:
  - vector-store
  - singleton
  - testing
  - test-isolation
  - memory-leaks
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-21T19:15:15.466Z'
content_hash: d63df2b378729a3c
---
The VectorStore uses a singleton pattern with module-level state. Integration tests that use different memory directories need a way to reset this state between tests. Added an internal `_reset()` function for testing that clears the singleton instance, allowing tests to initialize fresh vector stores with different database paths.
