---
id: 2190a7f6-dada-4ae3-8639-6394369a1c66
subject: Memory deduplication uses occurred_at timestamp and content_hash
keywords:
  - deduplication
  - memory-storage
  - content-hash
  - occurred-at
  - duplicate-detection
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T01:28:45.577Z'
content_hash: 4c7d690110eefa29
---
# Memory Deduplication Strategy

Memories are deduplicated using a combination of:

1. **occurred_at**: ISO-8601 timestamp of when the original event occurred
2. **content_hash**: SHA-256 hash prefix (16 chars) of the memory content

## Deduplication Logic

Before creating a new memory:
1. Extract occurred_at and content_hash from the memory metadata
2. Call `findDuplicate(occurredAt, contentHash)` to check if it exists
3. Return existing memory if duplicate found
4. Create new memory if no duplicate exists

This approach ensures idempotent memory creation - running the same extraction process multiple times won't create duplicate memories.

## Related
- Memory deduplication prevents transcript processing from creating duplicate memories
- Refer to recent commits: `c04f18b Remove created_at field and sort search results by occurred_at`
