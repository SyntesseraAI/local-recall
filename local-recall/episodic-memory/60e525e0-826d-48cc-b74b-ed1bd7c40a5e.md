---
id: 60e525e0-826d-48cc-b74b-ed1bd7c40a5e
subject: >-
  Memory extraction from transcripts requires semantic understanding, not just
  keyword matching
keywords:
  - memory-extraction
  - semantic
  - transcript-analysis
  - claude-api
  - transcript-condensing
  - event-parsing
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-01T21:34:28.291Z'
content_hash: 41ff1c6d6034df3e
---
# Memory Extraction Architecture

## Problem

Direct keyword extraction from raw transcripts produces low-quality, fragmented memories. The system needs to understand *what was done* and *why it matters* to create useful memories for future sessions.

## Solution

Use Claude API (via `claude -p` CLI) to:
1. **Condense transcripts** - Convert raw JSONL events into high-level event summaries
2. **Extract semantic memories** - Ask Claude to identify important learnings, decisions, and solutions
3. **Generate metadata** - Claude suggests keywords, scope (global/file/area), and applies_to values

## Implementation Details

- `src/core/memory-extractor.ts` orchestrates the extraction process
- `src/utils/transcript.ts` handles transcript parsing from JSONL
- Condensed format: `[User] prompt | [Assistant] response | [Tool] action | [Result] outcome`
- Claude processes the condensed transcript with a carefully crafted system prompt

## Benefits

- Memories focus on *outcomes* not *steps*
- Better keyword selection from semantic analysis
- Appropriate scope determination
- Deduplication based on content hash
- Handles complex multi-step debugging sessions
