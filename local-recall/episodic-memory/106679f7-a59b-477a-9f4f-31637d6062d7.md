---
id: 106679f7-a59b-477a-9f4f-31637d6062d7
subject: Memory extraction field name normalization for Claude response handling
keywords:
  - memory-extractor
  - field-normalization
  - claude-response
  - zod-validation
  - error-handling
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T18:19:06.772Z'
content_hash: cd3ed1983c25e9bc
---
Claude models may return memory objects with alternative field names (e.g., 'description' instead of 'subject', 'tags' instead of 'keywords'). Added field name normalization function at lines 179-186 to map common variations to expected schema fields:

- 'description' → 'subject'
- 'summary' → 'subject'
- 'tags' → 'keywords'
- 'scope' → 'applies_to'
- 'text' → 'content'
- 'body' → 'content'

This normalization is applied to both direct arrays and memories nested in wrapper objects. Prevents Zod validation failures when Claude uses non-standard field names while maintaining backward compatibility with standard format.
