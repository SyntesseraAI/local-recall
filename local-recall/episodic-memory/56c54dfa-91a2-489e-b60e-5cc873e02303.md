---
id: 56c54dfa-91a2-489e-b60e-5cc873e02303
subject: UserPromptSubmit hook uses lazy-initialized vector store for semantic search
keywords:
  - hooks
  - user-prompt-submit
  - semantic-search
  - vector-store
  - lazy-init
applies_to: 'area:hooks'
occurred_at: '2025-12-02T16:26:42.314Z'
content_hash: fe5b702e65b4b013
---
The UserPromptSubmit hook:
1. Triggers when user submits a prompt, before Claude processes it
2. Initializes the vector store (lazy initialization, cached after first use)
3. Performs semantic search using vector embeddings on the user's prompt
4. Outputs matching memories to stdout (injected into Claude's context)

Lazy initialization ensures vector store overhead only happens once, improving prompt submission latency.
