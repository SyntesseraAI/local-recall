---
id: f47d5efa-b734-4c49-8fa7-cd6d1d69b94a
subject: >-
  Memory extraction moved from Stop hook to MCP server background daemon running
  every 5 minutes
keywords:
  - memory extraction
  - mcp server
  - background daemon
  - transcript processing
  - stop hook
  - async
applies_to: global
occurred_at: '2025-12-01T21:46:02.484Z'
content_hash: 56a203813c9bd3c4
---
The project recently transitioned from extracting memories synchronously in the Stop hook to using an asynchronous MCP server daemon that processes transcripts every 5 minutes.

**Key points**:
- Stop hook is now disabled (memory extraction happens in MCP server instead)
- MCP server runs a background daemon that syncs transcripts from Claude's cache
- Daemon processes transcripts using `claude -p` to extract memories
- Tracks processed transcripts with content hashes for change detection
- Deletes and recreates memories when transcripts change
- Runs every 5 minutes

**Benefits**: Async processing reduces latency for the user's Claude session and allows transcript reprocessing if memories need to be regenerated.
