---
id: 2de4f45a-93b7-4439-aa9d-552154b77fb3
subject: Memory creation pipeline requires Stop hook or MCP daemon
keywords:
  - memory creation
  - stop hook
  - mcp server
  - transcript parsing
  - daemon
  - async processing
applies_to: global
occurred_at: '2025-12-03T09:51:20.667Z'
content_hash: 078f847002336d24
---
Memories are created through two mechanisms:

1. **Stop Hook** (synchronous): Parses transcript on session end and creates memories immediately via `src/hooks/stop.ts`
2. **MCP Daemon** (asynchronous): Background process that syncs transcripts from Claude cache and processes them every 5 minutes

The MCP daemon is more reliable across different Claude Code environments since it doesn't depend on hook support. It handles transcript detection via content hashing and processes using `claude -p` for extraction.
