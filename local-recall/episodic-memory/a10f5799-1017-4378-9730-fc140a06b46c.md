---
id: a10f5799-1017-4378-9730-fc140a06b46c
subject: Memory extraction uses Claude API with streaming and transcript condensing
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - transcript-condensing
  - extraction-prompt
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:26:33.947Z'
content_hash: 8e85ca7804ae0b2b
---
The memory extraction system in `memory-extractor.ts` uses the Claude API (via `anthropic` client) to analyze transcripts and extract valuable memories. Key implementation details:

- Uses `claude-3-5-sonnet-20241022` model for memory extraction
- Implements streaming responses for efficient processing
- Supports transcript condensing to reduce token usage
- Extracts memories based on structured prompts defined in `src/prompts/memory-extraction.ts`
- Returns memories as JSON objects with fields: subject, keywords, applies_to, content
- Error handling for API failures and validation of extraction results

The system integrates with the memory creation pipeline to persist extracted memories to disk.
