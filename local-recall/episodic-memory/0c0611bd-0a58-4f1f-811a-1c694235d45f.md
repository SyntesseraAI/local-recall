---
id: 0c0611bd-0a58-4f1f-811a-1c694235d45f
subject: >-
  Local-recall transcript processing uses Claude Haiku to extract memories via
  MCP
keywords:
  - memory
  - extraction
  - claude-haiku
  - mcp
  - daemon
  - background
  - processing
applies_to: global
occurred_at: '2025-12-01T16:09:38.932Z'
content_hash: fc23472142433aef
---
# Memory Extraction Process

Local-recall extracts memories from session transcripts using Claude Haiku (the smallest/fastest Claude model) through the MCP server.

## Architecture

1. **Async Processing** - Memories are extracted asynchronously by an MCP server daemon
2. **Periodic Runs** - The daemon runs every 5 minutes to process new/updated transcripts
3. **Idempotent** - Uses content hashes to detect changes and avoid reprocessing unchanged transcripts
4. **Deduplication** - Checks `occurred_at` timestamp and content hash to prevent duplicate memories

## Why Haiku?

Claude Haiku is used because:
- Fast execution (quick processing of many transcripts)
- Lower cost (economical for frequent background processing)
- Sufficient capability for extracting key facts and decisions from transcripts
- Designed for smaller, focused tasks

## Process

1. Scan transcripts from `~/.claude/projects/<project>/transcripts/`
2. For new/modified transcripts: call Claude Haiku to extract memories
3. Create memory files with extracted content
4. Track transcript hash to know when it's been processed
5. On transcript update: delete old memories and create new ones
