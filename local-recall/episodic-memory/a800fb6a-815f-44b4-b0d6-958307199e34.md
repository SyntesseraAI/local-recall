---
id: a800fb6a-815f-44b4-b0d6-958307199e34
subject: Transcript collector synchronization strategy and file handling
keywords:
  - transcript
  - sync
  - collector
  - jsonl
  - deduplication
  - content-hash
  - tracking
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-02T06:39:05.070Z'
content_hash: 0a67c20814ff03fa
---
# Transcript Collector Implementation Strategy

## File Synchronization Approach

The transcript collector should track processed transcripts to avoid reprocessing:

1. **Deduplication Mechanism**: Use content hash (SHA-256 prefix) to detect when a transcript has changed
2. **Tracking File**: Store processed transcript metadata in a tracking file that records:
   - Transcript filename
   - Content hash (to detect changes)
   - Timestamp of when it was processed

3. **Processing Logic**:
   - When syncing, compare current content hash against tracked hash
   - If hash matches: skip (no changes)
   - If hash differs or transcript is new: reprocess and update tracking
   - Delete associated memories if transcript is removed

## JSONL File Format

Transcripts use JSONL format where each line is a complete JSON event. When reading:
- Parse line-by-line with `split('\n').filter(line => line.trim()).map(JSON.parse)`
- This handles edge cases like trailing newlines or incomplete final lines

## Integration with Memory Extraction

Once a transcript is synced and processed for memory extraction, the transcript collector becomes the canonical source of truth for which memories exist (allowing deletion of stale memories when transcripts change).
