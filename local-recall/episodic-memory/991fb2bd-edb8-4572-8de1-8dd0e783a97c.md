---
id: 991fb2bd-edb8-4572-8de1-8dd0e783a97c
subject: TypeScript regex capture group safety check with optional chaining
keywords:
  - typescript
  - regex
  - optional chaining
  - capture groups
  - undefined check
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T19:02:42.674Z'
content_hash: c629aea32bb59d15
---
When using regex capture groups in TypeScript, checking if the match exists is not sufficient to access capture groups safely. Even when `codeBlockMatch` is truthy, `codeBlockMatch[1]` can be undefined if the capture group didn't match.

Fix: Use optional chaining `codeBlockMatch?.[1]` to safely access capture groups. This handles both cases:
- Match doesn't exist (optional chaining returns undefined)
- Match exists but capture group is undefined (optional chaining returns undefined)

Location: src/core/memory-extractor.ts:211 in `stripMarkdownCodeBlocks()` method
