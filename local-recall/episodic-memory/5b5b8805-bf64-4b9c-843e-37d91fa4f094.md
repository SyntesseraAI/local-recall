---
id: 5b5b8805-bf64-4b9c-843e-37d91fa4f094
subject: Stop hook no longer uses time window filter for memory extraction
keywords:
  - stop hook
  - time window
  - transcript processing
  - memory extraction
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-01T22:33:56.355Z'
content_hash: 28bdb93de6deb3e2
---
The stop hook was processing only messages within a configurable time window (default 30 seconds). This caused messages to be filtered out by the time the hook executed. The implementation was changed to process the entire transcript history instead. Deduplication via `occurred_at` + `content_hash` prevents duplicate memories from being created when the same transcript is processed multiple times.
