---
id: 600b8af7-9dc3-4da6-8e76-2df2fd50d377
subject: Memory extraction system has infinite recursion bug with nested transcripts
keywords:
  - memory extraction
  - recursion
  - bug
  - transcript processing
  - infinite loop
  - local-recall-internal
applies_to: global
occurred_at: '2025-12-01T16:27:32.674Z'
content_hash: 350511e06f88dfb3
---
The memory extraction system (Stop hook / MCP daemon) has a critical bug where it processes transcripts containing its own `[LOCAL_RECALL_INTERNAL]` memory extraction prompts, creating a recursion/infinite loop. Each iteration nests the previous transcript deeper, causing exponential growth.

**Root Cause:** The transcript processing doesn't filter out internal memory extraction prompts before analyzing content for memories.

**Impact:** Transcripts grow unboundedly, memories become polluted with nested extraction prompts, and the system becomes progressively slower.

**Solution:** Filter out `[LOCAL_RECALL_INTERNAL]` sections from transcripts before processing them for memory extraction. These internal prompts should not be included in the transcript content sent to Claude for analysis.
