---
id: 0c2c3e03-501d-40b4-9bdc-f4f4e4f204cc
subject: 'Memory extraction is handled by MCP server daemon, not Stop hook'
keywords:
  - memory-extraction
  - mcp-server
  - daemon
  - transcript-processing
  - stop-hook
applies_to: global
occurred_at: '2025-12-02T07:45:18.872Z'
content_hash: 73c8e6d10eedaa6c
---
# Memory Extraction Approach

The Stop hook is currently disabled in favor of an asynchronous MCP server daemon approach.

## Why This Design

- Stop hooks have timing constraints and may not complete before Claude's session ends
- The MCP server daemon provides more reliable, continuous transcript processing
- Allows for better error handling and retry logic

## How It Works

1. MCP server runs a background daemon that processes transcripts every 5 minutes
2. Syncs transcripts from Claude's cache (`~/.claude/projects/<project>/transcripts/`)
3. Extracts memories asynchronously using claude binary (`claude -p`)
4. Tracks processed transcripts with content hashes for change detection
5. Deletes and recreates memories when transcripts change

This is documented in CLAUDE.md under "Stop Hook (Disabled)" section.
