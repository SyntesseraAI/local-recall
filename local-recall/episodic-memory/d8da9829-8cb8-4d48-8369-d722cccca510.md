---
id: d8da9829-8cb8-4d48-8369-d722cccca510
subject: Sqlite-vec mutex lock error from concurrent loading in multiple processes
keywords:
  - sqlite-vec
  - mutex
  - concurrent
  - lock
  - error
  - c++
applies_to: global
occurred_at: '2025-12-21T18:16:42.322Z'
content_hash: 56faefb2b1111ded
---
The `sqlite-vec.load(db)` call fails with mutex lock errors when called from multiple processes simultaneously. This is a C++ runtime error that's hard to catch in JavaScript. Solution: Implement file-based locking mechanism in database initialization to prevent concurrent access. Use a lock file (`db-lock.tmp`) with timeout-based stale lock detection (3 seconds) to serialize database access across hook processes.
