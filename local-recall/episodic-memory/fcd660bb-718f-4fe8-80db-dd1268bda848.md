---
id: fcd660bb-718f-4fe8-80db-dd1268bda848
subject: Memory deduplication uses occurred_at timestamp and content hash
keywords:
  - deduplication
  - duplicate-detection
  - content-hash
  - occurred-at
  - idempotent
applies_to: global
occurred_at: '2025-12-21T19:22:52.588Z'
content_hash: f99fdb425a85298f
---
Memory creation is idempotent using a two-part duplicate detection system:
1. **occurred_at**: ISO-8601 timestamp of when the original event occurred (not creation time)
2. **content_hash**: SHA-256 hash prefix (16 characters) of the memory content

When creating a new memory, the system checks if a memory with the same `occurred_at` and `content_hash` already exists. If found, returns the existing memory instead of creating a duplicate. This allows safe re-processing of transcripts without creating duplicate memories.

See `findDuplicate()` in `src/core/memory.ts`.
