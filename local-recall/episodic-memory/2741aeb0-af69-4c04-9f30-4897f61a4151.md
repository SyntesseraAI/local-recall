---
id: 2741aeb0-af69-4c04-9f30-4897f61a4151
subject: >-
  Hooks now unified - single user-prompt-submit handles episodic and thinking
  memories
keywords:
  - hooks
  - user-prompt-submit
  - episodic
  - thinking
  - unified
  - configuration
applies_to: 'area:hooks'
occurred_at: '2025-12-21T18:27:24.119Z'
content_hash: 4b7b39a55a161272
---
The UserPromptSubmit hook is now unified and handles both episodic and thinking memory retrieval based on configuration flags:

- `episodicEnabled` / `episodicMaxTokens` / `episodicMinSimilarity` - controls episodic memory injection
- `thinkingEnabled` / `thinkingMaxTokens` / `thinkingMinSimilarity` - controls thinking memory injection

Both use Orama for vector search and Ollama for embeddings. The single hook skips internal prompts (those containing `[LOCAL_RECALL_INTERNAL]`) to avoid recursive memory extraction.

This replaces the previous approach of having separate hooks for each memory type.
