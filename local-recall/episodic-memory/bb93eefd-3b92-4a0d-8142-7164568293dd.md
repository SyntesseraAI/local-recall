---
id: bb93eefd-3b92-4a0d-8142-7164568293dd
subject: Memory extraction uses Claude API with streaming and token counting
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - token-counting
  - transcript-processing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:03:56.575Z'
content_hash: 360bca58405d6463
---
The memory extraction system in `memory-extractor.ts` uses the Anthropic Claude API to process transcripts. Key implementation details:

- Uses `Anthropic` client initialized with API key from environment
- Employs streaming via `stream()` method for real-time token processing
- Implements token counting with `countTokens()` to track usage
- Processes transcript content through a structured extraction prompt
- Returns extracted memories as JSON-parsed objects
- Handles API responses asynchronously with proper error handling

The system is designed to be memory-efficient and provide feedback during processing.
