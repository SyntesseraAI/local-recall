---
id: 80564953-8ba3-466f-b23e-82d0f182ec6c
subject: >-
  Transcript collector implementation requires proper path handling and cache
  discovery
keywords:
  - transcript-collector
  - cache-path
  - jsonl
  - file-sync
  - memory-extraction
  - transcript-processing
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-02T02:19:19.150Z'
content_hash: 70daffa0972861cd
---
# Transcript Collector Implementation Details

The transcript collector needs to:

1. Discover Claude's project cache directory at `~/.claude/projects/`
2. Find the correct project folder based on the current working directory (cwd)
3. Access transcript files in the `transcripts/` subdirectory
4. Parse `.jsonl` files where each line is a JSON object
5. Track processed transcripts using content hashes to detect changes
6. Extract memories from new or modified transcripts

## Key Implementation Considerations

- Must handle macOS path format (`~/.claude/`)
- Project folder naming uses absolute path with slashes replaced by underscores
- JSONL parsing requires line-by-line reading and JSON.parse() for each line
- Content hashing allows detection of transcript modifications for re-processing
- Files should be read asynchronously to avoid blocking

## Integration with MCP Server

The MCP server daemon calls the transcript collector every 5 minutes to process new/modified transcripts and extract memories.
