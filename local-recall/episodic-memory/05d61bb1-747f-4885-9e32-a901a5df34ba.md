---
id: 05d61bb1-747f-4885-9e32-a901a5df34ba
subject: >-
  HTTP daemon architecture prevents concurrent ONNX loading by centralizing
  model initialization
keywords:
  - daemon
  - http
  - architecture
  - embedding
  - concurrency
  - singleton
  - onnx
applies_to: global
occurred_at: '2025-12-03T11:35:39.170Z'
content_hash: 2398684552eaee11
---
The solution is to run embeddings in a single shared daemon process that all Claude instances communicate with via HTTP. ONNX loads once (no mutex conflict), then multiple processes safely call the HTTP API. Ollama is the recommended approach - it's a standalone embedding server that users can install separately and scales naturally to multiple Claude instances. This avoids the problem of having multiple ONNX instances load concurrently.
