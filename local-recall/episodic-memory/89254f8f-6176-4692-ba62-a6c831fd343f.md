---
id: 89254f8f-6176-4692-ba62-a6c831fd343f
subject: >-
  Thinking blocks have 'thinking' property, not 'text' - was causing content
  loss
keywords:
  - thinking
  - blocks
  - content
  - extraction
  - bug
  - memory
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-21T18:26:21.981Z'
content_hash: 0da6d9182aa8ba41
---
Thinking content blocks have structure `{type: 'thinking', thinking: string}`, NOT `{type: 'thinking', text: string}`. The old code in `stop.ts` was checking `c.text` on thinking blocks, which was undefined, causing all thinking content to be dropped. Use `extractThinkingFromBlocks()` utility which correctly filters for `block.type === 'thinking'` and accesses `block.thinking`.
