---
id: 87d8f56a-a133-48f6-956c-8a78b5b53d2a
subject: >-
  User prefers idempotent memory operations - no update operations, only
  create/delete
keywords:
  - memory
  - idempotent
  - crud
  - create
  - delete
  - deduplication
  - design-decision
applies_to: 'area:memory-management'
occurred_at: '2025-12-01T16:00:07.693Z'
content_hash: 771bf9fb516cff45
---
# Idempotent Memory Operations Design

The memory system uses CRD (Create, Read, Delete) operations, intentionally excluding Update to maintain idempotence.

## Design Rationale

- Memories are created based on transcript content
- Deduplication is handled through `occurred_at` and `content_hash` fields
- If a transcript is reprocessed, existing memories are deleted and recreated
- This prevents complex merge conflicts and versioning issues

## Implementation

- `createMemory(data)` returns existing memory if duplicate detected
- `findDuplicate(occurredAt, contentHash)` checks for existing memories
- No `updateMemory()` function exists by design

## Benefits

- Simpler mental model - memories are immutable
- Easy to understand history - each memory represents a point-in-time fact
- Change tracking is handled by deletion + recreation
- Works well with git version control of memory files
