---
id: 29782adb-2fce-4924-a295-1ccef3ea0e3c
subject: >-
  Migration must preserve all memory metadata and handle edge cases during
  transition
keywords:
  - migration
  - data preservation
  - edge cases
  - backward compatibility
applies_to: global
occurred_at: '2025-12-21T17:34:47.718Z'
content_hash: 001c91433e0d1fdb
---
During the migration from individual markdown files to JSONL format:

1. **Metadata preservation** - All fields must be preserved: id, subject, keywords, applies_to, occurred_at, content_hash, content
2. **Embedding handling** - Existing embeddings from orama-episodic-index.json and orama-thinking-index.json must be extracted and embedded in JSONL entries
3. **Deletion record** - After migration, all old markdown files must be deleted and "delete" entries may be added to JSONL for historical tracking
4. **Vector index transition** - Orama indexes should be rebuilt from the JSONL files rather than maintained separately
5. **Idempotency** - Migration should be safe to run multiple times and detect if already completed
