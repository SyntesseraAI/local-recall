---
id: 595a334d-28af-431c-9f07-1f564cc0c561
subject: UserPromptSubmit hook performs semantic search on each user prompt
keywords:
  - hooks
  - user-prompt-submit
  - semantic-search
  - vector-store
applies_to: global
occurred_at: '2025-12-02T12:02:18.047Z'
content_hash: 61439da256fdbcb7
---
UserPromptSubmit hook triggers when user submits a prompt, before Claude processes it:
1. Receives JSON with `session_id`, `transcript_path`, `cwd`, `prompt`
2. Lazy initializes vector store (cached after first use)
3. Performs semantic search using vector embeddings on the prompt
4. Outputs matching memories to stdout for context injection

This allows relevant memories to be injected into Claude's context based on the specific user prompt.
