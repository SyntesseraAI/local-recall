---
id: 3a63e49a-71ad-4d4b-aecc-2aa6188ab81a
subject: Improved error handling in UserPromptSubmit hook with stack traces and timing
keywords:
  - hook
  - error handling
  - logging
  - user-prompt-submit
  - stack trace
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T18:18:36.755Z'
content_hash: 7ffd2c3a4c692726
---
Enhanced the UserPromptSubmit hook with better error handling and logging:
- Wraps main function in try-catch with comprehensive error logging
- Logs timing for episodic and thinking memory searches separately
- Includes stack traces for debugging
- Tracks token usage and memory counts
- Better error context helps identify where failures occur in the search pipeline
