---
id: d2d60167-c1fd-4df8-8c4e-4568c86a1ddd
subject: >-
  Memory extraction uses Claude Haiku with system prompt and transcript
  condensing
keywords:
  - memory-extractor
  - claude-haiku
  - transcript-condensing
  - memory-extraction
  - llm-based
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-02T07:47:58.545Z'
content_hash: e5e9624d2fcbcdf0
---
The memory extractor in `src/core/memory-extractor.ts` uses Claude Haiku to analyze session transcripts and extract memories. Key aspects:

- Uses `claude -p --model haiku` to invoke the Claude API
- Takes a system prompt and condenses the transcript as input
- The system prompt is defined in `src/prompts/memory-extraction.ts`
- Transcript condensing reduces large transcripts to essential information before LLM processing
- Returns structured JSON with memory objects containing subject, keywords, applies_to, and content fields
- Handles both successful extractions and error cases

This approach balances accuracy (using Claude's intelligence) with efficiency (using Haiku for cost/speed).
