---
id: 7fa10b81-f264-4425-8b04-12c4b9dc51a5
subject: >-
  Memory extraction pipeline uses Claude Haiku for prompt-based keyword
  extraction
keywords:
  - memory-extractor
  - claude-haiku
  - keyword-extraction
  - transcript-processing
  - memory-creation
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T22:17:55.517Z'
content_hash: aadb186790527250
---
The MemoryExtractor class in src/core/memory-extractor.ts uses Claude Haiku model via the claude-sdk to extract keywords and create memories from transcripts. Key implementation details:

- Constructor accepts `modelId` parameter (defaults to 'claude-3-5-haiku-20241022')
- `extractKeywords()` method calls Claude with a system prompt to generate keywords from transcript segments
- Keywords are extracted as a JSON array of strings
- The extracted keywords are used to create Memory objects via the Memory manager
- Memories are deduplicated using `findDuplicate()` which checks both `occurred_at` timestamp and `content_hash`
- If a duplicate exists, the extractor updates the existing memory's `keywords` field instead of creating a new one
- Error handling logs issues but doesn't crash the extraction process
