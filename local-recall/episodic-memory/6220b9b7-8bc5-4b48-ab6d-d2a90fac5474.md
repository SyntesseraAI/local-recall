---
id: 6220b9b7-8bc5-4b48-ab6d-d2a90fac5474
subject: >-
  Memory extraction uses Claude API with streaming and token counting for
  optimized transcript processing
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - token-counting
  - transcript-processing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-02T01:44:38.117Z'
content_hash: cab2a9189cdcfc57
---
The memory extraction system in memory-extractor.ts uses the Anthropic Claude API with:
- Streaming responses for efficient token usage
- Token counting via countTokens API before processing
- Dynamic batching of transcripts to stay within token limits
- Automatic splitting of transcripts that exceed token budgets
- Error handling and retry logic for API failures

This approach ensures efficient processing of large transcripts without exceeding API limits.
