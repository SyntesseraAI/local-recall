---
id: 2570eee6-5f25-4de0-a6e4-527acdc34d49
subject: Stop hook changed to process entire transcript history instead of time window
keywords:
  - stop hook
  - transcript
  - history
  - time window
  - memory extraction
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-21T19:18:18.497Z'
content_hash: b2a83814e9e3c3fd
---
Modified stop hook logic to process entire transcript history rather than filtering by 30-second time window. Previous implementation would miss messages older than 30 seconds by the time the stop hook fired. New approach processes all messages in transcript and relies on deduplication (occurred_at + content_hash) to prevent duplicate memory creation when transcripts are reprocessed. This supports the full-history memory model.
