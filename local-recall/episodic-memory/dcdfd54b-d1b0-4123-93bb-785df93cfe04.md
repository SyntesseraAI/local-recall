---
id: dcdfd54b-d1b0-4123-93bb-785df93cfe04
subject: Hook timeout configuration affects Claude CLI spawn operations
keywords:
  - hooks
  - timeout
  - configuration
  - claude-code
  - user-prompt-submit
applies_to: global
occurred_at: '2025-12-21T19:34:09.105Z'
content_hash: 956b43a95eb1833d
---
The UserPromptSubmit hook has a 30-second timeout configured in `dev-marketplace/local-recall-plugin/config/hooks.json`. When the Claude CLI spawn hangs (due to stdin issue), the entire hook times out after 30 seconds, triggering an `AbortError` that wasn't being caught properly.

Important: The internal Claude CLI timeout should be less than the hook timeout. Use ~20 seconds for Claude CLI to leave buffer for hook cleanup. This allows graceful timeout handling instead of abrupt abort errors.
