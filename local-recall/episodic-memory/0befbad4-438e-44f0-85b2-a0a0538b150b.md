---
id: 0befbad4-438e-44f0-85b2-a0a0538b150b
subject: Memory extractor processes transcripts to extract actionable memories
keywords:
  - memory-extractor
  - transcript processing
  - memory extraction
  - claude prompting
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:00:03.631Z'
content_hash: 147f98a4f0182737
---
The memory extractor in `src/core/memory-extractor.ts` processes Claude Code session transcripts to extract valuable memories. It uses Claude Haiku via the `claude` CLI with the `-p` flag to analyze transcripts and extract memories based on specific prompts. The extractor handles:

- Reading and parsing session transcripts
- Using Claude's haiku model for lightweight analysis
- Generating structured memory objects with metadata
- Idempotent memory creation (deduplicates based on content_hash and occurred_at)

Key implementation details:
- Uses shell execution to call `claude -p --model haiku` with stdin input
- Parses Claude's JSON output to extract memory objects
- Validates memory structure before storage
- Handles errors gracefully with logging
