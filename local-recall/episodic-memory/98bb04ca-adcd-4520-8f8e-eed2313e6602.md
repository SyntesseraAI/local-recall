---
id: 98bb04ca-adcd-4520-8f8e-eed2313e6602
subject: UserPromptSubmit hook implements lazy vector store initialization with caching
keywords:
  - user-prompt-submit-hook
  - vector-store-initialization
  - lazy-loading
  - semantic-search
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T12:04:20.284Z'
content_hash: 793a753d948dd35b
---
The UserPromptSubmit hook uses lazy initialization for better performance:
- Vector store is initialized only on first semantic search (not on session start)
- Store is cached after first initialization for subsequent searches
- Performs semantic search using vector embeddings when user submits a prompt
- Matching memories are injected into Claude's context before processing
