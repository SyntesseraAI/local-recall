---
id: 48f3f0e6-f12a-4dbc-bd56-4b2718fd4779
subject: Memory deduplication strategy - occurrence time and content hash
keywords:
  - deduplication
  - memory-manager
  - findDuplicate
  - content-hash
  - occurred-at
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T19:17:09.190Z'
content_hash: 4f360531207d6bf5
---
MemoryManager prevents duplicates using `findDuplicate(occurredAt, contentHash)` (line 52-67). Before creating a memory, it checks if one with the same timestamp AND content hash already exists. If found, returns existing memory instead of creating new one.

This is the ONLY deduplication/compaction mechanism - there is no periodic cleanup, pruning, or consolidation of old memories. The `maxMemories` config option exists (default 1000) but is not enforced in the current implementation.
