---
id: 27ce669a-1ecc-4e49-a3fc-f8138739c1b8
subject: >-
  Thinking hook returns 10 items by default, expandable to 25 with high
  similarity
keywords:
  - thinking-memories
  - hook-config
  - similarity-threshold
  - result-limits
  - user-prompt-submit
applies_to: 'file:src/hooks/user-prompt-submit-thinking.ts'
occurred_at: '2025-12-03T09:47:02.103Z'
content_hash: 306792982225c753
---
Modified thinking memory search in user-prompt-submit hook (lines 77-98) to return:
- Default: 10 items (DEFAULT_LIMIT)
- Expandable: Up to 25 items if similarity >= 90% (HIGH_SIMILARITY_THRESHOLD)

Implementation fetches up to 25 candidates, then filters to only include items beyond position 10 if their similarity score is 0.90 or higher. This balances context quality (ensuring high-relevance thinking examples) with quantity (providing enough examples for diverse scenarios).
