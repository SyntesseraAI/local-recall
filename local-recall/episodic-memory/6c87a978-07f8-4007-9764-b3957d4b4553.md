---
id: 6c87a978-07f8-4007-9764-b3957d4b4553
subject: >-
  Memory extraction is an internal system process that should not trigger memory
  search
keywords:
  - memory-extraction
  - internal-process
  - recursion
  - hook-logic
  - session-guarding
applies_to: global
occurred_at: '2025-12-01T15:56:41.514Z'
content_hash: 0c0d62f6f6f56741
---
Memory extraction (the process of analyzing transcripts to create new memories) is a critical internal system function that must be protected from triggering the UserPromptSubmit hook's memory search feature.

If the extraction prompt triggers memory search, it creates a problematic loop:
1. Extract memories from transcript
2. Hook searches for memories about memory extraction
3. Results are injected into the extraction prompt
4. Extracted memories may reference extraction itself
5. On next run, extraction searches for those memories again

The session guarding mechanism (via [LOCAL_RECALL_INTERNAL] prefix) prevents this by signaling to hooks that this is an internal operation.
