---
id: 480142cf-9f35-44c1-b3b6-7043224fb32a
subject: >-
  Vector store uses better-sqlite3 with sqlite-vec extension for cosine distance
  similarity search
keywords:
  - vector store
  - sqlite-vec
  - better-sqlite3
  - embeddings
  - similarity search
  - scoring
applies_to: 'area:vector-store'
occurred_at: '2025-12-02T12:02:47.591Z'
content_hash: 42ccbd8ee4ba97b3
---
The vector store implementation uses:
- `better-sqlite3` for SQLite database operations
- `sqlite-vec` extension for vector similarity search
- `fastembed` with BGE-small-en-v1.5 model for embedding generation (~133MB)

Scoring and ranking:
- Score range: 0.0 (no match) to 1.0 (identical)
- Uses cosine distance similarity
- Scores rounded to 2 decimal places
- Results sorted by score descending
- Recency tie-breaker: when scores equal, more recent memories (occurred_at) ranked first

The embedding model (~133MB) is automatically downloaded to `local_cache/` on first use. Initial startup takes 30-60 seconds only on first run.
