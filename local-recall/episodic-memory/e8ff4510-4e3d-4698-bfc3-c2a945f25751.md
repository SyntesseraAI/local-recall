---
id: e8ff4510-4e3d-4698-bfc3-c2a945f25751
subject: >-
  Memory files are idempotent - MemoryManager.createMemory returns existing if
  duplicate detected
keywords:
  - memory creation
  - deduplication
  - idempotent operations
  - occurred_at
  - content_hash
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T22:00:50.065Z'
content_hash: 2764118d36132530
---
Memory deduplication uses two fields:
- `occurred_at`: When the original event occurred (for sorting and temporal deduplication)
- `content_hash`: SHA-256 hash prefix of memory content (16 chars)

The MemoryManager.createMemory() method is idempotent: if a memory with the same occurred_at and content_hash already exists, it returns the existing memory instead of creating a duplicate. This is checked via MemoryManager.findDuplicate(occurredAt, contentHash).
