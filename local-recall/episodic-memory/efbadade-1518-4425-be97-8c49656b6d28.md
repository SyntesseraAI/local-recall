---
id: efbadade-1518-4425-be97-8c49656b6d28
subject: Vector store uses SQLite with sqlite-vec extension for semantic search
keywords:
  - vector-store
  - sqlite
  - sqlite-vec
  - semantic-search
  - cosine-distance
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-02T11:57:20.944Z'
content_hash: 667d2766c74275e6
---
# Vector Store Implementation

## Technology Stack
- **Database**: better-sqlite3 with sqlite-vec extension
- **Embeddings**: fastembed library with BGE-small-en-v1.5 model
- **Similarity**: Cosine distance scoring

## Scoring Details
- Score range: 0.0 (no match) to 1.0 (identical)
- Scores rounded to 2 decimal places
- Results sorted by score descending
- **Recency tie-breaker**: Equal scores ranked by occurred_at (newer first)

## Operations
- `initialize()` - Setup database and load sqlite-vec extension
- `add(memory)` - Add memory with embedding to store
- `remove(id)` - Remove memory from store
- `search(query, options)` - Semantic similarity search
- `sync(memories)` - Sync store with file-based memories

## First Run Consideration
Initial startup downloads the BGE-small-en-v1.5 model (~133MB) to `local_cache/`. This takes 30-60 seconds once. Model is then cached for subsequent runs.
