---
id: ad075f87-9e6b-47d9-b5a7-4bd7f2431d71
subject: Transcript collector needs to handle multi-line tool results and edge cases
keywords:
  - transcript
  - parsing
  - tool-results
  - multiline
  - edge-cases
  - error-handling
  - content-extraction
applies_to: 'file:src/utils/transcript-collector.ts'
occurred_at: '2025-12-01T22:42:10.715Z'
content_hash: db3c815307884b8b
---
# Transcript Parsing Edge Cases

## Multi-line Tool Results
Tool results can span multiple lines in their `content` field:
- Results may include code blocks, stack traces, or formatted output
- Must preserve formatting when extracting
- Content might contain newlines that should not be treated as event separators

## Parsing Strategy
1. Read file line-by-line
2. Attempt to parse each line as JSON
3. If parse fails, continue to next line (skip invalid lines gracefully)
4. Build complete event objects with proper content handling

## Key Considerations
- Tool results often contain long, formatted content
- Some results might be truncated or incomplete
- Must handle edge cases where content has embedded newlines
- Should skip malformed lines rather than failing entire parse

The transcript collector should be robust to these variations when processing Claude's JSONL transcripts.
