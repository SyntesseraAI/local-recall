---
id: 1238b727-93bf-4f29-bcf6-085867a17c79
subject: Plugin architecture follows Claude Code plugin format with hooks.json
keywords:
  - plugin-system
  - hooks
  - claude-code
  - integration
applies_to: global
occurred_at: '2025-12-02T11:53:25.912Z'
content_hash: 7c311c5f688ff3db
---
Local Recall integrates with Claude Code as a plugin:

1. **Plugin Root**: Project root is the plugin root
2. **Hook Configuration** (`hooks.json`):
   - SessionStart: Loads 5 most recent memories on session start
   - UserPromptSubmit: Performs semantic search before Claude processes prompt
   - Stop: Currently disabled (MCP daemon handles memory extraction)

3. **Hooks Integration**:
   - Hooks use `${CLAUDE_PLUGIN_ROOT}` for script references
   - Receive `cwd` via stdin to operate on user's project
   - Vector store uses lazy initialization for UserPromptSubmit
   - SessionStart does full reload without vector store to avoid slow initialization

4. **Installation Options**:
   - As npm package
   - Direct hooks configuration in `.claude/settings.json`
   - Via plugin system
