---
id: 6c2d3e33-c96b-483f-92b5-634a321a4a08
subject: >-
  Transcript collector must handle both JSONL and JSON array formats for
  backwards compatibility
keywords:
  - transcript
  - collector
  - jsonl
  - json
  - array
  - format
  - parsing
  - backwards-compatible
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:30:37.081Z'
content_hash: 0aecc8d5d40b557b
---
The transcript collector in `src/core/transcript-collector.ts` needs to handle multiple transcript formats:

1. **JSONL format** (new): One JSON object per line, used by Claude Code
2. **JSON array format** (legacy): Single array of all entries

When reading a transcript file, the collector should:
1. Try parsing as JSONL first (splitting by newlines and parsing each line)
2. Fall back to JSON array parsing if JSONL fails
3. Always return a normalized array of entries

This backwards compatibility is important because existing projects may have transcripts in the older JSON array format, and the system needs to handle both gracefully.
