---
id: 6b5bba20-6659-49aa-bdd5-ff72396f49dc
subject: Processed log refactored to JSONL format for append-only operations
keywords:
  - processed-log
  - jsonl
  - append-only
  - file format
  - refactor
applies_to: 'file:src/core/processed-log.ts'
occurred_at: '2025-12-01T15:53:51.639Z'
content_hash: 36cd4a38f0ba7e43
---
The processed log was refactored from a JSON object format to JSONL (JSON Lines) format. Each entry is a single JSON line with `action: "add"` or `action: "remove"`. Benefits include:
- Append-only writes (more efficient)
- No need to read and rewrite entire file
- Built-in deduplication on load by replaying all entries
- Added `compact()` method to clean up the file when needed

The `recordProcessed()` method appends an "add" line, `removeEntry()` appends a "remove" line, and on load, all entries are replayed to build the current state.
