---
id: 974c272f-0a7c-4989-9f40-f88480531497
subject: Removed HTTP daemon layer - hooks now call vector stores directly
keywords:
  - architecture
  - refactor
  - daemon
  - http-server
  - direct-access
  - hooks
applies_to: global
occurred_at: '2025-12-21T19:11:29.598Z'
content_hash: 77bf527a2c9d9970
---
The architecture previously had hooks making HTTP requests to a background daemon (MCP server) which created SearchEngine/ThinkingSearchEngine instances. This added complexity and latency.

New approach: Hooks now directly import and use VectorStore/ThinkingVectorStore with file-based locking. Benefits:
- Eliminates HTTP roundtrips
- Simpler code path (fewer moving parts)
- File-based locks work across processes
- Removed: `daemon-client.ts` and `http-server.ts`
