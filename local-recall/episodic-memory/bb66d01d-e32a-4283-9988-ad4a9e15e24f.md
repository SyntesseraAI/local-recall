---
id: bb66d01d-e32a-4283-9988-ad4a9e15e24f
subject: Filter transcripts to only copy those containing thinking blocks
keywords:
  - transcript-collector
  - thinking blocks
  - sync transcripts
  - haiku transcripts
  - filtering
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-21T18:15:34.664Z'
content_hash: 18c5be3c59d056c4
---
Added filtering to `syncTranscripts()` to skip copying transcripts that don't contain thinking blocks. This excludes haiku (non-thinking) transcripts from being copied to the local cache.

Implementation:
- Added `hasThinkingBlocks()` method that checks for `"type":"thinking"` in transcript content blocks
- Updated `syncTranscripts()` to skip non-thinking transcripts with debug logging
- Updated `cleanupTranscripts()` to also remove previously copied transcripts without thinking blocks

This optimization reduces storage overhead by only retaining transcripts that contain Claude's reasoning (thinking blocks), which are the primary source for thinking memory extraction.
