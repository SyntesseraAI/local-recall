---
id: ae92b182-5b17-4369-9b09-64891b953305
subject: Memory extraction validation failures when Claude returns empty memory objects
keywords:
  - memory extraction
  - validation
  - claude response parsing
  - memory-extractor.ts
  - undefined fields
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:26:44.653Z'
content_hash: 83724d8950ddadb0
---
When Claude is called to extract memories from transcripts using the `--output-format json` flag, it sometimes returns an array of empty objects `[{}, {}, {}]` instead of the expected `{ "memories": [...] }` format. This causes validation errors because the resulting memory objects have undefined `subject`, `keywords`, `applies_to`, and `content` fields. The `parseClaudeResponse` function at line 175 wraps arrays directly without validating that they contain properly structured memory objects. This needs to be fixed to either: (1) validate the array items before wrapping, or (2) handle Claude returning empty/incomplete objects gracefully.
