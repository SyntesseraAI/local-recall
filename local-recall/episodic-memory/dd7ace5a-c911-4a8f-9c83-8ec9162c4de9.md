---
id: dd7ace5a-c911-4a8f-9c83-8ec9162c4de9
subject: >-
  MCP server daemon syncs transcripts and uses content hashing for change
  detection
keywords:
  - mcp
  - daemon
  - transcript-sync
  - content-hash
  - deduplication
  - change-detection
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T15:58:22.841Z'
content_hash: 2a25a0b7dcf7656a
---
# MCP Server Background Daemon Transcript Syncing

The MCP server daemon processes transcripts asynchronously with the following logic:

## Change Detection

- Uses content hashing (SHA-256) to detect when transcripts have changed
- Stores content hashes to track which transcripts have been processed
- When a transcript's content changes, all associated memories are deleted and recreated
- This prevents duplicate or stale memories from outdated transcripts

## Processing Flow

1. Scans `~/.claude/projects/<project>/transcripts/` every 5 minutes
2. Identifies new or modified transcript files
3. Extracts memories using Claude Haiku (`claude -p` command)
4. Stores memories in the local-recall memory system
5. Tracks processed transcripts with their content hashes

## Implementation Detail

The daemon maintains a record of processed transcripts to enable incremental processing and change detection. This is essential for the async memory extraction pipeline that doesn't use the Stop hook.
