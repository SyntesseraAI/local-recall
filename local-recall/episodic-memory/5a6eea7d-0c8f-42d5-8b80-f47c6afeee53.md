---
id: 5a6eea7d-0c8f-42d5-8b80-f47c6afeee53
subject: Transcript parser should be backward-compatible with both old and new formats
keywords:
  - transcript
  - parsing
  - backward compatibility
  - content blocks
  - role
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-21T19:22:34.972Z'
content_hash: f00407dd701159ef
---
The transcript parser needs to support both:

1. **Old format** - `content` as string, `thinking` at root, `role` field
2. **New format** - `content` as array of blocks, `type` field, thinking in content blocks

The parser should try parsing as new format first, then fall back to old format if it fails. This ensures compatibility with existing test data while handling real Claude Code transcripts correctly.
