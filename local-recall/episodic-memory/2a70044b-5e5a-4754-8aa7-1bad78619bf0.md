---
id: 2a70044b-5e5a-4754-8aa7-1bad78619bf0
subject: Memory extraction process validates parsed memories with Zod schema
keywords:
  - memory-extractor
  - validation
  - zod
  - schema
  - robustness
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T19:17:53.529Z'
content_hash: 8f222ac98a8246ab
---
The parseClaudeResponse() function uses Zod validation to ensure parsed memories match the expected schema (MemoryData with subject, keywords, applies_to, content fields). Validation failures indicate the parsed structure doesn't match expectations. Before validation, memories should be normalized to ensure field names match the schema, as Claude may return valid memory data using alternative field names. Validation errors should log the actual parsed object structure to aid debugging.
