---
id: 675f2ce3-a0fc-42be-979d-009bc39485ea
subject: Memory file deduplication uses content_hash and occurred_at fields
keywords:
  - memory-files
  - deduplication
  - content_hash
  - occurred_at
  - idempotency
  - uniqueness
applies_to: global
occurred_at: '2025-12-01T16:07:19.481Z'
content_hash: aaad8ab86e6119e9
---
## Memory File Deduplication Strategy
Memory files are deduplicated using a combination of:
- `content_hash`: SHA-256 hash prefix (16 chars) of the memory content
- `occurred_at`: ISO-8601 timestamp of when the original event occurred

When creating a new memory, the system checks if a memory with the same `occurred_at` and `content_hash` already exists. If it does, the existing memory is returned instead of creating a duplicate.

## Purpose
This approach prevents the same memory from being extracted multiple times if:
- The same transcript is processed again
- Similar events happen that generate similar memories
- The extraction process encounters the same source material

## Implementation Location
src/core/memory.ts - `findDuplicate` method checks for existing memories with matching hash and timestamp

## Important Detail
Both fields must match for a memory to be considered a duplicate. This allows:
- Same content extracted at different times to be separate memories
- Different content extracted at the same time to be separate memories
- Identical content at identical times to be recognized as duplicates
