---
id: 4ba4a76d-b815-45ec-b4b4-3944ddd8bb13
subject: Comprehensive logging added to database.ts for debugging lock contention
keywords:
  - logging
  - database
  - lock
  - debugging
  - pid
  - timing
applies_to: 'file:src/utils/database.ts'
occurred_at: '2025-12-21T18:18:36.755Z'
content_hash: 0eadbdc45f5ca858
---
Added detailed logging to track database lock contention issues:
- Every log entry includes `[PID:xxxx]` to identify which process is running
- Lock acquisition attempts log attempt count and elapsed time
- sqlite-vec load operation logs separate timing for vec load vs total time
- Full stack traces are captured on lock failures
- Timing information helps identify which operations are slow or blocked
