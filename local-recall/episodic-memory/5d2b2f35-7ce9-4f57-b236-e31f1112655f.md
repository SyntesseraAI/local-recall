---
id: 5d2b2f35-7ce9-4f57-b236-e31f1112655f
subject: Session lifecycle and memory extraction timing in Local Recall
keywords:
  - session
  - lifecycle
  - memory-extraction
  - transcript
  - processing
  - hooks
  - stop-hook
applies_to: global
occurred_at: '2025-12-02T21:25:39.093Z'
content_hash: d3553d7dec53a52e
---
# Session Lifecycle and Memory Extraction

## Current Implementation

Local Recall extracts memories from Claude Code transcripts after a session ends:

1. **Session Start Hook** - Loads recent memories from disk
2. **UserPromptSubmit Hook** - Performs semantic search based on current prompt
3. **Stop Hook** - Parses the session transcript and creates memories from it

## Memory Extraction Trigger

The Stop hook is the primary mechanism for memory extraction. It:
- Receives the full transcript when a session ends
- Parses the transcript to extract valuable insights
- Creates memory files based on extracted information
- Runs in the context of the Claude Code process

## Important Context

This is different from the MCP server's background daemon, which processes transcripts from the transcript cache asynchronously. The Stop hook is the synchronous, immediate extraction mechanism.
