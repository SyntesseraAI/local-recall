---
id: efcfcd8d-9f4e-4979-b176-66e0e01dee7e
subject: >-
  Thinking extractor correctly handles multiple thinking blocks with
  AggregatedMessage interface
keywords:
  - thinking-extractor
  - AggregatedMessage
  - thinkingParts array
  - message aggregation
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T19:23:30.733Z'
content_hash: 188b0ece80568722
---
The AggregatedMessage interface (lines 74-80) already has thinkingParts as an array that can hold multiple thinking blocks. The extraction logic at lines 133-134 pushes each thinking block to this array, correctly supporting multiple thinking blocks per message. This architecture was already in place and working as intended before the deduplication enhancement.
