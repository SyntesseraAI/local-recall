---
id: 2aa786e1-d902-4497-8600-a78378a2755d
subject: >-
  Memory extraction uses Claude Haiku model with structured prompt for analyzing
  session transcripts
keywords:
  - memory extraction
  - haiku model
  - transcript analysis
  - prompt engineering
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T15:52:23.369Z'
content_hash: f405940e83149835
---
The memory extraction system uses Claude Haiku model via `claude -p` command to analyze condensed session transcripts and extract valuable memories. The process involves:

1. Sending a structured prompt that explains:
   - The purpose of memory extraction
   - Guidelines for what to extract and what to avoid
   - Expected memory format with specific fields
   - The condensed transcript format (User/Assistant/Tool events)

2. The prompt guides extraction of:
   - Architectural decisions and reasoning
   - Bug fixes and root causes
   - Code patterns and conventions
   - Configuration quirks
   - User preferences
   - Component relationships
   - Performance considerations

3. It explicitly filters OUT:
   - Generic programming knowledge
   - Temporary debugging steps
   - Obvious/trivial information
   - Sensitive data
   - Quickly-outdated information

4. Each extracted memory requires:
   - `subject`: Brief one-line description (max 200 chars)
   - `keywords`: 1-10 searchable keywords (lowercase, specific)
   - `applies_to`: Scope (global, file:<path>, or area:<name>)
   - `content`: Detailed markdown formatted content

The system returns only valid JSON with no markdown formatting or code blocks.
