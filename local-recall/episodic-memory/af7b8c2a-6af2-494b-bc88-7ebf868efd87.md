---
id: af7b8c2a-6af2-494b-bc88-7ebf868efd87
subject: >-
  UserPromptSubmit hook consolidated into single unified hook with conditional
  memory type selection
keywords:
  - hooks
  - user-prompt-submit
  - consolidation
  - episodic
  - thinking
  - unified
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T19:28:00.140Z'
content_hash: 8098c0fc2bf6bd9c
---
The separate UserPromptSubmit hooks (user-prompt-submit.ts and user-prompt-submit-thinking.ts) have been consolidated into a single unified hook that selects which memory type to search based on environment variable configuration. The hook now:

1. Checks both `episodicEnabled` and `thinkingEnabled` config flags
2. Searches episodic memories if enabled
3. Searches thinking memories if enabled
4. Combines results from both sources
5. Filters by similarity threshold and token budget
6. Outputs to stdout for injection into Claude's context

This eliminates the need for duplicate hook logic and allows users to configure which memory types are active via environment variables.
