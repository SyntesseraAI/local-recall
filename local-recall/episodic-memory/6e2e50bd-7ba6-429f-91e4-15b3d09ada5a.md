---
id: 6e2e50bd-7ba6-429f-91e4-15b3d09ada5a
subject: Memory extraction uses Claude API via MCP server daemon
keywords:
  - memory-extraction
  - mcp-server
  - daemon
  - transcript-processing
  - claude-api
  - background-processing
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T01:15:21.276Z'
content_hash: 521f0243ddc2a153
---
# Memory Extraction Processing

Memory extraction is handled by the MCP server daemon, not the Stop hook.

## How It Works

1. **MCP Server Daemon**: Runs in background (every 5 minutes by default)
2. **Transcript Sync**: Syncs transcripts from `~/.claude/projects/<project>/transcripts/`
3. **Memory Creation**: Uses Claude API to extract and create memories from transcripts
4. **Change Detection**: Tracks processed transcripts using content hashes
5. **Deduplication**: Deletes and recreates memories when transcripts change

## Stop Hook Status

The Stop hook is currently disabled. The reason is that memory extraction happens asynchronously via the daemon rather than synchronously during session shutdown.

## Implementation

The `memory-extractor.ts` module contains the logic for extracting memories from transcripts. It processes transcript JSONL files and generates memory objects with proper metadata.

## Configuration

The daemon refresh interval can be configured (default is 5 minutes).
