---
id: 79c4d448-9efa-486f-b18a-a2c8616a3407
subject: >-
  Transcript collector must handle path conversion and JSONL format for
  accessing Claude transcripts
keywords:
  - transcript-collector
  - path-conversion
  - jsonl
  - file-parsing
  - claude-projects
  - directory-traversal
applies_to: 'area:transcript-collector'
occurred_at: '2025-12-01T15:57:00.273Z'
content_hash: ce8cb6013efe055e
---
# Transcript Collector Implementation Details

The transcript collector component needs to implement the following functionality:

## Path Conversion Algorithm

Convert from working directory to Claude's project folder name:
1. Take the absolute working directory path
2. Replace all forward slashes (`/`) with `d`
3. Example: `/Users/joe/Code/Syntessera/local-recall` â†’ `UsersdjoedjCodedjSyntesserajlocal-recall`

## JSONL Format Parsing

Claude transcript files are stored as JSONL (JSON Lines format):
- One JSON object per line
- User messages are stored in the `$message` field of each line
- Files are named with ISO timestamps (e.g., `2025-12-01T001234.567Z.jsonl`)

## Directory Operations

- Base directory: `~/.claude/projects/` on macOS
- List project directories to find the one matching converted path
- Traverse project directory for JSONL files
- Sort by timestamp to process transcripts in chronological order

## Error Handling

Consider these edge cases:
- Project directory may not exist if no sessions have been started
- Multiple JSONL files may exist for different session times
- User may have transcripts from other projects
