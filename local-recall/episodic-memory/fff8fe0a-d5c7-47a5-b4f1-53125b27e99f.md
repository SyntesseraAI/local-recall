---
id: fff8fe0a-d5c7-47a5-b4f1-53125b27e99f
subject: Memory extraction uses Claude Haiku via stdio for transcript analysis
keywords:
  - memory extraction
  - claude haiku
  - stdio
  - transcript processing
  - mcp server
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:15:09.745Z'
content_hash: f38514d0747a3d95
---
The memory extractor in `src/core/memory-extractor.ts` spawns Claude Haiku as a subprocess using `spawnSync` with stdio communication. It sends the transcript content to Claude's stdin and reads the JSON response from stdout. This approach allows the MCP server daemon to extract memories asynchronously without blocking. The extraction uses a prompt template from `src/prompts/memory-extraction.ts` that guides Claude to identify valuable memories from session transcripts.
