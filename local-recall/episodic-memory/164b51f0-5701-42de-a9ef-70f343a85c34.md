---
id: 164b51f0-5701-42de-a9ef-70f343a85c34
subject: >-
  UserPromptSubmit hook handles both episodic and thinking memories with
  independent configuration
keywords:
  - user-prompt-submit
  - hook
  - thinking-memory
  - episodic-memory
  - configuration
applies_to: global
occurred_at: '2025-12-21T19:17:41.738Z'
content_hash: f4356872feccd018
---
The UserPromptSubmit hook unifies both episodic and thinking memory search based on configuration flags. Each memory type has independent settings:
- episodicEnabled (default: true) + episodicMaxTokens/episodicMinSimilarity
- thinkingEnabled (default: true) + thinkingMaxTokens/thinkingMinSimilarity

The hook skips internal prompts containing '[LOCAL_RECALL_INTERNAL]' to avoid recursive memory extraction. Results are filtered by similarity threshold and token budget before combining.
