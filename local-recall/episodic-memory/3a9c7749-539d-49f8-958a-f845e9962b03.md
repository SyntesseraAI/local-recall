---
id: 3a9c7749-539d-49f8-958a-f845e9962b03
subject: >-
  Three pathways for data to enter the SQLite vector store: on-creation,
  on-sync, and background daemon
keywords:
  - data-flow
  - vector-store
  - sync
  - daemon
  - embedding
applies_to: global
occurred_at: '2025-12-21T19:20:08.847Z'
content_hash: 4212cea966869a87
---
# Vector Store Data Loading Pathways

There are three ways data flows into the SQLite vector store:

**1. On Memory Creation (Immediate)**
- Location: `src/core/memory.ts:107-113`
- When `MemoryManager.createMemory()` is called:
  - Memory written to disk as markdown file
  - `vectorStore.add(memory)` called immediately
  - Embedding generated via Ollama
  - Record inserted into SQLite

**2. Vector Store Sync (Periodic)**
- Location: `src/mcp-server/server.ts:73`
- Called during daemon runs
- `vectorStore.sync(memories)` reconciles file-based memories with vector store
- Adds missing memories, removes deleted ones
- Ensures consistency between disk and database

**3. Background Daemon (Every 5 minutes)**
- Location: `src/mcp-server/server.ts` daemon loop
- Processes transcripts from Claude cache
- Creates new memory files
- Triggers sync to populate vector store

Each pathway ensures embeddings are generated and stored atomically.
