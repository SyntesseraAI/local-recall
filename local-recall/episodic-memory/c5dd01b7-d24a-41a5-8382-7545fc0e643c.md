---
id: c5dd01b7-d24a-41a5-8382-7545fc0e643c
subject: Memory extraction system processes transcripts asynchronously via MCP daemon
keywords:
  - memory-extraction
  - mcp-server
  - daemon
  - background-processing
  - transcript-processing
  - asynchronous
applies_to: global
occurred_at: '2025-12-02T16:56:04.600Z'
content_hash: 4151a731b5c42ead
---
# Memory Extraction Architecture

Local Recall uses an asynchronous daemon approach for memory extraction:

## How It Works

1. **Disabled Stop Hook**: The Stop hook is currently disabled in Claude Code's hook system
2. **Background Daemon**: The MCP server runs a background daemon that periodically processes transcripts
3. **Async Processing**: Every 5 minutes, the daemon:
   - Syncs transcripts from Claude's cache (`~/.claude/projects/<project>/transcripts/`)
   - Processes transcripts using `claude -p` to extract memories
   - Tracks processed transcripts with content hashes for change detection
   - Deletes and recreates memories when transcripts change

## Why This Approach

This design avoids blocking Claude Code with long-running memory extraction processes, improving the user experience during active coding sessions. The transcripts are processed asynchronously in the background.
