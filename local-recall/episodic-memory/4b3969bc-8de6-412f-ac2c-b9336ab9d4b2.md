---
id: 4b3969bc-8de6-412f-ac2c-b9336ab9d4b2
subject: >-
  transcript-collector.ts needs refactoring to handle concurrent transcript
  processing and improve logging
keywords:
  - transcript-collector
  - refactoring
  - concurrent
  - processing
  - logging
  - daemon
  - mcp-server
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:31:22.842Z'
content_hash: 6e1b8d67e5798793
---
# Transcript Collector Refactoring Needs

The `src/core/transcript-collector.ts` file is the main component handling transcript collection and memory extraction in the MCP server daemon.

## Current Implementation Issues

1. **Concurrent Processing**: The current implementation processes transcripts sequentially, which could be a bottleneck when multiple transcripts need processing
2. **Logging**: Logging could be more consistent and helpful for debugging
3. **Error Handling**: Could benefit from better error handling and recovery strategies

## Key Responsibilities

- Syncs transcripts from Claude's cache directory
- Processes transcripts using Claude Haiku to extract memories
- Tracks processed transcripts with content hashes for change detection
- Deletes and recreates memories when transcripts change
- Runs every 5 minutes as a background daemon

## Related Files

- `src/mcp-server/server.ts` - Main MCP server that runs the daemon
- `src/utils/transcript.ts` - Transcript parsing utilities
- `src/core/memory.ts` - Memory CRUD operations
