---
id: ace2be13-ea34-4f99-9906-7b3aa9cbeb89
subject: Memory deduplication uses content_hash and occurred_at to prevent duplicates
keywords:
  - deduplication
  - content-hash
  - occurred-at
  - idempotent
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T22:35:45.342Z'
content_hash: 299a5f06fe4d794a
---
The memory system prevents duplicate memories using two fields:
1. `occurred_at`: ISO-8601 timestamp of when the original event occurred
2. `content_hash`: SHA-256 hash prefix (16 characters) of the memory content

Before creating a memory, the system calls `findDuplicate(occurredAt, contentHash)` to check if a memory with the same timestamp and content hash already exists. If found, the existing memory is returned instead of creating a new one. This makes memory creation idempotent.
