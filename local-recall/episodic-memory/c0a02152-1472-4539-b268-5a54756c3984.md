---
id: c0a02152-1472-4539-b268-5a54756c3984
subject: Hooks must not use daemon HTTP client - import and use vector stores directly
keywords:
  - hooks
  - user-prompt-submit
  - session-start
  - direct-import
  - vector-search
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T19:11:29.598Z'
content_hash: 2333bdd461338ac5
---
Updated hooks to:

1. Import VectorStore and ThinkingVectorStore directly
2. Call `initialize()` before use to load index with file-based locking
3. Call `search()` for vector similarity queries
4. No HTTP requests - file-based locks handle cross-process synchronization

SessionStart hook simplified further - only reads recent memories from filesystem using MemoryManager (no search needed). Both hooks benefit from automatic lock management without daemon complexity.
