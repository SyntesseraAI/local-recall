---
id: fe2bcccd-475e-4680-b825-089ff6d43aac
subject: >-
  Thinking memory extraction runs in parallel (20 concurrent operations) via
  daemon
keywords:
  - thinking-extraction
  - parallel
  - daemon
  - concurrency
  - performance
  - transcript-processing
applies_to: global
occurred_at: '2025-12-21T18:28:54.683Z'
content_hash: b52d825da2b39226
---
Thinking memory extraction from transcripts uses parallel processing for scalability.

**Architecture**:
- `src/core/thinking-extractor.ts` - Extracts thinking blocks from transcripts
- Runs 20 parallel extraction operations to process large transcript sets efficiently
- Integrates with the MCP server daemon for background processing
- Tracks processed transcripts in `src/core/thinking-processed-log.ts`

**How It Works**:
1. Daemon collects transcripts from Claude cache
2. Extractor identifies thinking blocks (text between `<SCRATCHPAD_REASONING>` or similar tags)
3. Pairs each thinking block with its corresponding output
4. Creates thinking memory files: one thought+output per memory
5. Tracks which transcripts have been processed to avoid duplicates

**Performance**:
- 20 parallel workers prevent single-threaded bottleneck
- Useful when catching up on many transcripts
- Can be configured if needed

**Deduplication**:
- Uses `thinking-processed-log.ts` to track processed transcripts by content hash
- Prevents re-processing the same transcript multiple times
- Detects when transcripts change and re-processes them
