---
id: 22e2566a-75f7-414b-9759-2c55f33b7be9
subject: Memory extraction parsing handles Claude field name variations
keywords:
  - memory-extractor
  - field-normalization
  - claude-haiku
  - parsing
  - robustness
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:16:16.542Z'
content_hash: e838fc2ff2bd4d21
---
The memory extractor must handle cases where Claude Haiku returns memory objects with alternative field names instead of the expected `subject`, `keywords`, `applies_to`, and `content`. Added field normalization at lines 179-186 that maps common variations:

- `title` → `subject`
- `tags` or `keywords_list` → `keywords`
- `scope` or `applies_to` → `applies_to`
- `text` or `body` → `content`

This prevents Zod validation failures when Claude returns valid memories with slightly different field names. The normalization runs before validation to ensure all memories are properly structured.
