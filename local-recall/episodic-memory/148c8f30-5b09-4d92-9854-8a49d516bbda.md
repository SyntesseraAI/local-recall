---
id: 148c8f30-5b09-4d92-9854-8a49d516bbda
subject: >-
  Deduplication of thinking blocks prevents memory content from becoming
  repetitive
keywords:
  - deduplication
  - thinking-extractor
  - set deduplication
  - streaming duplicates
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T19:23:30.733Z'
content_hash: 36753a6745e91f0f
---
Added deduplication logic at lines 146-148 of thinking-extractor.ts using Set to filter out duplicate thinking and text parts before joining them. This prevents memories from containing repeated content when streaming artifacts log the same thinking block multiple times. The fix uses `[...new Set(aggregated.thinkingParts)]` and `[...new Set(aggregated.textParts)]` to ensure unique content only.
