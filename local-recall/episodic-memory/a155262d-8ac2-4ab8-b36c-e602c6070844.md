---
id: a155262d-8ac2-4ab8-b36c-e602c6070844
subject: >-
  Plugin hooks must use pure JavaScript - native modules like better-sqlite3
  cannot be bundled
keywords:
  - plugin
  - bundling
  - native-modules
  - better-sqlite3
  - orama
  - hooks
applies_to: 'area:plugin-development'
occurred_at: '2025-12-03T11:22:02.028Z'
content_hash: 252501e1fb438d8a
---
When bundling hooks for plugins, native Node modules like `better-sqlite3` cannot be included in the bundle. The solution is to use pure JavaScript alternatives like Orama for vector search. The main project migrated from SQLite+better-sqlite3 to Orama for this reason, allowing hooks to be bundled and distributed without native dependencies.

Stale bundled hooks that reference `better-sqlite3` will fail at runtime with `ERR_MODULE_NOT_FOUND`. Always ensure plugin hook configurations point to hooks that use pure JavaScript libraries only.
