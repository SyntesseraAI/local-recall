---
id: 0d17853a-f655-4f5c-bb20-f68717743734
subject: Transcript condensing functionality for memory extraction
keywords:
  - transcript
  - condensing
  - memory-extraction
  - parsing
  - compression
  - events
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:16:25.594Z'
content_hash: 4812792931cd6dbe
---
# Transcript Condensing for Memory Extraction

The `TranscriptCollector` in `src/core/transcript-collector.ts` now includes transcript condensing functionality.

## Purpose

Condensed transcripts reduce token usage when extracting memories by Claude Haiku. Instead of passing full transcripts with all messages and raw tool outputs to the Claude API, condensed transcripts contain only the essential information needed for memory extraction.

## Format

Condensed transcripts are structured as events:
- `[User]` - User's request or prompt
- `[Assistant]` - Claude's response or explanation
- `[Tool: Name]` - Tool invocations (e.g., `[Tool: Read]`, `[Tool: Bash]`)
- `[Result: OK/ERROR]` - Outcome of the tool call

This event-based format is much more compact than raw transcripts while preserving all essential information for understanding what was accomplished.

## Implementation

The condensing logic is implemented in the `TranscriptCollector` class and is used by the MCP daemon when sending transcripts to Claude for memory extraction.
