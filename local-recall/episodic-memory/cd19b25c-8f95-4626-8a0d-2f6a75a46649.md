---
id: cd19b25c-8f95-4626-8a0d-2f6a75a46649
subject: >-
  UserPromptSubmit hook uses lazy-initialized vector store for semantic search
  on user prompts
keywords:
  - hooks
  - user-prompt-submit
  - semantic-search
  - lazy-initialization
  - vector-store
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T11:58:30.953Z'
content_hash: 2aab60364d55fbc4
---
The UserPromptSubmit hook performs semantic search using vector embeddings:
1. Receives JSON with session_id, transcript_path, cwd, prompt
2. Initializes vector store lazily (cached after first use)
3. Performs semantic search using vector embeddings
4. Outputs matching memories to stdout for context injection

Lazy initialization means the vector store is only loaded once per session and reused for multiple prompts, balancing search quality with performance.
