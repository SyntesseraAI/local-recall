---
id: e1616d67-8353-4bde-811f-1e26bd84d84b
subject: >-
  Memory extraction system processes recursive LOCAL_RECALL_INTERNAL prompts
  causing infinite loops
keywords:
  - memory extraction
  - bug
  - infinite loop
  - transcript processing
  - local-recall-internal
  - transcript-collector
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T22:41:35.345Z'
content_hash: 58a800f20ed05b33
---
The transcript-collector processes its own internal `[LOCAL_RECALL_INTERNAL]` extraction prompts as regular user input. This creates a recursive loop where each extraction iteration includes the full previous prompt in the transcript, causing exponential growth and infinite recursion.

The issue occurs because:
1. The extraction prompt is sent to Claude via `claude -p`
2. Claude's response (which includes memories) gets added back to the transcript
3. The next iteration processes the entire transcript again, including the previous extraction prompt
4. This causes the transcript to grow exponentially with each iteration

Fix: Filter out `[LOCAL_RECALL_INTERNAL]` sections from the transcript before processing to prevent self-referential loops.
