---
id: 3cf91b82-bc2d-46bc-8747-22d160ba8ca6
subject: >-
  Memory extractor was passing transcripts via command-line arguments causing
  E2BIG errors on large files
keywords:
  - memory-extractor
  - e2big error
  - stdin
  - large transcripts
  - command-line arguments
  - spawn
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T22:37:18.851Z'
content_hash: 036113c8a5034f30
---
The `callClaudeCLI` method in `src/core/memory-extractor.ts` was passing the entire transcript as a command-line argument using `spawn('claude', [...args])`. This caused E2BIG (Argument list too long) errors when processing large transcript files that exceed the system's command-line argument length limit.

The fix was to pass the transcript content via stdin instead of as a command-line argument:
- Changed from: `spawn('claude', ['prompt', fullTranscriptText])`
- Changed to: Use stdin to pipe the transcript content
- This allows handling transcripts of any size without hitting OS-level limits

This is a critical fix for the memory extraction pipeline when processing longer coding sessions.
