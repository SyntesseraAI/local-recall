---
id: 9715d102-bb11-44e3-9690-7a0bbbe57fe3
subject: >-
  transcript.ts exports parseTranscriptForMemories for parsing raw JSONL
  transcripts into memories
keywords:
  - transcript
  - parsing
  - jsonl
  - memories
  - parseTranscriptForMemories
  - stop-hook
  - refactor
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-01T15:55:36.260Z'
content_hash: 08388e10aed620bd
---
The `parseTranscriptForMemories()` function (lines 377-413) is the main entry point for processing Claude transcripts.

**Purpose**: Takes raw JSONL content from transcript files and returns an array of memory objects ready for creation.

**Key Details**:
- Accepts `rawTranscriptContent` (string) and optional `cwd` parameter
- Returns `ParsedMemory[]` objects with subject, keywords, and applies_to scope
- Processes each JSONL event sequentially, filtering out non-memory-relevant events
- Uses Claude Haiku via `claude -p` to extract keywords from event content
- Handles error cases gracefully with logging

**Important Implementation Notes**:
- The function signature takes `rawTranscriptContent` as the first parameter
- Returns an array of `ParsedMemory` objects (not full Memory objects)
- Memory creation is a separate step handled by the caller
- The function focuses solely on parsing and keyword extraction, not file I/O
