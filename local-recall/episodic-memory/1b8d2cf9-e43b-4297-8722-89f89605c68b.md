---
id: 1b8d2cf9-e43b-4297-8722-89f89605c68b
subject: >-
  Test validation expectations need updating when transcript parsing behavior
  changes
keywords:
  - testing
  - transcript validation
  - error handling
  - backward compatibility
applies_to: 'file:tests/unit/utils/transcript.test.ts'
occurred_at: '2025-12-21T18:29:39.576Z'
content_hash: ef04acac0ac24a49
---
When updating transcript parsing to be more lenient (silently skip invalid messages instead of throwing):

- Old tests expecting `ValidationError` for invalid roles need to be updated
- New behavior: invalid messages are silently skipped from parsed results
- Better approach: test that valid messages are retained while invalid ones are filtered out
- Don't test for thrown errors on invalid input; instead verify they don't appear in parsed output

This change makes the parser more robust for real-world transcripts that may have edge cases.
