---
id: f0f1befe-2b85-4dbb-97a3-01324fe8e2c8
subject: Memory extraction strategy - condensing transcripts before processing
keywords:
  - memory-extraction
  - transcript-condensing
  - summarization
  - efficiency
  - token-usage
  - claude-haiku
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T01:55:32.161Z'
content_hash: 144894f2059dbe39
---
# Transcript Condensing Strategy

The memory extraction process now uses transcript condensing to reduce token usage and improve extraction accuracy.

## Why Condense?

1. **Token Efficiency**: Full transcripts can be very long, causing unnecessary token usage
2. **Clarity**: Condensed transcripts focus on the meaningful work done, removing noise
3. **Better Extraction**: Haiku can extract more relevant memories from cleaner input

## Implementation

Before passing a transcript to Claude Haiku for memory extraction:
1. Read the full `.jsonl` transcript
2. Condense it by:
   - Keeping all `[User]` and `[Assistant]` events
   - Filtering tool invocations to only include relevant ones
   - Removing verbose tool output and errors that don't affect the outcome
   - Preserving the logical flow of work
3. Pass the condensed transcript to the extraction prompt

## Result Format

The condensed transcript should maintain clear event markers:
- `[User]` - What the user asked
- `[Assistant]` - What Claude explained or planned
- `[Tool: ToolName]` - Tool invocations that matter
- `[Result: OK/ERROR]` - Outcome of important operations

This format makes it easy for Haiku to understand the session flow and extract appropriate memories.
