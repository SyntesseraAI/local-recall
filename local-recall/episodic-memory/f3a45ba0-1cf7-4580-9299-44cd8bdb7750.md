---
id: f3a45ba0-1cf7-4580-9299-44cd8bdb7750
subject: >-
  Transcript collector needs to parse JSONL format from Claude's transcript
  files
keywords:
  - transcript
  - parsing
  - jsonl
  - streaming
  - json-lines
  - event-based
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:09:38.932Z'
content_hash: 7f3124c8a16a95f9
---
# Transcript Parsing Requirements

The transcript collector in `src/core/transcript-collector.ts` needs to:

1. **Read JSONL files** - Claude stores transcripts as JSON Lines (one JSON object per line)
2. **Parse line-by-line** - Cannot parse entire file as single JSON; must split by newlines and parse each line
3. **Handle events** - Each line is an event object with `type`, `content`, and other fields
4. **Extract messages** - Identify user and assistant messages from the event stream
5. **Maintain order** - Events are chronological, important for understanding conversation flow

The current implementation in transcript-collector.ts may not properly handle the JSONL format. Review and update to:
- Split input by newlines
- Parse each line as separate JSON
- Filter and process relevant event types (user_message, assistant_message)
- Handle parsing errors gracefully
