---
id: ed50c523-b726-4e52-ad85-4c140063e131
subject: >-
  TranscriptCollector needs to discover project directory from Claude's
  environment or configuration
keywords:
  - transcript-collector
  - project-directory
  - environment
  - discovery
  - cwd
  - hooks
  - mcp-server
applies_to: 'area:transcript-collector'
occurred_at: '2025-12-01T21:24:43.045Z'
content_hash: d976334231509022
---
# Project Directory Discovery for TranscriptCollector

The `TranscriptCollector` class needs to determine the current project directory to construct the path to Claude transcripts.

## Current Approach

When used in Claude Code hooks:
- Hooks receive `cwd` (current working directory) via JSON stdin input
- This `cwd` is passed to the TranscriptCollector
- The TranscriptCollector uses this to construct the Claude transcripts path

## MCP Server Challenge

When running as an MCP server daemon:
- The server receives `LOCAL_RECALL_DIR` environment variable
- But needs to know which project(s) to collect transcripts for
- Must either:
  1. Accept project directory as a configuration or environment variable
  2. Detect it from the LOCAL_RECALL_DIR location (parent directory)
  3. Require explicit project path configuration

## Implementation Consideration

The TranscriptCollector likely needs to:
- Accept a project directory parameter in its constructor
- Convert the path to the Claude transcript folder name format (dashes for path separators)
- Construct full path: `~/.claude/projects/{converted-path}/transcripts/`
