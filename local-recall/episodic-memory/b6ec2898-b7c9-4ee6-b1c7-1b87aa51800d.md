---
id: b6ec2898-b7c9-4ee6-b1c7-1b87aa51800d
subject: 'Synthetic transcript filtering happens after copying, not before'
keywords:
  - synthetic transcripts
  - transcript-collector
  - transcript sync
  - filtering
  - cleanup
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-21T18:28:15.275Z'
content_hash: afe52bceb413e4ad
---
The transcript collector's `syncTranscripts()` method (line 239) was copying synthetic transcripts from Claude's cache before cleaning them up. This created unnecessary I/O operations.

The fix checks `isSyntheticFile(transcript.sourcePath)` BEFORE copying each transcript (similar to how `cleanupTranscripts()` removes synthetic files after the fact).

Optimal flow:
1. `cleanupTranscripts()` removes any synthetic files that already exist locally
2. For each new/modified source transcript, check if synthetic before copying
3. Only copy non-synthetic transcripts
4. This avoids wasted I/O from copying files destined for deletion

This is a performance optimization that reduces unnecessary file I/O during the sync process.
