---
id: 3abf5691-b593-4349-ae69-ca3be72ccd58
subject: Memory creation handles duplicate detection using occurred_at and content_hash
keywords:
  - duplicate-detection
  - memory-creation
  - deduplication
  - occurred_at
  - content_hash
  - idempotency
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T21:13:14.001Z'
content_hash: 07b534462bdda053
---
## Deduplication Strategy

Memory creation is idempotent - it checks for duplicates before creating new memories:
- Uses `occurred_at` timestamp for temporal deduplication
- Uses `content_hash` (SHA-256 prefix) to detect identical content
- Returns existing memory ID if duplicate found
- This prevents creating multiple memories for the same event or information

Important: The `occurred_at` field should represent when the original event occurred, not when the memory was created. This enables proper deduplication across sessions.
