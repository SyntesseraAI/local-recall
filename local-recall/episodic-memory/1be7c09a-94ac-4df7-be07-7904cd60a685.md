---
id: 1be7c09a-94ac-4df7-be07-7904cd60a685
subject: >-
  Memory extraction validation: Claude may return empty objects requiring field
  validation
keywords:
  - memory extraction
  - validation
  - claude response parsing
  - memory-extractor
  - empty objects
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T23:06:36.551Z'
content_hash: b8f084ebc93a7256
---
When Claude is called to extract memories from transcripts using `--output-format json`, it sometimes returns an array of empty objects `[{}, {}, {}]` instead of properly structured memory objects. This happens even when Claude appears to be processing normally.

**Issue:** The extraction was failing silently because empty objects were being treated as valid memories, causing issues downstream.

**Solution:** Add field validation in `extractMemoriesFromTranscript()` to ensure returned objects have required fields:
- Check for `subject` (string, non-empty)
- Check for `keywords` (array, non-empty)
- Check for `applies_to` (string, non-empty)
- Filter out objects that don't meet validation criteria

**Implementation:** Validate each memory object before returning from `extractMemoriesFromTranscript()` to prevent invalid memories from entering the system. This ensures data integrity in the memory extraction pipeline.
