---
id: a6ce8287-9e62-4e2d-bb3a-bee43cec1c91
subject: Claude Code hook integration and workflow
keywords:
  - hooks
  - session
  - prompt
  - integration
  - claude-code
applies_to: global
occurred_at: '2025-12-02T11:31:39.917Z'
content_hash: 7ba7a1f76130caaa
---
Three hooks configured in `hooks.json` that receive JSON via stdin:

1. **SessionStart** - When Claude Code session begins:
   - Loads memory index from `local-recall/index.json`
   - Retrieves relevant memories based on context
   - Outputs to stdout (injected into Claude's context)

2. **UserPromptSubmit** - Before Claude processes user prompt:
   - Extracts keywords from prompt using `claude -p --model haiku`
   - Searches memory index with fuzzy matching
   - Outputs matching memories to stdout

3. **Stop** - Currently disabled (handled by MCP daemon instead)
   - MCP server runs background daemon processing transcripts every 5 minutes
   - Extracts memories using `claude -p`
   - Tracks processed transcripts with content hashes for change detection
