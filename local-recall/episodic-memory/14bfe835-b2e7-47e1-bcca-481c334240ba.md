---
id: 14bfe835-b2e7-47e1-bcca-481c334240ba
subject: Simplified hook architecture by removing daemon requirement
keywords:
  - hooks
  - architecture
  - daemon
  - simplification
  - http-communication
applies_to: global
occurred_at: '2025-12-03T11:22:58.632Z'
content_hash: ddb322aac029d0d1
---
# Hook Architecture Simplification

## Before
Hooks communicated with a background daemon via HTTP (localhost:7847) to avoid mutex lock errors from concurrent sqlite-vec loading:
- SessionStart hook → HTTP request → daemon → vector search
- UserPromptSubmit hook → HTTP request → daemon → vector search
- Stop hook → HTTP request → daemon → memory extraction

## After
Hooks now work directly:
- SessionStart hook → direct memory operations
- UserPromptSubmit hook → direct vector search via Orama
- No daemon process required
- No HTTP communication layer needed

## Benefits
- Simpler configuration and deployment
- Fewer moving parts and potential failure points
- Better integration with Claude Code
- Reduced complexity for end users
