---
id: d359376f-015f-4dd1-98d3-32fcb3a24b75
subject: Memory extraction prompt should be structured for consistent JSON output
keywords:
  - prompt-engineering
  - json-output
  - memory-extraction
  - claude-haiku
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:13:32.843Z'
content_hash: f95a28ead2eded85
---
## Best Practice
When using Claude (especially Haiku) to extract structured data:
1. Use explicit format instructions ("Return as JSON array")
2. Provide clear examples of the expected output format
3. Specify the schema/structure expected
4. Ask for the array directly rather than wrapping it

## Reasoning
This reduces ambiguity and helps Claude understand the exact format needed, though you should still handle both formats defensively in parsing.

## Note
Even with clear instructions, always validate and handle both formats in the parser since Claude's behavior can vary.
