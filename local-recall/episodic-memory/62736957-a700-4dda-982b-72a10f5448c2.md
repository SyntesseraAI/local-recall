---
id: 62736957-a700-4dda-982b-72a10f5448c2
subject: Memory lifecycle and integration with transcript daemon workflow
keywords:
  - memory-lifecycle
  - transcript-daemon
  - mcp-server
  - 5-minute-interval
  - background-processing
  - deduplication
applies_to: global
occurred_at: '2025-12-01T22:30:23.025Z'
content_hash: eff8b1cc23d01634
---
# Memory Lifecycle in Local Recall

Memories are created through a background daemon workflow:

## The Pipeline

1. **Transcript Collection** (`transcript-collector.ts`): Discovers new/updated transcript files in `~/.claude/projects/<project>/transcripts/`
2. **Deduplication Check**: Tracks transcripts by content hash to identify changed transcripts
3. **Memory Extraction** (`memory-extractor.ts`): Sends transcript to Claude Haiku to extract structured memories
4. **Memory Creation** (`memory.ts`): Stores extracted memories as markdown files with YAML frontmatter
5. **Deduplication Check**: If a duplicate memory exists (same `occurred_at` + `content_hash`), the existing memory is kept

## Daemon Schedule

- Runs every **5 minutes** in the background MCP server
- Processes all transcripts since last run
- When a transcript changes, deletes old memories and creates new ones
- Completely idempotent - safe to run repeatedly

## Key Properties

- **Distributed**: Each session creates memories automatically without manual intervention
- **Deduplicating**: Prevents duplicate memories when transcripts are reprocessed
- **Background**: Doesn't interrupt the user's workflow
- **Asynchronous**: Memories may lag behind the current session by up to 5 minutes
