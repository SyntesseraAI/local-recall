---
id: 8a278bf3-141c-414e-8f18-d5b183e9860a
subject: >-
  fastembed/onnxruntime-node causes same mutex errors as sqlite-vec due to
  native bindings
keywords:
  - mutex
  - fastembed
  - onnxruntime-node
  - native-bindings
  - concurrent-processes
  - error
applies_to: global
occurred_at: '2025-12-21T18:30:01.408Z'
content_hash: 301bef8dcd3a3071
---
After migration to Orama, mutex errors persisted because `onnxruntime-node` (dependency of `fastembed`) has native bindings that cause the same mutex/lock contention issue as `sqlite-vec` when multiple hook processes load it concurrently. This is not specific to SQLite - any native module with internal mutexes will have this problem. Solution: serialize access to fastembed using file-based locks (proper-lockfile) in `src/core/embedding.ts`.
