---
id: e864d1f0-1412-4d52-8e8b-7ddf43910d24
subject: >-
  Vector store tie-breaker for search results: More recent memories ranked first
  when similarity scores are equal
keywords:
  - vector store
  - search
  - ranking
  - recency
  - tie-breaker
  - occurred_at
  - cosine distance
applies_to: global
occurred_at: '2025-12-21T19:04:31.826Z'
content_hash: f9f4fc92b5073add
---
## Problem

When multiple memories have the same vector similarity score, there needs to be a consistent way to rank them.

## Solution

The vector store uses `occurred_at` timestamp as a tie-breaker: when two memories have identical similarity scores, the more recent one is ranked first. This ensures:

1. **Deterministic ordering**: Results are consistent across searches
2. **Preference for recent**: Newer memories are favored over older ones when equally relevant
3. **Better context**: More recent memories likely reflect current state of the codebase

## Implementation

When sorting search results:
1. Primary sort: similarity score (descending)
2. Secondary sort (tie-breaker): `occurred_at` timestamp (descending, most recent first)

## Code Location

`src/core/vector-store.ts` - Search results are sorted by similarity score, with `occurred_at` as secondary sort key.
