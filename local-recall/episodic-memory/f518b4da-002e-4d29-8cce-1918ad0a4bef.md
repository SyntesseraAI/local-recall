---
id: f518b4da-002e-4d29-8cce-1918ad0a4bef
subject: >-
  SessionStart hook loads recent memories on startup, UserPromptSubmit does
  semantic search
keywords:
  - hooks
  - session-start
  - user-prompt-submit
  - memory-injection
applies_to: 'area:claude-integration'
occurred_at: '2025-12-02T12:48:45.325Z'
content_hash: 7d6f2d22e6cae97a
---
Two main hooks are configured in hooks.json:

1. **SessionStart**: Triggered when Claude Code session begins. Loads all memories from disk and returns the 5 most recent ones (sorted by `occurred_at`). This is a full reload, not incremental, avoiding vector store initialization on every start.

2. **UserPromptSubmit**: Triggered before Claude processes user prompt. Initializes vector store (lazy, cached after first use) and performs semantic search using embeddings. Returns matching memories to stdout for context injection.

Both hooks receive JSON input via stdin with `session_id`, `transcript_path`, `cwd`, and optional `prompt`.
