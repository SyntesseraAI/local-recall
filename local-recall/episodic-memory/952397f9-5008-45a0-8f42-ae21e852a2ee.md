---
id: 952397f9-5008-45a0-8f42-ae21e852a2ee
subject: Memory extraction parsing handles field name variations from Claude responses
keywords:
  - memory-extractor
  - field-normalization
  - claude-response
  - zod-validation
  - parsing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T22:24:27.124Z'
content_hash: c070bbf3cce5e29b
---
Claude Haiku may return memory objects with alternative field names instead of the expected ones (subject, keywords, applies_to, content). Added field name normalization in parseClaudeResponse() (lines 179-186) to handle common variations:

- 'title' or 'name' → 'subject'
- 'tags' → 'keywords'
- 'scope' → 'applies_to'
- 'body' or 'text' → 'content'

This normalization occurs before Zod validation, allowing the parser to accept valid memories even when Claude uses slightly different field names. The fix prevents validation errors that previously resulted in undefined fields in parsed memories.
