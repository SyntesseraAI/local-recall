---
id: 22d7e1e5-9145-4150-928f-4f27cae1691a
subject: 'Internal prompts marked with [LOCAL_RECALL_INTERNAL] skip hook processing'
keywords:
  - hooks
  - internal-prompts
  - memory-extraction
  - skip-detection
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T17:21:11.889Z'
content_hash: 96c8f70d83125149
---
The `user-prompt-submit.ts` hook detects and skips internal prompts containing `[LOCAL_RECALL_INTERNAL]` marker. This is intentional - these are prompts sent by the daemon to extract memories from transcripts using `claude -p`. The hook's check is at line ~50: `if (input.prompt?.includes('[LOCAL_RECALL_INTERNAL]'))` returns early. This prevents memory extraction prompts from creating duplicate memories.
