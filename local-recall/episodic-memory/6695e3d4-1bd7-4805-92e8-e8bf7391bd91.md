---
id: 6695e3d4-1bd7-4805-92e8-e8bf7391bd91
subject: Claude CLI invocation for keyword extraction in UserPromptSubmit hook
keywords:
  - claude cli
  - keyword extraction
  - user-prompt-submit hook
  - spawn
  - haiku model
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T16:00:07.537Z'
content_hash: 2a6eb99f25f2ed32
---
The UserPromptSubmit hook uses `spawn` to invoke the Claude CLI for keyword extraction. The hook spawns a process to run Claude (likely with the Haiku model via `-p` flag) to extract keywords from user prompts before searching the memory index. This is logged at line 49 with debug message 'UserPromptSubmit: About to spawn Claude CLI for keyword extraction'. This external invocation is critical for identifying which memories are relevant to the current user input.
