---
id: 1853c036-92d3-43ba-aa81-499e3be5b41c
subject: Claude CLI requires stdin for large prompts to avoid E2BIG error
keywords:
  - claude
  - cli
  - stdin
  - e2big
  - spawn
  - argument-limit
  - memory-extractor
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T21:15:34.935Z'
content_hash: 2d8b2a9ddf929874
---
When calling Claude CLI with large prompts (like condensed transcripts), passing the prompt as a command-line argument via `spawn('claude', ['-p', prompt, ...])` can exceed the OS argument size limit (~2MB on macOS). Solution: Use stdin instead via `spawnSync('claude', ['-p'], { input: prompt, encoding: 'utf-8' })`. This allows arbitrarily large prompts to be passed without hitting E2BIG errors.
