---
id: a0ae990c-b318-4b88-b209-ca4f03153bb1
subject: >-
  SessionStart hook implementation: Direct file reading for recent memories
  without vector store load
keywords:
  - sessionstart
  - hook
  - optimization
  - memory loading
  - file reading
  - occurred_at
applies_to: 'file:src/hooks/session-start.ts'
occurred_at: '2025-12-21T19:04:31.826Z'
content_hash: 1728e2f555a37d97
---
## Implementation Pattern

The SessionStart hook loads recent memories efficiently by:

1. Reading memory files directly from the file system (not using vector store)
2. Parsing YAML frontmatter to extract `occurred_at` timestamp
3. Sorting memories by timestamp (most recent first)
4. Taking the 5 most recent memories
5. Outputting their content for injection into Claude's context

## Why Not Use Vector Store?

The vector store (Orama) is not used for SessionStart because:
- Vector search requires loading and indexing the entire store
- SessionStart just needs recent memories, not semantic relevance
- Direct file reading is simpler and faster
- Only 5 memories are needed, so sorting is cheap

## Input/Output

**Input** (JSON via stdin):
- `session_id` - Current session identifier
- `transcript_path` - Path to transcript file
- `cwd` - Current working directory

**Output** (stdout):
- Raw memory content (markdown format)
- Injected into Claude's context automatically by Claude Code

## Configuration

Configurable via:
- Environment variables
- `.local-recall.json` file
- `LOCAL_RECALL_DIR` - Memory directory (default: `./local-recall`)
- `LOCAL_RECALL_MAX_CONTEXT` - Number of recent memories to load (default: 10, but hook typically uses 5)
