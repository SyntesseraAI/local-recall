---
id: 511101a2-fb0d-4fcd-a7c7-79e92fc3ffa5
subject: Thinking extractor handles multiple thinking blocks per message correctly
keywords:
  - thinking blocks
  - multiple
  - aggregation
  - message streaming
  - thinking-extractor
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-03T17:29:39.364Z'
content_hash: d9c93e025bd9deb9
---
The thinking extractor is designed to handle multiple thinking blocks within a single Claude message. The `AggregatedMessage` interface uses `thinkingParts: string[]` (an array) to accumulate multiple thinking blocks from a single message ID. The extraction logic pushes each thinking block found to this array via `aggregated.thinkingParts.push(thinkingContent)`. This supports Claude's behavior of potentially generating multiple interleaved thinking blocks within a single response.
