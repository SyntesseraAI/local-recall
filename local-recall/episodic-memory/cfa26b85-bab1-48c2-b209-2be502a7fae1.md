---
id: cfa26b85-bab1-48c2-b209-2be502a7fae1
subject: Memory extraction uses keyword-based search with Claude Haiku
keywords:
  - memory-extraction
  - keyword-extraction
  - claude-haiku
  - search-strategy
  - prompt-processing
applies_to: global
occurred_at: '2025-12-02T07:12:12.210Z'
content_hash: 5ed26ad3c61c0596
---
# Memory Extraction and Keyword Strategy

## Current Approach

Local Recall extracts keywords from prompts and transcripts using Claude Haiku via the `claude -p` command:
- The claude CLI tool is invoked with a prompt to extract relevant keywords
- This is more efficient than full semantic embedding for real-time searches
- Keywords are used for fast fuzzy matching in the memory index

## When Keywords Are Extracted

1. **SessionStart Hook**: On session start, uses current working directory context
2. **UserPromptSubmit Hook**: Extracts keywords from user prompts before Claude processes them
3. **Stop Hook (Background)**: MCP server processes transcripts asynchronously

## Implementation Details

- The `claude -p` command requires the Claude CLI to be installed and available
- Keyword extraction happens synchronously during hook execution
- Keywords are fuzzy-matched against the memory index for fast retrieval
- This hybrid approach combines keyword speed with semantic search capability

## Performance Consideration

Keyword-based search provides:
- Fast, deterministic matching
- Low latency for hook execution
- Reduced reliance on embeddings for every search
- Better transparency (keywords are explicit and debuggable)
