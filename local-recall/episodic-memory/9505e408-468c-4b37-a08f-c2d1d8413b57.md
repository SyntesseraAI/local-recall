---
id: 9505e408-468c-4b37-a08f-c2d1d8413b57
subject: >-
  Memory deduplication prevents duplicate memories but there is no compaction or
  consolidation
keywords:
  - deduplication
  - duplicate prevention
  - compaction
  - memory management
  - content-hash
  - occurred_at
applies_to: global
occurred_at: '2025-12-21T19:18:04.336Z'
content_hash: 90958ac7f576b560
---
The `MemoryManager` in `src/core/memory.ts` implements basic duplicate prevention:

- Before creating a memory, it checks if one with the same `occurred_at` timestamp AND `content_hash` already exists
- If a duplicate is found, it returns the existing memory instead of creating a new one
- This prevents accidental duplication but does NOT compact or consolidate memories
- There is a `maxMemories` configuration option but it appears to be for limits only, not active pruning
- Compaction/merging of similar memories is not implemented

This means memories accumulate over time with only duplicate filtering at creation.
