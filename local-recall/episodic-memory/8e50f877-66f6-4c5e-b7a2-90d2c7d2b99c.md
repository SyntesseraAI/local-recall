---
id: 8e50f877-66f6-4c5e-b7a2-90d2c7d2b99c
subject: Transcript collector must handle both .jsonl and .json file formats
keywords:
  - transcript
  - jsonl
  - json
  - file-format
  - parsing
  - backwards-compatibility
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:09:59.046Z'
content_hash: 25ff05430a76d30c
---
# Transcript File Format Support

The `transcript-collector.ts` module needs to handle both `.jsonl` (jsonlines) and `.json` file formats when reading Claude Code transcripts.

## Why Both Formats?

Claude Code may save transcripts in either format:
- `.jsonl` - One JSON object per line (streaming format)
- `.json` - Array of events in a single JSON file

## Implementation Notes

- The parsing logic must attempt to parse files as `.jsonl` first, then fall back to `.json`
- Each line in `.jsonl` is a separate event object (e.g., `{"type": "UserPromptSubmit", ...}`)
- The `.json` format contains an array of events
- File extensions in the transcripts directory may vary, so format detection should be robust
- Both formats contain the same event data structure

## Related Components

- The MCP server daemon reads from `~/.claude/projects/<project>/transcripts/`
- Event types include: `UserPromptSubmit`, `AssistantThought`, `ToolStart`, `ToolComplete`, `AssistantMessage`
