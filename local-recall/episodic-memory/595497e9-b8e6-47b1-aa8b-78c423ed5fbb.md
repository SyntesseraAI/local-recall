---
id: 595497e9-b8e6-47b1-aa8b-78c423ed5fbb
subject: Memory extraction process uses claude -p interactive evaluation
keywords:
  - memory-extraction
  - claude-command
  - transcript-processing
  - interactive-mode
  - json-output
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T17:37:18.718Z'
content_hash: e14d384ad6e4e96d
---
# Memory Extraction Using Claude Command

The memory extraction process uses the `claude -p` command (interactive mode) to process transcripts and extract memories.

## How It Works

1. Transcripts are read from Claude's cache at `~/.claude/projects/<project>/transcripts/`
2. The transcript condenser condenses the transcript into a condensed format
3. The memory extractor passes the condensed transcript to `claude -p` for analysis
4. `claude -p` uses the memory extraction prompt to identify and extract valuable memories
5. JSON output is parsed to create memory markdown files

## Key Points

- Uses interactive mode (`-p`) rather than direct API calls
- Relies on Claude's reasoning capabilities for semantic memory extraction
- Output should be valid JSON that can be parsed into memory objects
- The prompt template is in `src/prompts/memory-extraction.ts`

## Current Implementation

The `stop.js` hook was originally used but is now disabled. Memory extraction is handled asynchronously by the MCP server daemon which processes transcripts every 5 minutes.
