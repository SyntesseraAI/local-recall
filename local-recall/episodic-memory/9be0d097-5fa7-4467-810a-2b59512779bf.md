---
id: 9be0d097-5fa7-4467-810a-2b59512779bf
subject: UserPromptSubmit hook must output structured JSON for context injection
keywords:
  - userpromptsubmit
  - hook
  - json
  - context
  - injection
  - hooks.json
  - additionalcontext
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T22:36:04.665Z'
content_hash: 02f0b4f04bb6a1a2
---
The UserPromptSubmit hook was outputting plain text via console.log(), but Claude Code's hook infrastructure requires structured JSON format for context injection to work. The hook output must be valid JSON with `additionalContext` field containing the relevant memories as a string. This is critical for memories to be injected into Claude's context during user prompt processing.
