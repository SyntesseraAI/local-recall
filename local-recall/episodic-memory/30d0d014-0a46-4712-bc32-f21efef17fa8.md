---
id: 30d0d014-0a46-4712-bc32-f21efef17fa8
subject: 'SessionStart hook timeout issue: vector store initialization too heavy'
keywords:
  - sessionstart
  - hook
  - timeout
  - vector-store
  - embedding-model
  - performance
applies_to: 'file:src/hooks/session-start.ts'
occurred_at: '2025-12-01T21:47:19.758Z'
content_hash: 7931f5c44e12b2c8
---
The SessionStart hook was timing out (30s limit) because it initialized the vector store, which downloads a 133MB embedding model on first use. Fixed by removing vector store initialization from the hook and using direct memory lookups instead. Vector store is now lazily initialized by MCP server or user-prompt-submit hook when needed.

**Root cause:** Vector store initialization is expensive (~30-60 seconds on first run) and incompatible with hook timeout constraints.

**Solution:** Load recent memories directly without vector store, defer vector store init to background processes.
