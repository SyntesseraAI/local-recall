---
id: 85d1cd83-6cf5-40ab-b847-8db1e227259a
subject: Memory extraction workflow uses async transcript processing
keywords:
  - transcript
  - processing
  - async
  - daemon
  - mcp-server
  - memory-extraction
  - workflow
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-02T16:21:26.015Z'
content_hash: b45ca9d4d91fa8dc
---
# Memory Extraction Workflow

The Local Recall system processes transcripts asynchronously rather than synchronously during session end:

## Architecture

1. **Stop Hook**: Disabled in current implementation
2. **MCP Server Daemon**: Runs every 5 minutes to process transcripts
3. **Async Processing**: Transcripts are collected and processed in background

## Workflow Steps

1. **Transcript Collection**: `transcript-collector.ts` syncs transcripts from `~/.claude/projects/<project>/transcripts/`
2. **Processing**: `transcript-condenser.ts` condenses transcripts for analysis
3. **Memory Extraction**: `memory-extractor.ts` uses Claude to extract actionable memories
4. **Duplicate Detection**: Uses `occurred_at` timestamp and `content_hash` for deduplication
5. **Storage**: Memories stored as markdown files in `local-recall/episodic-memory/`

## Benefits

- Non-blocking: Doesn't slow down Claude Code
- Batch processing: More efficient than per-session extraction
- Async: Can process multiple transcripts in parallel
- Traceable: `processed-log.ts` tracks which transcripts have been processed
