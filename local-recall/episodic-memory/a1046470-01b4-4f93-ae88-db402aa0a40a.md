---
id: a1046470-01b4-4f93-ae88-db402aa0a40a
subject: >-
  transcript-collector.ts needs to be refactored to load from cached transcripts
  instead of stdin
keywords:
  - transcript-collector
  - refactor
  - stdin
  - cache
  - transcripts
  - jsonl
  - memory-extraction
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:30:57.284Z'
content_hash: fcf2a4227985c91d
---
# Transcript Collector Refactoring

The `transcript-collector.ts` module is being refactored to load project transcripts from Claude's cache instead of reading from stdin.

## Current Issue

Currently receives transcript data via stdin, which is not ideal for the background MCP daemon.

## Solution

Refactor to:
1. Load transcripts from `~/.claude/projects/<project>/transcripts/` directory
2. Parse `.jsonl` files (JSON Lines format)
3. Extract memories from the structured transcript events
4. Handle transcript deduplication using content hashes

## Key Implementation Details

- Project directory name: absolute path with forward slashes replaced by dashes
- Platform-specific: `~/.claude/projects/` on macOS, similar pattern on other OSes
- Each session produces one `.jsonl` transcript file
- Need to track processed transcripts to avoid re-processing
