---
id: 8e0da2ab-0d72-44d4-b100-53b984efc090
subject: Memory extraction prompt system with extraction and deduplication logic
keywords:
  - memory-extraction prompt
  - extraction system prompt
  - deduplication
  - memory keywords
  - prompt engineering
applies_to: 'file:src/prompts/memory-extraction.ts'
occurred_at: '2025-12-01T15:59:49.323Z'
content_hash: f139ac10af352241
---
The memory extraction process uses a carefully engineered prompt system that:

- Includes both a system prompt and user prompt for extraction
- Instructs Claude to analyze transcripts and extract valuable memories
- Defines memory structure with required fields: subject, keywords, applies_to, content
- Implements deduplication logic to prevent creating duplicate memories
- Uses specific guidelines for what to extract vs not extract
- Includes scope definitions (global, file:path, area:name)
- Memory subjects are limited to ~200 characters
- Keywords are lowercase and specific (1-10 per memory)
- Deduplication based on occurred_at and content_hash
