---
id: 32e0900b-a064-4fbd-bbe6-dddc5d061c01
subject: Memory deduplication strategy using content hash and timestamp
keywords:
  - deduplication
  - memory
  - content-hash
  - occurred-at
  - duplicate-detection
  - idempotent
applies_to: 'area:memory-management'
occurred_at: '2025-12-01T22:54:33.093Z'
content_hash: 93b04ed548a9056b
---
# Memory Deduplication Strategy

Local Recall uses a two-part deduplication approach:

## Deduplication Fields

1. **occurred_at**: ISO-8601 timestamp of when the original event happened
2. **content_hash**: SHA-256 prefix (16 characters) of the memory content

## How It Works

- When creating a memory, the system checks for existing duplicates by matching both `occurred_at` and `content_hash`
- If a duplicate exists, `createMemory()` returns the existing memory instead of creating a new one
- This makes memory creation idempotent - calling it multiple times with the same data produces the same result

## Practical Implication

This approach prevents duplicate memories from accumulating when:
- The transcript collection daemon re-processes the same transcript
- Multiple hooks or processes try to extract memories from the same event
- A memory is re-extracted due to system restarts or retries
