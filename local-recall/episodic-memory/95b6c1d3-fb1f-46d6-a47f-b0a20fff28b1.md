---
id: 95b6c1d3-fb1f-46d6-a47f-b0a20fff28b1
subject: >-
  UserPromptSubmit hook infinite recursion when calling claude -p without
  disabling hooks
keywords:
  - userpromptsubmit
  - hook
  - claude -p
  - recursion
  - abort error
  - child process
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T06:36:44.314Z'
content_hash: 89842891a6095132
---
When the UserPromptSubmit hook calls `claude -p` to extract keywords from user prompts, it triggers the UserPromptSubmit hook again, causing infinite recursion. This results in an 'abort' error from the child process. Solution: disable hooks when calling `claude -p` by passing `--no-hooks` flag to prevent the recursive invocation.
