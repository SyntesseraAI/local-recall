---
id: d300b94f-deea-4c59-a62b-fc99808fb991
subject: transcript-collector utility reads and parses Claude Code transcripts
keywords:
  - transcript
  - collector
  - parsing
  - jsonl
  - memory-extraction
  - timestamp
  - background-daemon
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-02T01:44:56.436Z'
content_hash: 6189a944d4ad62aa
---
# Transcript Collector Implementation

The `transcript-collector.ts` module is responsible for:

1. **Reading transcripts** from `~/.claude/projects/<project>/transcripts/` directory
2. **Parsing JSONL format** - Each line is a separate JSON message object
3. **Extracting message content** - Handles both user and assistant messages
4. **Tracking processed transcripts** - Uses content hashes to detect changes
5. **Filtering new messages** - Only processes messages not yet analyzed

## Key Functions

- `readProjectTranscripts(cwd)` - Reads all transcripts for a project
- `parseTranscriptLine(line)` - Parses individual JSONL lines
- `extractMessages(transcript)` - Filters and returns relevant messages

## Important Notes

- Used by the MCP server's background daemon (runs every 5 minutes)
- Content hashes prevent duplicate memory creation
- Timestamps are used for deduplication and sorting in memories
