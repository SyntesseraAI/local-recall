---
id: e6ebf054-7716-4ba3-bda5-fd1a2438fec6
subject: >-
  Memory extraction system has infinite recursion bug with nested
  LOCAL_RECALL_INTERNAL prompts
keywords:
  - recursion bug
  - memory extraction
  - transcript processing
  - infinite loop
  - local recall internal
applies_to: 'area:transcript-collector'
occurred_at: '2025-12-02T06:25:55.611Z'
content_hash: 711162f406c4b3ef
---
## Issue
The memory extraction system is processing transcripts that contain its own internal `[LOCAL_RECALL_INTERNAL]` memory extraction prompts, causing infinite recursion. Each iteration nests the previous prompt deeper, leading to exponentially growing transcript content.

## Root Cause
When transcripts are condensed and stored, they include the full `[LOCAL_RECALL_INTERNAL]` analysis prompt. When the same transcript is processed again, the system processes this prompt as a user input, creating a nested copy in the next iteration.

## Solution Needed
The transcript collection/condensing process needs to filter out `[LOCAL_RECALL_INTERNAL]` sections before storing condensed transcripts. This prevents the system from re-processing its own internal analysis prompts.

## Affected Component
Likely in `src/core/transcript-collector.ts` or the transcript condensing logic - need to sanitize transcripts before storing to prevent this recursion.
