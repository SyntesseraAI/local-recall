---
id: 2253aee1-2e28-4316-a229-f1a5895c66b7
subject: User-prompt-submit hook spawns Claude process to extract keywords from text
keywords:
  - user-prompt-submit hook
  - callClaudeForKeywords
  - keyword extraction
  - claude subprocess
  - transcript processing
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T19:21:11.638Z'
content_hash: 5479916e690c6bc9
---
# Keyword Extraction via Claude Subprocess

## Pattern
The user-prompt-submit hook uses a helper function `callClaudeForKeywords` that spawns a separate Claude process to extract keywords from text. This is used in the memory extraction workflow.

## Key Details
- Function spawns a child process using Node.js `spawn` API
- Sends a system prompt and text via stdin to the Claude process
- Receives JSON response with extracted keywords via stdout
- The function needs robust error handling and timeout management
- Multiple concurrent spawns can occur, requiring proper process lifecycle management
