---
id: 517eaa9b-9b71-4d60-96d2-f618809dcaa8
subject: Pre-computed embeddings and auto-compaction integrated into memory system
keywords:
  - embeddings
  - pre-computed
  - compaction
  - lazy-loading
  - index-refresh
  - performance
applies_to: global
occurred_at: '2025-12-21T18:28:54.683Z'
content_hash: 23c0384a2008ec15
---
Added pre-computed embeddings to memory files to improve performance and enable background index compaction.

**Pre-computed Embeddings**:
- Vector embeddings are now computed once when memories are created
- Stored in memory metadata to avoid re-computing on every search
- Reduces Ollama calls during search operations
- Embeddings are lazy-loaded only when needed for vector store

**Auto-compaction Feature**:
- Memory indexes are automatically compacted in the background
- Removes deleted memories from the index efficiently
- Runs on configurable interval (default 5 minutes via `indexRefreshInterval`)
- Prevents index from growing unbounded with deleted entries

**Benefits**:
- Faster searches (no re-embedding needed)
- Smaller index files over time
- Background processes don't block main operations
- Improved memory efficiency as the system scales

**Configuration**:
- `indexRefreshInterval` - How often to compact indexes (seconds)
- Default configured for optimal balance between responsiveness and compaction frequency
