---
id: 17a28ab6-fda9-4486-8635-5298194ad934
subject: sqlite-vec mutex errors occur with concurrent process loading
keywords:
  - sqlite-vec
  - mutex
  - concurrent
  - processes
  - locking
  - mcp-server
applies_to: global
occurred_at: '2025-12-21T19:39:43.183Z'
content_hash: d6411f12cff4adff
---
The MCP server (src/mcp-server/server.ts:230) has a known issue where sqlite-vec can fail with 'mutex lock failed: Invalid argument' errors when multiple processes attempt to load it concurrently. The solution involves using cross-process file locking to prevent simultaneous access. This is particularly important when multiple Claude Code sessions or hooks run in parallel and try to access the same vector store.
