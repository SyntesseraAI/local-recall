---
id: f3462b0f-efe6-44fc-8658-fef1f972005c
subject: Claude Code transcript format uses content blocks with thinking extraction
keywords:
  - transcript
  - parsing
  - thinking
  - content blocks
  - message format
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-02T21:37:14.576Z'
content_hash: 8a54fb66f855f207
---
Claude Code transcripts have a nested structure where `content` is an array of content blocks, not a flat string. Each block has a `type` field:

- `type: "thinking"` - Contains extended thinking with `thinking` field
- `type: "text"` - Contains text response with `text` field
- `type: "tool_use"` - Contains tool invocations
- `type: "tool_result"` - Contains tool results

Thinking messages should be extracted from `content[].thinking` during transcript parsing, not from a root-level `thinking` field. The `parseTranscript()` function was updated to support both the actual nested format and legacy flat format for backward compatibility.
