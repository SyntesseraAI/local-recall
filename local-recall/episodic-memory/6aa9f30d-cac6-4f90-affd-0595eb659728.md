---
id: 6aa9f30d-cac6-4f90-affd-0595eb659728
subject: Transcript collector implementation - extracting memories from Claude sessions
keywords:
  - transcript-collector
  - memory-extraction
  - claude-sessions
  - processing
  - background-daemon
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:14:15.171Z'
content_hash: b097e990c14b917b
---
# Transcript Collector Implementation

The `transcript-collector.ts` file handles reading and processing Claude Code session transcripts to extract memories.

## Key Functions

### findProjectTranscriptDir(cwd: string)
- Locates the transcript directory for a given working directory
- Converts absolute path by replacing `/` with `-`
- Looks in `~/.claude/projects/` on macOS
- Returns the full path to the transcripts directory

### readTranscriptFile(filePath: string)
- Reads a JSONL transcript file
- Parses each line as a separate JSON object
- Returns an array of transcript events
- Handles file reading errors gracefully

## Design Pattern

The transcript collector is designed as part of the background daemon system where:
1. The MCP server daemon runs periodically (every 5 minutes)
2. It detects new or modified transcripts
3. Uses transcript-collector to read and parse them
4. Extracts memories from the content
5. Tracks processing state using content hashes

## Integration Points

- Used by the MCP server background daemon
- Works with the memory extraction system
- Part of the automated memory creation pipeline
- Handles transcript change detection via content hashes

## Current Status

The transcript collector is a core utility for the automated memory extraction feature, enabling the system to learn from Claude Code sessions without manual intervention.
