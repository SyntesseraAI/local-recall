---
id: e97fa829-e109-4be4-99c3-ca6dd612d4a5
subject: Thinking memory vector store auto-creates database tables on initialization
keywords:
  - vector store
  - database tables
  - initialization
  - CREATE TABLE IF NOT EXISTS
  - graceful recovery
applies_to: 'file:src/core/thinking-vector-store.ts'
occurred_at: '2025-12-21T19:14:30.494Z'
content_hash: 790743d633268e27
---
The thinking vector store automatically creates necessary database tables when initialized, using `CREATE TABLE IF NOT EXISTS` pattern. This means deleted tables will be automatically recreated on the next load.

Table creation happens in `ThinkingVectorStore.createTables()` (src/core/thinking-vector-store.ts:78-118) and is called during store initialization.

Related: The processed log file (`thinking-processed-log.jsonl`) also handles missing files gracefully - when deleted and `load()` is called, it handles `ENOENT` gracefully and starts with empty state (src/core/thinking-processed-log.ts:102-109).

This design allows for safe reset: delete processed log + memories + index files, and they'll all be recreated automatically on next daemon run.
