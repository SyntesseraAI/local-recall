---
id: 624ad66d-69b9-4c9c-bc05-3147629656c3
subject: >-
  Memory extraction system uses Claude API with structured prompts for
  converting transcripts to memories
keywords:
  - memory extraction
  - claude api
  - transcript processing
  - structured prompts
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-01T16:19:29.359Z'
content_hash: 4d772ce152201861
---
The memory extraction system in local-recall uses Claude's API (via `claude -p` command) to intelligently convert session transcripts into structured memories. The process uses a two-stage prompt system:

1. **Condensing prompt** (`src/prompts/memory-extraction.ts`): Converts raw transcript into condensed events
2. **Memory extraction prompt**: Analyzes condensed transcript to extract memories

Key implementation details:
- Uses Claude Haiku model for efficient processing
- Memory extraction happens asynchronously in the MCP server daemon (every 5 minutes)
- Memories are deduplicated by `occurred_at` timestamp and `content_hash`
- Extracted memories follow the standard YAML frontmatter format with subject, keywords, applies_to, and content fields
