---
id: 7eb9ea53-12ad-43f9-8812-4ce9c61256cd
subject: >-
  Streaming artifact patterns in transcripts: thinking blocks are duplicated,
  not interleaved
keywords:
  - transcripts
  - streaming
  - message structure
  - jsonl format
  - duplicates
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T19:23:20.556Z'
content_hash: 87e7a743eb74f7d0
---
When processing Claude transcripts in JSONL format, the same thinking block can appear multiple times in a single message as a streaming artifact. The pattern observed is thinking → tool_use → thinking (identical) → text. This is NOT true interleaved thinking but rather duplicate logging from the streaming API. Deduplication using `[...new Set(array)]` is effective at removing these duplicates before joining.
