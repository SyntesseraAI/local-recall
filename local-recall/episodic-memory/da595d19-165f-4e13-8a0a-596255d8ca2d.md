---
id: da595d19-165f-4e13-8a0a-596255d8ca2d
subject: Claude CLI completes quickly from shell but hangs via Node.js spawn
keywords:
  - claude-cli
  - spawn
  - shell
  - stdio
  - debugging
applies_to: global
occurred_at: '2025-12-21T19:32:21.797Z'
content_hash: 6b49315a27ea47d6
---
When testing the Claude CLI (`claude -p "say hi" --model haiku --output-format json --strict-mcp-config`), it completes in ~2.4 seconds when run directly from bash. However, when spawned via Node.js's `spawn()` function without special stdio handling, it hangs indefinitely.

This behavior is caused by stdin being left open. The fix is to explicitly set `stdio: ['ignore', 'pipe', 'pipe']` when spawning the process. With this fix, performance is restored to ~2-3 seconds.
