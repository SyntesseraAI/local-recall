---
id: f34ccf95-b779-4fbe-9ebb-2df9601a09c5
subject: Transcript parsing handles multiline tool output and incomplete JSON
keywords:
  - transcript
  - parsing
  - jsonl
  - json
  - tool-results
  - error-handling
  - robustness
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-02T07:36:58.315Z'
content_hash: 888aa01f20872f58
---
# Transcript Parsing Robustness

When parsing Claude's JSONL transcripts, tool results can contain multiline content including:
- Multiline JSON objects (formatted with newlines and indentation)
- Terminal output with multiple lines
- Incomplete or truncated JSON structures

The transcript collector must handle:
1. Line-by-line JSON parsing where a single logical event might span multiple lines
2. Graceful handling of malformed JSON without crashing
3. Recovery from partial/incomplete JSON structures

The parser should accumulate partial JSON content until a complete, valid JSON object is parsed, then process it as an event.

Key insight: Not every line in a JSONL transcript is valid JSON - some are continuations of previous objects.
