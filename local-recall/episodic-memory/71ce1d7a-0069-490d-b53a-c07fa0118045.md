---
id: 71ce1d7a-0069-490d-b53a-c07fa0118045
subject: >-
  session-start hook returns 5 most recent memories loaded from disk, no vector
  store initialization
keywords:
  - session-start
  - hook
  - memories
  - recent
  - vector-store
  - performance
applies_to: 'area:hooks'
occurred_at: '2025-12-02T17:11:09.082Z'
content_hash: c4f85eae1f0e3739
---
# SessionStart Hook Implementation

## Memory Loading Strategy

The SessionStart hook uses a **full disk reload** approach:
- Loads all memories from disk via `MemoryManager.listMemories()`
- Selects the 5 most recent memories (sorted by `occurred_at`)
- Does NOT initialize the vector store (to avoid slow initialization on every session start)
- Outputs memory content to stdout for injection into Claude's context

## Reason for This Approach

Initializing the vector store on every session start would be slow (30-60 seconds on first load due to embedding model download). By loading recent memories directly from disk:
- Session starts remain fast
- User gets relevant context from recent work
- Semantic search happens separately in UserPromptSubmit hook (which only runs when needed)

## Data Flow

1. Claude Code triggers SessionStart hook
2. Hook receives: `session_id`, `transcript_path`, `cwd`
3. MemoryManager lists all memories from `local-recall/episodic-memory/`
4. Hook sorts by `occurred_at` and takes top 5
5. Memory content is output to stdout
6. Claude Code injects into context before user interaction

This is a conscious performance trade-off: recency over relevance for session initialization.
