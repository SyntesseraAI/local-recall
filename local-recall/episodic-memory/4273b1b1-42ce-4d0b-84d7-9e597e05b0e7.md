---
id: 4273b1b1-42ce-4d0b-84d7-9e597e05b0e7
subject: Claude CLI requires stdin for large prompts to avoid E2BIG error
keywords:
  - claude
  - cli
  - stdin
  - e2big
  - spawn
  - argument-limit
  - memory-extractor
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:20:06.094Z'
content_hash: b5891644cc66ba13
---
When calling Claude CLI with large prompts (like condensed transcripts), passing the prompt as a command-line argument via `spawn('claude', ['-p', prompt, ...])` can exceed the OS argument size limit (~2MB on macOS). Solution: use `spawn('claude', ['-p'], { stdio: ['pipe', 'pipe', 'pipe'] })` and write the prompt to stdin instead. This is especially important for memory extraction where transcripts can be very large.
