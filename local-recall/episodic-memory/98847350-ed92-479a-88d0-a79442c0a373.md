---
id: 98847350-ed92-479a-88d0-a79442c0a373
subject: >-
  UserPromptSubmit hook requires structured JSON output for context injection in
  Claude Code plugins
keywords:
  - userpromptsubmit
  - hook
  - json
  - output
  - context
  - injection
  - claude code
  - plugin
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T16:06:58.803Z'
content_hash: e534532e833c902f
---
The UserPromptSubmit hook must output structured JSON for context injection to work with Claude Code plugins. Plain text stdout was not being injected into Claude's context - only a "Callback hook success" message was shown. The hook needs to output a JSON object with a `context` field containing the memories or relevant information. The hook.json configuration uses `stdin` to pass input data and expects JSON output on stdout that Claude Code will parse and inject into the prompt context.
