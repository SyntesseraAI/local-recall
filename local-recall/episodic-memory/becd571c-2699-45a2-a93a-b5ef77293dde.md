---
id: becd571c-2699-45a2-a93a-b5ef77293dde
subject: Memory extraction uses token-based identification over string matching
keywords:
  - prompt identification
  - token prefix
  - internal prompts
  - extraction
  - recursion prevention
applies_to: global
occurred_at: '2025-12-21T19:43:18.015Z'
content_hash: b5288d3faf6a4b5a
---
Using a token prefix like `[LOCAL_RECALL_INTERNAL]` at the start of prompts is more reliable than string matching for identifying internal extraction prompts. This allows testing with similar prompts while still preventing the guard from triggering. The token should be checked with `startsWith()` rather than `includes()` for clarity and efficiency.
