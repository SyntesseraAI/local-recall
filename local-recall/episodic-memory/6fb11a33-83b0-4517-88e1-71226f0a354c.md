---
id: 6fb11a33-83b0-4517-88e1-71226f0a354c
subject: 'ToolResultContent.content can be array or string, not just string'
keywords:
  - transcript
  - tool result
  - content type
  - array
  - type mismatch
  - toLowerCase
applies_to: 'file:src/core/transcript-condenser.ts'
occurred_at: '2025-12-21T19:00:26.631Z'
content_hash: 98538df4a157b68b
---
The TypeScript type for `ToolResultContent.content` is declared as `string`, but Claude's actual transcript format sometimes has `content` as an array of content blocks (e.g., for multi-part results with images + text).

Calling `.toLowerCase()` or `.split()` on this field causes runtime errors. The fix is to check if content is a string before calling string methods, and handle array content appropriately.

File: `src/core/transcript-condenser.ts:205` - `isErrorResult()` function
