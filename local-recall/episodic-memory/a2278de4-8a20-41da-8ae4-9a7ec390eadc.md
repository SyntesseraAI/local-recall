---
id: a2278de4-8a20-41da-8ae4-9a7ec390eadc
subject: >-
  user-prompt-submit hook extracts keywords from user prompts to search memory
  index
keywords:
  - user-prompt-submit
  - hook
  - keyword extraction
  - memory search
  - claude haiku
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T15:53:23.714Z'
content_hash: a4e627872e5e63c8
---
The user-prompt-submit hook is triggered when a user submits a prompt in Claude Code. It:
1. Receives JSON input with session_id, transcript_path, cwd, and prompt
2. Extracts keywords from the prompt using Claude Haiku (`claude -p --model haiku`)
3. Searches the memory index for matching keywords using fuzzy matching
4. Outputs matching memories to stdout for injection into Claude's context

This allows relevant memories to be automatically retrieved and provided to Claude based on the current user query.
