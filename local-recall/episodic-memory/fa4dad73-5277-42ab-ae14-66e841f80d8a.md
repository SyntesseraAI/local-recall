---
id: fa4dad73-5277-42ab-ae14-66e841f80d8a
subject: >-
  Transcript collector needs to handle JSONL format and reconstruct Claude
  project paths
keywords:
  - transcript
  - jsonl
  - parsing
  - claude-projects
  - path-construction
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:26:15.137Z'
content_hash: d6e45f0a24d84fea
---
# Transcript Collector Implementation Notes

## JSONL Parsing

Transcripts from Claude are stored as JSONL (JSON Lines format), not standard JSON arrays. Each line is a separate JSON object representing one message/event in the conversation.

Must use `.split('\n').filter(line => line.trim()).map(line => JSON.parse(line))` to parse correctly.

## Project Path Construction

To locate transcripts for a given working directory:

1. Take the absolute path (e.g., `/Users/joe/Code/Syntessera/local-recall`)
2. Replace all `/` with `-` to get project folder name: `Users-joe-Code-Syntessera-local-recall`
3. Build transcript path: `~/.claude/projects/<project-folder>/transcripts/`

This is how Claude Code internally organizes project data.

## Environment Setup

The MCP server environment variable `LOCAL_RECALL_DIR` points to the memory storage directory (e.g., `./local-recall`), not where transcripts are stored. Transcripts must be found separately from Claude's cache.
