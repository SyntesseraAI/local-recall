---
id: 024087d4-b353-40e1-82e7-44ff861e6717
subject: >-
  Memory deduplication uses occurred_at timestamp and content_hash SHA-256
  prefix
keywords:
  - deduplication
  - idempotent
  - content-hash
  - occurred-at
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T21:41:35.797Z'
content_hash: 4f5852ef4118ad4b
---
Memory creation is idempotent - createMemory() returns existing memory if duplicate found. Deduplication uses two factors:
- `occurred_at`: ISO-8601 timestamp of original event (for sorting/aging)
- `content_hash`: 16-character SHA-256 prefix of memory content

Method: findDuplicate(occurredAt, contentHash) checks for existing duplicates before creating new memory.
