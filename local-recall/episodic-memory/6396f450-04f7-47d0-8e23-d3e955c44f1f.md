---
id: 6396f450-04f7-47d0-8e23-d3e955c44f1f
subject: Memory deduplication strategy uses occurred_at timestamp and content_hash
keywords:
  - deduplication
  - duplicate-detection
  - occurred_at
  - content_hash
  - memory-lifecycle
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T22:17:55.517Z'
content_hash: eca528e31adbd1c5
---
Memories are deduplicated using a two-part strategy:

1. **occurred_at timestamp**: The time when the original event occurred, used to detect if a memory for the same event already exists
2. **content_hash**: A SHA-256 prefix (16 characters) of the memory content used to detect if the same content was previously stored

The `findDuplicate(occurredAt, contentHash)` method checks the memory index for existing entries with matching occurred_at and content_hash values. This prevents creating duplicate memories when the same event is processed multiple times. When a duplicate is found, the existing memory's keywords can be updated rather than creating a new file.
