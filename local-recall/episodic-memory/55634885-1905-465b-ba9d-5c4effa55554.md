---
id: 55634885-1905-465b-ba9d-5c4effa55554
subject: >-
  Architecture: transcript.ts should export parsing utilities, stop.ts only
  calls them
keywords:
  - architecture
  - separation of concerns
  - parsing
  - hooks
applies_to: global
occurred_at: '2025-12-21T18:27:11.223Z'
content_hash: d17ca50d64e2c014
---
Clean architecture pattern: Keep parsing logic in utility modules (transcript.ts), hooks (stop.ts) should only handle I/O and orchestration.

stop.ts responsibilities:
1. Read input from stdin (session_id, transcript_path, cwd)
2. Load configuration
3. Read transcript file
4. Call parseTranscriptForMemories() to get suggestions
5. Loop through and save each memory using MemoryManager

This makes utilities reusable and testable separately from hook infrastructure.
