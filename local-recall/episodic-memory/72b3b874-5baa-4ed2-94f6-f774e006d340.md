---
id: 72b3b874-5baa-4ed2-94f6-f774e006d340
subject: Claude Code hooks integration for memory management
keywords:
  - hooks
  - claude-code
  - integration
  - session-start
  - user-prompt-submit
applies_to: global
occurred_at: '2025-12-02T12:18:56.170Z'
content_hash: 1a810067afaa6fa0
---
Local Recall integrates with Claude Code through three hooks configured in `.claude/settings.json`:

1. **SessionStart Hook** (`dist/hooks/session-start.js`): Triggered at session start, loads all memories from disk and returns 5 most recent memories (sorted by `occurred_at`) for context injection. Uses full reload, not vector store.

2. **UserPromptSubmit Hook** (`dist/hooks/user-prompt-submit.js`): Triggered before Claude processes user prompt, initializes vector store (lazy initialization, cached), performs semantic search, and outputs matching memories for context injection.

3. **Stop Hook** (`dist/hooks/stop.js`): Currently disabled. Memory extraction is handled by MCP server daemon processing transcripts asynchronously every 5 minutes instead.

Hooks receive JSON input with session_id, transcript_path, cwd, and (for UserPromptSubmit) the prompt.
