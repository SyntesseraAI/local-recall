---
id: fd230e9c-f595-497b-bfb9-51667dd7d3b2
subject: Transcript collector implementation patterns
keywords:
  - transcript
  - collector
  - parsing
  - jsonl
  - session
  - events
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:17:13.596Z'
content_hash: e111007ad0619cba
---
# Transcript Collector Patterns

The transcript collector needs to handle:

1. **JSONL Format**: Transcripts are stored as JSONL (JSON Lines) files
   - Each line is a complete, parseable JSON object
   - Must parse line-by-line, not as a complete JSON array

2. **Message Structure**: Each message event contains:
   - `session_id`: Unique session identifier
   - Timestamp information
   - Complete message content

3. **Parsing Implementation**:
   - Read file as text
   - Split by newlines
   - Parse each line individually as JSON
   - Handle empty lines gracefully

4. **Error Handling**:
   - Invalid JSON on any line should not break entire parsing
   - Consider logging problematic lines for debugging
