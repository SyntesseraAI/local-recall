---
id: 3b87b542-c9a6-4da9-9d09-4d04c3d3db59
subject: Plugin architecture uses hooks for memory integration with Claude Code
keywords:
  - hooks
  - plugin
  - session-start
  - user-prompt-submit
  - stop-hook
applies_to: global
occurred_at: '2025-12-02T07:49:25.306Z'
content_hash: 9bd939faeef91f52
---
Three hooks integrate Local Recall with Claude Code:

1. **SessionStart Hook** - Triggered when session begins:
   - Loads memory index from `local-recall/index.json`
   - Retrieves relevant memories for current context
   - Outputs memory content to stdout (injected into Claude's context)

2. **UserPromptSubmit Hook** - Triggered before Claude processes prompt:
   - Extracts keywords from user prompt using Claude Haiku
   - Searches memory index with fuzzy matching
   - Outputs matching memories to stdout

3. **Stop Hook** - Currently disabled, replaced by MCP server daemon:
   - Processes transcripts asynchronously every 5 minutes
   - Extracts memories using `claude -p` (Haiku model)

Hooks receive JSON via stdin with `session_id`, `transcript_path`, `cwd` and use `${CLAUDE_PLUGIN_ROOT}` for script references.
