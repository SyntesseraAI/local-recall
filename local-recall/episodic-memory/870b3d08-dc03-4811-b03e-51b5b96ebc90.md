---
id: 870b3d08-dc03-4811-b03e-51b5b96ebc90
subject: Improved logging added to debug concurrent database access issues
keywords:
  - logging
  - debugging
  - database access
  - process identification
  - performance timing
applies_to: global
occurred_at: '2025-12-03T10:22:44.117Z'
content_hash: 7f1f16ba7a1caa2c
---
Enhanced logging was added to src/utils/database.ts and src/hooks/user-prompt-submit.ts to help debug the mutex error:

1. All log entries now include [PID:xxxx] to identify which process is executing
2. Lock acquisition logs show attempt count and elapsed time
3. sqlite-vec load timing shows separate vec load time and total initialization time
4. Hook error handling includes full stack traces and timing information for better diagnosis
5. Logger writes to 'recall.log' in the memory directory

These improvements make it easier to trace concurrent access patterns and identify where the mutex contention occurs.
