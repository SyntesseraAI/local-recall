---
id: d257c3ce-e46a-4b49-a5f7-2856eb751817
subject: Improved logging with PID and timing information for database operations
keywords:
  - logging
  - debugging
  - pid
  - performance monitoring
  - lock acquisition
applies_to: 'file:src/utils/database.ts'
occurred_at: '2025-12-21T18:20:26.357Z'
content_hash: 1d40421e0edabd0c
---
# Enhanced Database Logging

## Changes Made
1. **PID Logging**: Every log entry includes `[PID:xxxx]` to identify which process is executing
2. **Lock Acquisition Details**: Shows:
   - Attempt count when acquiring file locks
   - Elapsed time for lock acquisition
   - Named pipe path being locked
3. **sqlite-vec Load Timing**: Separate timing for:
   - Vector store load time
   - Total initialization time
   - Connection status
4. **Error Stack Traces**: Full stack traces logged on failures for better debugging

## Purpose
These improvements enable debugging of concurrent access issues and identifying which processes are accessing the database and when.
