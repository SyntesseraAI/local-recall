---
id: 6f73e6bc-27f3-40b3-98b6-f9083f6b1463
subject: UserPromptSubmit hook uses lazy-initialized vector store for semantic search
keywords:
  - user prompt submit
  - hook
  - semantic search
  - lazy initialization
applies_to: 'area:hooks'
occurred_at: '2025-12-02T12:58:50.561Z'
content_hash: c145dd8ffd4497c4
---
The UserPromptSubmit hook initializes the vector store on first use (lazy initialization, cached after first use). When triggered:

1. Receives JSON input with `session_id`, `transcript_path`, `cwd`, and `prompt`
2. Initializes or reuses the cached vector store
3. Performs semantic search using vector embeddings
4. Outputs matching memories to stdout (injected into Claude's context)

This approach balances semantic search capabilities with initialization overhead.
