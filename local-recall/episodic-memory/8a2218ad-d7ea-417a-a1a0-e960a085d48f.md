---
id: 8a2218ad-d7ea-417a-a1a0-e960a085d48f
subject: UserPromptSubmit hook searches memories before Claude processes the prompt
keywords:
  - user-prompt-submit-hook
  - fuzzy-matching
  - keyword-extraction
  - prompt-preprocessing
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T22:13:31.809Z'
content_hash: 1fd3d2acb66fcccf
---
The UserPromptSubmit hook executes before Claude processes a user prompt. It: 1) Receives JSON with `session_id`, `transcript_path`, `cwd`, and `prompt`, 2) Extracts keywords from the prompt using `claude -p` with haiku model, 3) Searches the memory index using fuzzy matching with configurable threshold (default 0.6), 4) Outputs matching memories to stdout. This dynamically injects relevant context before processing.
