---
id: 6f60d9c9-bcaa-4077-b773-3538f03e23db
subject: Memory extraction uses Claude Haiku with JSON-only output
keywords:
  - haiku model
  - memory extraction
  - json output
  - single turn
  - claude-haiku-4-5
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T19:23:52.480Z'
content_hash: 4e794d255367b086
---
The `callClaudeCLI()` method in memory-extractor.ts uses the Haiku model (`claude-haiku-4-5-20251001`) with `--max-turns 1` to ensure single-turn responses. The memory extraction prompt in `src/prompts/memory-extraction.ts` explicitly requires JSON-only output with no explanation text, markdown formatting, or code blocks - just raw valid JSON. This ensures predictable parsing and prevents issues with unexpected response formats.
