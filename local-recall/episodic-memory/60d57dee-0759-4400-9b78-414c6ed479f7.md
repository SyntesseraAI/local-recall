---
id: 60d57dee-0759-4400-9b78-414c6ed479f7
subject: >-
  MCP server daemon provides async memory creation as fallback for missing Stop
  hook
keywords:
  - mcp server
  - daemon
  - transcript processing
  - fallback
  - memory extraction
applies_to: global
occurred_at: '2025-12-21T19:30:47.202Z'
content_hash: ec40542db13a7aca
---
The MCP server runs a background daemon that processes transcripts asynchronously every 5 minutes, providing an alternative to the Stop hook for memory creation. This daemon:

1. Syncs transcripts from Claude's cache (~/.claude/projects/<project>/transcripts/)
2. Processes transcripts using `claude -p` to extract memories
3. Tracks processed transcripts with content hashes for change detection
4. Deletes and recreates memories when transcripts change
5. Runs every 5 minutes (configurable via INDEX_REFRESH_INTERVAL)

This mechanism ensures memories are eventually created even when the Stop hook is unavailable, making it the primary memory creation path for environments like VS Code extensions where hooks may not be fully supported.
