---
id: 5661ec98-fe3e-4d59-b94b-b8e9eea17f6c
subject: Memory creation is idempotent via findDuplicate check
keywords:
  - memory
  - createMemory
  - idempotent
  - duplicate detection
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T19:18:18.497Z'
content_hash: 520d0384b8ba22d5
---
Implemented `findDuplicate(occurredAt, contentHash)` method to check for existing memories before creation. The `createMemory()` function now: 1) Computes content hash, 2) Checks for duplicate with same occurred_at + content_hash, 3) Returns existing memory if found, 4) Creates new memory if not found. This ensures safe reprocessing of transcripts without creating duplicate memories.
