---
id: f64d4229-489a-42de-adfc-ccb0cc215320
subject: Claude Code hooks configuration and event handling
keywords:
  - hooks
  - claude-code
  - session-start
  - user-prompt-submit
  - hook-configuration
applies_to: global
occurred_at: '2025-12-02T11:57:20.944Z'
content_hash: 891879f8377e6d04
---
# Claude Code Hooks

## Hook Configuration
Hooks are configured in `hooks.json` and execute as shell commands receiving JSON via stdin.

## SessionStart Hook
- **Trigger**: When Claude Code session begins
- **Input**: `session_id`, `transcript_path`, `cwd`
- **Operation**: Loads all memories from disk via `MemoryManager.listMemories()`
- **Output**: 5 most recent memories (sorted by `occurred_at`) injected into Claude's context
- **Note**: Full reload on each session, vector store NOT used to avoid slow initialization

## UserPromptSubmit Hook
- **Trigger**: Before Claude processes user prompt
- **Input**: `session_id`, `transcript_path`, `cwd`, `prompt`
- **Operation**: Initializes vector store (lazy-init, cached after first use), performs semantic search
- **Output**: Matching memories injected into Claude's context

## Stop Hook (Disabled)
- Currently disabled
- Memory extraction handled by MCP server daemon processing transcripts asynchronously every 5 minutes

## Important Detail
Hooks use `${CLAUDE_PLUGIN_ROOT}` to reference scripts relative to plugin installation and receive `cwd` via stdin to operate on user's project directory.
