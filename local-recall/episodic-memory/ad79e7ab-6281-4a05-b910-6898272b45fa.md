---
id: ad79e7ab-6281-4a05-b910-6898272b45fa
subject: >-
  transcript-collector.ts needs implementation to handle Claude transcript
  format
keywords:
  - transcript-collector
  - jsonl
  - event-parsing
  - message-format
  - tool-invocations
applies_to: 'file:src/core/transcript-collector.ts'
occurred_at: '2025-12-01T16:22:54.328Z'
content_hash: 2cf3ac5451781aa9
---
# Transcript Collector Implementation Notes

The `transcript-collector.ts` file is in early stages and needs implementation for parsing Claude Code transcripts.

## Key Requirements

### JSONL Format Handling
- Claude transcripts are stored as `.jsonl` files (one JSON object per line)
- Each line represents a discrete event or message
- Must handle proper parsing of newline-delimited JSON

### Event Types to Handle
- User messages/prompts
- Assistant responses
- Tool invocations (with parameters)
- Tool results (success/error)
- System messages

### Message Structure
Transcript objects include:
- `type` - Event type (message, tool_use, tool_result, etc.)
- `role` - For messages: "user" or "assistant"
- `content` - Message text or tool invocation details
- `timestamp` - When the event occurred

### Tool Invocation Format
Tool invocations have:
- `id` - Tool invocation ID for matching with results
- `name` - Tool name (e.g., "bash", "read", "write")
- `input` - Tool parameters/arguments

### Tool Result Format
Results include:
- `tool_use_id` - Matches the invocation ID
- `content` - The result/output of the tool
- `is_error` - Boolean indicating success/failure

## Next Steps

- Implement JSONL line-by-line parsing
- Create type definitions for transcript events
- Handle both synchronous and streaming transcript processing
- Add error handling for malformed entries
- Test with actual Claude Code project transcripts
