---
id: e5eb21d3-fb13-4a9b-a4d9-d5c02043ae1c
subject: >-
  Transcript event parsing requires handling of nested JSON structures and tool
  invocations
keywords:
  - transcript
  - parsing
  - jsonl
  - events
  - tool-use
  - json
  - structure
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-01T16:28:18.287Z'
content_hash: 6220f399aa4d5432
---
# Transcript Event Parsing

When parsing `.jsonl` transcript files, events have nested structures:

## Event Types

- `user_message`: User input
  - `content`: Array of content blocks (text, tool_use, etc.)
- `assistant_message`: Claude's response
  - `content`: Array of content blocks
  - May include `tool_use` blocks with `id`, `name`, `input`
- `tool_result`: Result from a tool execution
  - `tool_use_id`: References the tool_use block it belongs to
  - `content`: The tool output
  - `is_error`: Boolean indicating if the tool failed

## Content Block Structure

Content can be:
- Text blocks: `{"type": "text", "text": "..."}`
- Tool use blocks: `{"type": "tool_use", "id": "...", "name": "...", "input": {...}}`

## Parsing Considerations

- Tool invocations may have JSON input that needs to be parsed
- Tool results can be strings or structured data
- Error results should be handled differently from successful results
- Events maintain ordering for proper reconstruction of conversation flow
