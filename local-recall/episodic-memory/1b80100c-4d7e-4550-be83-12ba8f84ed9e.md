---
id: 1b80100c-4d7e-4550-be83-12ba8f84ed9e
subject: >-
  Claude Code hooks configuration: SessionStart loads index, UserPromptSubmit
  searches, Stop disabled
keywords:
  - hooks
  - session start
  - user prompt submit
  - stop hook
  - json stdin
applies_to: 'area:hooks'
occurred_at: '2025-12-02T11:26:07.551Z'
content_hash: c888b448ee1b4be7
---
Three hook types are configured in `hooks.json`, receiving JSON via stdin:

1. **SessionStart Hook** (active)
   - Loads memory index from `local-recall/index.json`
   - Retrieves relevant memories based on current context
   - Outputs memory content to stdout (injected into Claude's context)

2. **UserPromptSubmit Hook** (active)
   - Receives JSON with `session_id`, `transcript_path`, `cwd`, `prompt`
   - Extracts keywords from user prompt using Claude Haiku
   - Searches memory index for matching keywords (fuzzy)
   - Outputs matching memories to stdout

3. **Stop Hook** (disabled)
   - Currently disabled in favor of MCP server daemon
   - MCP server processes transcripts asynchronously every 5 minutes
   - Handles memory extraction from Claude's conversation history
