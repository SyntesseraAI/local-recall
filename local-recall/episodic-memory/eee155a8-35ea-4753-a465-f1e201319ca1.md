---
id: eee155a8-35ea-4753-a465-f1e201319ca1
subject: >-
  Memory extraction uses Claude Haiku with structured prompt for markdown YAML
  frontmatter generation
keywords:
  - memory extraction
  - claude haiku
  - yaml frontmatter
  - prompt engineering
  - memory-extractor
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-02T01:43:19.645Z'
content_hash: 30a1c09f3bd02a37
---
The memory extraction system in `src/core/memory-extractor.ts` uses Claude Haiku via the `claude -p` command to analyze transcripts and generate memories. The extraction process:

1. Passes transcript content to a structured prompt that instructs Claude to generate memories in markdown format with YAML frontmatter
2. Each memory includes:
   - id: UUID
   - subject: Brief description
   - keywords: Array of searchable terms
   - applies_to: Scope (global, file:<path>, area:<name>)
   - occurred_at: ISO-8601 timestamp
   - content_hash: SHA-256 prefix
3. The prompt is designed to ensure consistent, well-formed output that can be reliably parsed
4. Uses `parseMemoriesFromMarkdown()` to extract individual memory blocks from Claude's response
5. Each generated memory is validated before being stored

This approach allows transcript analysis to be done asynchronously and efficiently without requiring manual curation.
