---
id: d510950f-5a40-4b8b-9074-1a1c5a1b494f
subject: >-
  Memory deduplication uses content_hash (16-char SHA-256 prefix) for collision
  detection
keywords:
  - deduplication
  - content-hash
  - sha256
  - duplicate-detection
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T19:40:43.728Z'
content_hash: 9c60dbe3d2525a4b
---
Memory files include a `content_hash` field (16-character SHA-256 prefix) used for deduplication:

- `findDuplicate(occurredAt, contentHash)` checks for existing memory with same hash + timestamp
- This prevents duplicate memories from being created
- The hash is calculated from the memory content body
- Used in conjunction with `occurred_at` timestamp for precise duplicate detection

This is critical for recovery from concurrent write issues - if the same transcript is processed twice, the content_hash ensures we don't create duplicate memories.
