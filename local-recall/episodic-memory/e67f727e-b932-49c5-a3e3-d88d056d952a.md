---
id: e67f727e-b932-49c5-a3e3-d88d056d952a
subject: Memory extraction should use structured Zod schemas for validation
keywords:
  - zod
  - validation
  - schema
  - memory-extraction
  - type-safety
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:13:32.843Z'
content_hash: 117fdb4f3a203c05
---
## Pattern
When extracting memories from Claude's responses, use Zod schemas to validate and parse the result. This ensures:
- Type safety at runtime
- Clear error messages when validation fails
- Ability to handle multiple input formats gracefully

## Implementation
Define a Zod schema for the memory extraction response that can handle:
- Arrays of memories (raw)
- Objects with `memories` property (wrapped)
Then use `schema.parse()` or `schema.safeParse()` to validate Claude's output.
