---
id: 4c9f6a72-87cd-42de-ab1d-d0f448a0538e
subject: 'Memory extraction happens asynchronously in MCP daemon, not on Stop hook'
keywords:
  - mcp-daemon
  - memory-extraction
  - transcript-processing
  - background-job
applies_to: 'area:mcp-server'
occurred_at: '2025-12-02T12:16:44.332Z'
content_hash: 7deef46444171c0e
---
The Stop hook is disabled. Instead, the MCP server daemon processes transcripts asynchronously every 5 minutes. It:
- Syncs from Claude's cache (`~/.claude/projects/<project>/transcripts/`)
- Uses `claude -p` to extract memories
- Tracks processed transcripts with content hashes for change detection
- Deletes and recreates memories when transcripts change
