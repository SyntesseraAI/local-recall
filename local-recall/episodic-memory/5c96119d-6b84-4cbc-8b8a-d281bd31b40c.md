---
id: 5c96119d-6b84-4cbc-8b8a-d281bd31b40c
subject: >-
  Local Recall MCP server runs as background daemon for async transcript
  processing
keywords:
  - mcp
  - server
  - daemon
  - transcript
  - processing
  - background
  - async
applies_to: 'area:mcp-server'
occurred_at: '2025-12-02T21:51:43.715Z'
content_hash: 9d349af2866894a1
---
# MCP Server Background Daemon

The Local Recall MCP server includes a background daemon that processes transcripts asynchronously every 5 minutes.

## Key Points

1. **Async Processing**: The Stop hook is disabled - memory extraction is handled by the MCP server daemon instead
2. **5-Minute Cycle**: The daemon runs periodically to process transcripts
3. **Transcript Syncing**: It syncs transcripts from Claude's cache (`~/.claude/projects/<project>/transcripts/`)
4. **Memory Extraction**: Processes transcripts using `claude -p` to extract memories
5. **Change Detection**: Tracks processed transcripts with content hashes to detect changes
6. **Idempotency**: Deletes and recreates memories when transcripts change

## Process Flow

1. Daemon collects transcripts from Claude's cache
2. Condensed transcripts are created for processing
3. Claude (via `claude -p`) extracts memories from condensed transcripts
4. Memories are created/updated in the memory store
5. Processed transcript metadata is tracked to avoid reprocessing
