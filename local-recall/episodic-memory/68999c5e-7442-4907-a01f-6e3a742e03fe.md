---
id: 68999c5e-7442-4907-a01f-6e3a742e03fe
subject: >-
  Memory extraction occurs from condensed transcripts during user prompt
  submission
keywords:
  - memory-extraction
  - transcript-condensing
  - user-prompt-submit
  - keywords
  - haiku
  - hook
applies_to: global
occurred_at: '2025-12-02T07:04:37.454Z'
content_hash: 4495ddf5625d1fd7
---
# Memory Extraction from Condensed Transcripts

The user-prompt-submit hook extracts keywords from the current user prompt using Claude Haiku and searches the memory index for relevant memories to inject into the context.

## Process

1. User submits a prompt
2. Hook receives the prompt text
3. Claude Haiku (via `claude -p`) extracts keywords from the prompt
4. Keywords are searched against the memory index using fuzzy matching
5. Matching memories are output to inject Claude's context

## Key Implementation Detail

The transcript is condensed before being passed to memory extraction to reduce token usage. The condensed format includes markers like `[User]`, `[Assistant]`, `[Tool: Name]`, and `[Result: OK/ERROR]` to represent the session flow compactly.

This allows efficient keyword extraction without processing the full raw transcript.
