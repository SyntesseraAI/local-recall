---
id: 0b38a5d9-1307-4cd3-97e4-c2c045225451
subject: >-
  User prefers extracting memories from transcripts asynchronously via MCP
  daemon rather than synchronously in Stop hook
keywords:
  - memory-extraction
  - transcript
  - async
  - mcp-server
  - daemon
  - stop-hook
  - performance
applies_to: global
occurred_at: '2025-12-01T15:56:11.325Z'
content_hash: 0c5272bf7876621e
---
# Memory Extraction Strategy

## User's Preference
The user/project has chosen to handle memory extraction asynchronously via an MCP server daemon that runs every 5 minutes, rather than synchronously in the Stop hook.

## Reasoning
- Stop hook is currently disabled in the project
- MCP daemon processes transcripts periodically instead
- This allows for non-blocking memory extraction
- Reduces latency at the end of each session

## Implementation Details
- Daemon runs every 5 minutes (configurable)
- Tracks processed transcripts using content hashes
- Deletes and recreates memories when transcripts change
- Handles transcript collection from Claude's cache directory

## Implications for Development
- Don't re-enable the Stop hook without understanding the performance impact
- Memory creation from transcripts is not synchronous with session end
- Memories may lag behind transcript events by up to 5 minutes
- The daemon approach scales better with multiple concurrent sessions
