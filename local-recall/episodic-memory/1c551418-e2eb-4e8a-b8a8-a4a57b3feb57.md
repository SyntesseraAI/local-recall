---
id: 1c551418-e2eb-4e8a-b8a8-a4a57b3feb57
subject: Memory creation requires transcript parsing and conversation analysis
keywords:
  - memory extraction
  - transcript parsing
  - conversation analysis
  - stop hook
  - memory creation
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-21T19:02:06.379Z'
content_hash: edb00a23ada4dc2b
---
# Memory Creation Process

Memories are created by:
1. Reading the transcript file from the hook input
2. Parsing conversation events using `src/utils/transcript.ts`
3. Analyzing user/assistant exchanges for extractable memories
4. Creating memory files with YAML frontmatter and markdown content

The Stop hook (`src/hooks/stop.ts`) implements this process at lines 77-108:
- Validates the prompt contains `[LOCAL_RECALL_INTERNAL]` marker
- Reads and parses the transcript
- Calls memory extraction logic
- Returns created memories

This process is independent of the vector store - it creates markdown files that are later indexed.
