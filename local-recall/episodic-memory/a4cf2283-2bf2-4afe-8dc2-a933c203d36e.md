---
id: a4cf2283-2bf2-4afe-8dc2-a933c203d36e
subject: >-
  Thinking extractor now deduplicates streaming artifacts to improve memory
  quality
keywords:
  - thinking-extractor
  - deduplication
  - memory quality
  - implementation
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T19:23:20.556Z'
content_hash: 05d048830197d419
---
Modified lines 146-148 of thinking-extractor.ts to deduplicate thinking and text parts before joining them. Uses `[...new Set(array)]` to remove duplicate blocks caused by streaming artifacts. This prevents memories from containing repeated content while maintaining all unique thinking blocks. All 288 tests pass after this change.
