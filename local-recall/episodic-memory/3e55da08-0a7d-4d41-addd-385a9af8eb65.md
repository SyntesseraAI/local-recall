---
id: 3e55da08-0a7d-4d41-addd-385a9af8eb65
subject: 'Thinking memory hook returns 10 items default, up to 25 if similarity > 90%'
keywords:
  - thinking hook
  - similarity threshold
  - result limit
  - high similarity
applies_to: 'file:src/hooks/user-prompt-submit-thinking.ts'
occurred_at: '2025-12-21T18:15:46.377Z'
content_hash: cbb1f90a3ea47821
---
Modified the thinking memory hook (lines 77-98) to use tiered result filtering:
- Fetches up to 25 candidate results from vector search
- Returns first 10 items by default (DEFAULT_LIMIT = 10)
- Includes items 11-25 only if their similarity score >= 0.90 (HIGH_SIMILARITY_THRESHOLD)

This provides a good baseline of diverse thinking examples while allowing highly relevant high-similarity items to expand the context window when appropriate.
