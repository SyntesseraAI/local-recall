---
id: 8c9fab53-bb5f-4934-9df0-a950e0eca4ff
subject: >-
  Memory extraction uses claude-haiku-4-5 with single-turn constraint and
  JSON-only output
keywords:
  - memory extraction
  - haiku model
  - json output
  - single turn
  - claude cli
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T18:29:11.578Z'
content_hash: d7a74512a1889a15
---
Memory extraction via `callClaudeCLI()` now uses:
- Model: `claude-haiku-4-5` (faster, cheaper than Sonnet)
- Max turns: 1 (prevents multi-turn conversation)
- Timeout: 10 minutes (600000ms, increased from 2 minutes)
- Output: JSON-only format enforced in prompt

The `claude` CLI is invoked with `--model haiku --max-turns 1`. The prompt explicitly requires returning ONLY valid JSON with no additional text or explanation.
