---
id: 286c8ac6-982c-4266-ad47-13582f660f75
subject: Plugin hooks updated to use Orama instead of better-sqlite3
keywords:
  - hooks
  - plugin
  - orama
  - better-sqlite3
  - refactoring
  - stale-code
applies_to: 'area:plugin'
occurred_at: '2025-12-21T19:21:22.678Z'
content_hash: 13d0aba935cfafce
---
The dev-marketplace/local-recall-plugin had stale hook files that tried to import `better-sqlite3`, a native module that cannot be bundled. The main codebase migrated to Orama (pure JavaScript vector store) but the plugin still referenced old SQLite-based hooks. Fixed by:

1. Deleted stale file: `dev-marketplace/local-recall-plugin/scripts/hooks/user-prompt-submit-thinking.js`
2. Updated `hooks.json` to point to `user-prompt-submit.js` (which handles both episodic and thinking memories using Orama)
3. Rebuilt plugin scripts to ensure consistency with main source

This prevented ERR_MODULE_NOT_FOUND errors when hooks tried to run.
