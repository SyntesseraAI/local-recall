---
id: b58e43a2-563c-43ff-8522-3e4642c14ad1
subject: 'Memory extraction happens via MCP server daemon, not Stop hook'
keywords:
  - memory-extraction
  - mcp-server
  - transcript
  - daemon
  - stop-hook
  - async
applies_to: global
occurred_at: '2025-12-01T16:19:22.293Z'
content_hash: a61109def71ac5f9
---
The Stop hook is currently disabled. Instead, memory extraction is handled asynchronously by the MCP server daemon, which:

1. Runs every 5 minutes
2. Syncs transcripts from Claude's cache at `~/.claude/projects/<project>/transcripts/`
3. Processes transcripts using `claude -p` to extract memories
4. Tracks processed transcripts with content hashes for change detection
5. Deletes and recreates memories when transcripts change

**Why this approach:** The async daemon approach allows memory extraction to happen without blocking Claude, and prevents the recursion issue that would occur if the Stop hook directly called `claude -p`.
