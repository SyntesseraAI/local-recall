---
id: 94912a6b-8d75-4fb8-b124-ce1dd2f20049
subject: >-
  Memory extraction from Claude transcripts uses parseTranscriptForMemories
  function to parse JSONL format
keywords:
  - transcript
  - parsing
  - jsonl
  - memory-extraction
  - stop-hook
  - claude-output
applies_to: 'file:src/utils/transcript.ts'
occurred_at: '2025-12-02T02:01:53.640Z'
content_hash: 9fd5efd866b53299
---
The `parseTranscriptForMemories()` function in src/utils/transcript.ts (lines 377-413) is the core function for extracting memories from Claude Code session transcripts.

**Key Implementation Details**:
- Takes raw JSONL transcript content as input
- Returns array of `ExtractedMemory` objects with: subject, keywords, applies_to, content
- Parses JSONL format where each line is a separate event (User, Assistant, Tool)
- Filters for 'Assistant' turns only to find memory content
- Handles multiline messages correctly
- Memory content is extracted from Assistant responses

**Used By**:
- Stop hook (src/hooks/stop.ts) - processes transcripts asynchronously
- MCP server - background daemon processes transcripts every 5 minutes

**Important**: This function is critical for the memory lifecycle and should be kept robust when modifying transcript parsing logic.
