---
id: 7ce989bc-421e-4ce1-8bcf-137456b552b7
subject: MCP server background daemon implementation details for transcript processing
keywords:
  - mcp
  - daemon
  - transcript
  - processing
  - memory
  - extraction
  - background
  - sync
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T16:08:30.728Z'
content_hash: 54fbc0f882ec7ca7
---
# MCP Server Background Daemon

## Purpose

The MCP server runs a background daemon that processes transcripts asynchronously every 5 minutes instead of using the Stop hook.

## Current Implementation Status

The Stop hook is currently disabled. The background daemon is responsible for:
1. Syncing transcripts from Claude's cache (`~/.claude/projects/<project>/transcripts/`)
2. Processing transcripts using `claude -p` to extract memories
3. Tracking processed transcripts with content hashes for change detection
4. Deleting and recreating memories when transcripts change
5. Running every 5 minutes

## Key Implementation Details

- Transcripts are located at: `~/.claude/projects/Users-joe-Code-Syntessera-local-recall/transcripts/`
- Transcripts are in JSONL format (newline-delimited JSON)
- Each line is a complete JSON object with `type` and `content` fields
- The daemon must handle partial or incomplete transcripts gracefully
- Content hashing is used for efficient change detection and deduplication
