---
id: 23216876-51ee-48ae-a062-fd8c79b8e663
subject: Hooks executing but returning empty stdout - memory not injected into context
keywords:
  - hooks
  - sessionstart
  - userpromptsubmit
  - stdout
  - memory injection
  - debugging
applies_to: global
occurred_at: '2025-12-21T18:16:52.189Z'
content_hash: 73687130908070ad
---
## Problem Identified

Both SessionStart and UserPromptSubmit hooks are executing successfully (no errors in logs) but returning completely empty stdout and stderr. This prevents memory content from being injected into Claude's context.

## Hook Execution Status

- **SessionStart hook**: Runs without errors, but produces no output
- **UserPromptSubmit hook**: Runs without errors, but produces no output
- **Hook logs**: Show `hook_response: ""` (empty string)

## Investigation Steps Taken

1. Verified hooks are configured correctly in `.claude/settings.json`
2. Checked that compiled hook files exist in `dist/hooks/`
3. Confirmed Ollama is running and accessible
4. Verified memory files exist in `local-recall/episodic-memory/`
5. Tested manual hook execution by running compiled JS files directly

## Next Steps for Resolution

- Add explicit logging to hook entry points (session-start.ts and user-prompt-submit.ts)
- Verify that hook code is actually executing (not being skipped due to errors)
- Check if memory file reading and formatting is working correctly
- Confirm Ollama embedding calls are completing successfully
- Verify memory search results are being generated and formatted properly
- Test hook output formatting to ensure it's valid JSON or plain text as expected
