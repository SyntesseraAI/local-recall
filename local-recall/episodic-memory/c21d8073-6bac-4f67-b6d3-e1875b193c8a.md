---
id: c21d8073-6bac-4f67-b6d3-e1875b193c8a
subject: 'Migration from markdown to JSONL only updated code, not running processes'
keywords:
  - migration
  - jsonl
  - markdown
  - backward-compatibility
  - process-management
applies_to: global
occurred_at: '2025-12-21T19:43:40.140Z'
content_hash: c916d7f8c8d056ee
---
# Migration Process Gap: Stale Code Execution

## Issue
The migration from markdown (.md) to JSONL format updated the TypeScript source code but didn't account for:
1. **Running processes** - Old MCP server instances continue executing
2. **Plugin cache** - Stale compiled versions remain in ~/.claude/plugins/cache/
3. **Process visibility** - `ps aux | grep` showed multiple mcp-server instances from different versions

## Code vs Reality
- Source code in `src/` uses JSONL stores correctly
- Compiled `dist/` files are up-to-date
- BUT plugin cache versions (0.1.6) still have old `serializeMemory` function
- Running old processes ignore code updates

## Lesson
When migrating data formats:
- Update source AND verify running processes are killed
- Clear plugin caches and temporary build artifacts
- Document process restart requirements for migration
- Consider adding version checks or deprecation warnings in old code paths
