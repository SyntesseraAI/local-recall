---
id: 17eb4adc-6ebd-4d11-95bf-65dfa68b29b6
subject: >-
  Memory extractor implementation uses Claude API with streaming for efficient
  processing
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - transcript-processing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:30:29.161Z'
content_hash: 2964bfb2db7cc5ac
---
The memory extractor in `memory-extractor.ts` uses the Anthropic SDK to call Claude's API with streaming enabled for processing transcripts. The implementation extracts memories from session transcripts by sending them to Claude along with a system prompt defined in `src/prompts/memory-extraction.ts`. Key implementation details:

- Uses `anthropic.messages.stream()` for efficient streaming responses
- Extracts memories from the condensed transcript format with events like `[User]`, `[Assistant]`, `[Tool: Name]`, and `[Result: OK/ERROR]`
- Parses the streamed response to extract structured memory objects
- Handles both successful extraction and edge cases where no memories are extracted
