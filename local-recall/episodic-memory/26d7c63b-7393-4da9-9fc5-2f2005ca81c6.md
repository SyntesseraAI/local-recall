---
id: 26d7c63b-7393-4da9-9fc5-2f2005ca81c6
subject: 'Memory creation pipeline architecture: Stop hook vs MCP daemon'
keywords:
  - memory creation
  - stop hook
  - mcp daemon
  - transcript processing
  - architecture
applies_to: global
occurred_at: '2025-12-21T19:03:16.962Z'
content_hash: d7c006b6fda286e8
---
Local Recall has two paths for creating memories:

1. **Stop Hook Path** (`src/hooks/stop.ts`): Triggered when Claude Code session ends, parses transcript and creates memories immediately. Does NOT work in VS Code extension.

2. **MCP Daemon Path**: Background daemon in MCP server that processes transcripts asynchronously every 5 minutes. Works everywhere because it's a separate process.

The Stop hook is documented as the primary memory creation mechanism in CLAUDE.md, but the MCP daemon is the reliable fallback that works across all platforms and extensions. Understanding both paths is important for debugging memory creation issues.
