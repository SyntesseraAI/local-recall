---
id: f653b7c6-a99c-4055-997c-352656f76eed
subject: >-
  Memory deduplication uses occurred_at timestamp and content_hash to prevent
  duplicate memories
keywords:
  - deduplication
  - memory
  - occurred_at
  - content_hash
  - findDuplicate
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T16:27:05.858Z'
content_hash: 041e8ef389639a93
---
# Memory Deduplication Strategy

The memory system prevents duplicate memories using two fields:

1. **occurred_at**: ISO-8601 timestamp of when the original event occurred
2. **content_hash**: SHA-256 hash prefix (16 chars) of the memory content

## How It Works

Before creating a new memory, call `findDuplicate(occurredAt, contentHash)` to check if a memory with the same timestamp and content hash already exists.

If a duplicate is found, the system returns the existing memory instead of creating a new one. This prevents multiple memories from being created for the same event across sessions.

## Implementation Details

The `findDuplicate` function scans the episodic-memory directory looking for memories with matching occurred_at and content_hash values.
