---
id: 1947be1b-fc57-49a3-a016-9406d8c58aa9
subject: >-
  UserPromptSubmit hook performs unified semantic search across episodic and
  thinking memories
keywords:
  - userpromptsubmit-hook
  - semantic-search
  - memory-retrieval
  - context-injection
applies_to: 'area:hooks'
occurred_at: '2025-12-21T18:21:10.507Z'
content_hash: e727ae2a49c14a28
---
The UserPromptSubmit hook is a unified hook that:
1. Skips internal prompts containing `[LOCAL_RECALL_INTERNAL]`
2. Searches both episodic memories (if episodicEnabled) and thinking memories (if thinkingEnabled)
3. Filters by similarity threshold and token budget
4. Combines results and injects into Claude's context

Configuration options:
- episodicMaxTokens (default: 1000)
- episodicMinSimilarity (default: 0.5)
- thinkingMaxTokens (default: 1000)
- thinkingMinSimilarity (default: 0.5)
