---
id: 20666d68-3faf-4ca1-9f38-8672d21db27b
subject: Hooks check configuration flags to control memory injection and extraction
keywords:
  - hooks
  - user-prompt-submit
  - session-start
  - configuration checks
  - conditional logic
applies_to: global
occurred_at: '2025-12-21T19:21:42.416Z'
content_hash: cc8ec04218582fe0
---
The following hooks were updated to respect the new environment flags:

1. `user-prompt-submit.ts` - Checks `episodicEnabled` before searching/injecting episodic memories
2. `user-prompt-submit-thinking.ts` - Checks `thinkingEnabled` before searching/injecting thinking memories
3. `session-start.ts` - Checks `episodicEnabled` before loading recent memories on session initialization
4. MCP server `server.ts` - Checks both flags before enabling extraction/processing in background daemon

This allows fine-grained control over which memory systems are active without modifying code.
