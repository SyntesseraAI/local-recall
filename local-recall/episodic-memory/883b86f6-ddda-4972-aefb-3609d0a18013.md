---
id: 883b86f6-ddda-4972-aefb-3609d0a18013
subject: 'Transcript parsing architecture: consolidate in transcript.ts, not stop.ts'
keywords:
  - transcript
  - parsing
  - architecture
  - refactoring
  - stop.ts
  - transcript.ts
applies_to: global
occurred_at: '2025-12-21T18:26:21.981Z'
content_hash: 4f38ff26d2d9d7ec
---
The transcript parsing should be centralized in `transcript.ts` as a single function `parseTranscriptForMemories(rawContent)` that takes raw JSONL content and returns memory suggestions. The `stop.ts` hook should then simply: 1) read the file, 2) call `parseTranscriptForMemories()`, 3) save the results. This removes duplicate parsing logic and allows the same functionality to be reused elsewhere in the codebase.

This prevents bugs from emerging when parsing logic changes - there's only one place to update.
