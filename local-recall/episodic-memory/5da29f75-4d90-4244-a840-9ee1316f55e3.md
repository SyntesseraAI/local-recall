---
id: 5da29f75-4d90-4244-a840-9ee1316f55e3
subject: Memory deduplication using occurred_at timestamp and content_hash
keywords:
  - deduplication
  - occurred_at
  - content_hash
  - idempotent
  - duplicate-detection
applies_to: global
occurred_at: '2025-12-02T16:54:09.686Z'
content_hash: 51a221005af0d3be
---
Memory creation is idempotent with deduplication via:

- **content_hash**: SHA-256 prefix (16 chars) of memory content for content-based deduplication
- **occurred_at**: ISO-8601 timestamp of when original event occurred, used for:
  - Deduplication (findDuplicate checks both occurred_at and content_hash)
  - Sorting in search results (recency tie-breaker when scores equal)
  - Tracking transcript changes (processed-log.ts uses content hashes for change detection)
- **createMemory** returns existing memory if duplicate detected instead of creating new one
- Transcript processor deletes and recreates memories when transcripts change
