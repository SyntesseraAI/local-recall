---
id: 58a02814-c8a4-404e-baf2-2bcf49ed3cb5
subject: Memory deduplication uses occurred_at timestamp and content_hash fields
keywords:
  - memory
  - deduplication
  - occurred_at
  - content_hash
  - idempotent
  - duplicate-detection
applies_to: global
occurred_at: '2025-12-01T15:58:22.841Z'
content_hash: ed64d246b7f9bca7
---
# Memory Deduplication Strategy

Memories use two fields for deduplication in the `findDuplicate()` function:

## Deduplication Fields

1. **occurred_at**: ISO-8601 timestamp of when the original event occurred
   - Used for temporal deduplication
   - Helps identify memories from the same session/time period

2. **content_hash**: SHA-256 hash prefix (16 characters) of the memory content
   - Used for content-based deduplication
   - Prevents creating memories with identical content

## CRD Pattern (No Update)

Memories follow a create-read-delete pattern:
- New memories check for duplicates before creation
- If a duplicate exists, the function returns the existing memory instead of creating a new one
- Memories are not updated - if content needs to change, the old one is deleted and a new one created
- This idempotent approach prevents memory versioning complexity

This design enables safe, repeatable memory creation even when called multiple times with the same data.
