---
id: 6299968b-a526-42a2-a696-940647896128
subject: ProcessedLog refactored to JSONL format with append-only operations
keywords:
  - processed-log
  - jsonl
  - append-only
  - performance
  - architecture
applies_to: 'file:src/core/processed-log.ts'
occurred_at: '2025-12-21T19:11:11.958Z'
content_hash: a1b1a225b356f445
---
The ProcessedLog implementation was migrated from JSON to JSONL format for cleaner, faster, and append-only operations:

- Each entry is a single JSON line with `action: "add"` or `action: "remove"`
- `recordProcessed()` appends an "add" entry
- `removeEntry()` appends a "remove" entry
- On load, the file is replayed to reconstruct current state
- Added `compact()` method to defragment the file when needed

Benefits: No need for pretty-printing, append-only means no rewrites, faster I/O, simpler to reason about state transitions.
