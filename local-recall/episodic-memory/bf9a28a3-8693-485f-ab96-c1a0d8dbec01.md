---
id: bf9a28a3-8693-485f-ab96-c1a0d8dbec01
subject: MCP server background daemon uses claude -p for memory extraction
keywords:
  - mcp-server
  - memory-extraction
  - claude-prompt
  - transcript-processing
  - daemon
applies_to: 'area:mcp-server'
occurred_at: '2025-12-01T15:54:43.277Z'
content_hash: 10a0c2a6635712f2
---
# MCP Server Background Daemon Memory Extraction

The MCP server's background daemon uses the `claude -p` command to extract memories from transcripts.

## Key Details

- The daemon runs every 5 minutes
- It syncs transcripts from `~/.claude/projects/<project>/transcripts/`
- Uses `claude -p --model haiku` for memory extraction (consistent with user-prompt-submit hook)
- Tracks processed transcripts using content hashes for change detection
- Deletes and recreates memories when transcripts change
- This is the primary mechanism for memory creation (Stop hook is disabled)

This design allows asynchronous, background memory extraction without blocking Claude Code operations.
