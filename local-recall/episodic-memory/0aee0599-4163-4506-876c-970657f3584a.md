---
id: 0aee0599-4163-4506-876c-970657f3584a
subject: >-
  Transcript processing is asynchronous via MCP daemon, not synchronous via Stop
  hook
keywords:
  - mcp
  - daemon
  - async
  - stop-hook
  - disabled
  - 5-minute
  - batch
applies_to: 'area:transcript-collector'
occurred_at: '2025-12-02T21:32:54.298Z'
content_hash: 5de594ef7af93c42
---
# Asynchronous Transcript Processing

The Stop hook is intentionally disabled. Memory extraction happens via an asynchronous MCP server daemon instead.

## Architecture Decision

- **Old approach**: Stop hook processes transcripts synchronously when Claude Code closes
- **Current approach**: MCP daemon runs continuously and processes transcripts every 5 minutes

## Benefits

- **Non-blocking**: Transcript processing doesn't block Claude Code shutdown
- **Batch processing**: Multiple transcripts can be processed together
- **Resilient**: Failed processing doesn't interrupt user workflow
- **Scalable**: Background processing can handle slower embedding operations

## How It Works

1. The MCP server daemon runs continuously (when active)
2. Every 5 minutes, it checks for new/modified transcripts in `~/.claude/projects/<project>/transcripts/`
3. Uses content hashing to detect changes (tracked in processed-log)
4. Processes new transcripts to extract memories
5. Creates new memory files or updates existing ones

## Important Notes

- The Stop hook is disabled and should NOT be configured
- Memory extraction is handled entirely by the daemon
- The daemon uses Claude's `claude -p` command to analyze transcripts
- This design avoids blocking the user's workflow during expensive operations
