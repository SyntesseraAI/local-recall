---
id: e42cc332-cb30-4f43-adca-f28739bc8eb5
subject: New token budget and similarity threshold configuration for memory retrieval
keywords:
  - token budget
  - similarity threshold
  - max tokens
  - min similarity
  - config
applies_to: global
occurred_at: '2025-12-21T19:00:54.454Z'
content_hash: 1cbbccb2869baa1a
---
Added four new configuration options in `src/core/types.ts` and corresponding environment variables in `src/utils/config.ts`:
- `episodicMaxTokens` (env: `LOCAL_RECALL_EPISODIC_MAX_TOKENS`, default: 1000)
- `episodicMinSimilarity` (env: `LOCAL_RECALL_EPISODIC_MIN_SIMILARITY`, default: 0.8)
- `thinkingMaxTokens` (env: `LOCAL_RECALL_THINKING_MAX_TOKENS`, default: 1000)
- `thinkingMinSimilarity` (env: `LOCAL_RECALL_THINKING_MIN_SIMILARITY`, default: 0.8)

Both similarity thresholds default to 80% (0.8) to filter out low-relevance results, while token budgets control how much memory content is injected per memory type.
