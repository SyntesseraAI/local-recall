---
id: bc4323f6-1d80-43fa-84b9-6b498695d1a3
subject: >-
  Transcript collector background daemon runs every 5 minutes to extract
  memories
keywords:
  - mcp-server
  - background-daemon
  - transcript-collector
  - memory-extraction
  - async
applies_to: global
occurred_at: '2025-12-01T15:56:51.922Z'
content_hash: dade01dcc7f8bbdd
---
# Transcript Collector Background Daemon

The local-recall MCP server includes a background daemon that automatically processes Claude transcripts.

## Execution

- Runs every 5 minutes
- Processes transcripts from `~/.claude/projects/{project}/transcripts/`
- Extracts memories asynchronously without blocking other MCP operations

## Processing Pipeline

1. Scans Claude's transcript directory for `.jsonl` files
2. Tracks processed transcripts using content hashes (SHA-256)
3. For new or changed transcripts:
   - Condenses transcript into summary format
   - Uses `claude -p` (Claude Haiku) to extract memories
   - Creates memory files in `local-recall/episodic-memory/`
4. On transcript change: deletes old memories and recreates them

## Key Implementation Details

- Content hash comparison prevents reprocessing unchanged transcripts
- Uses Claude Haiku's `-p` option (piped input) for efficient processing
- Memory creation is idempotent - duplicates based on `occurred_at` and `content_hash`
- Stop hook is disabled - this daemon replaces it for production use
