---
id: 81b234a5-20a6-42f8-b7bd-c1cb7d6c2d42
subject: Memory extraction system uses Claude Haiku via stdin for transcript analysis
keywords:
  - memory-extractor
  - claude-haiku
  - transcript-processing
  - stdin
  - extraction-prompt
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:02:53.231Z'
content_hash: 6bb37a8b53550797
---
The memory extraction system in `memory-extractor.ts` uses Claude Haiku model to analyze transcripts and extract valuable memories. The system:

1. Reads condensed transcripts from the MCP server's cache
2. Sends transcript content to Claude Haiku via stdin with a structured extraction prompt
3. Parses JSON response containing extracted memories
4. Validates memory structure (id, subject, keywords, applies_to, occurred_at, content_hash)
5. Creates or updates memory files in the episodic-memory directory

The extraction prompt is defined in `src/prompts/memory-extraction.ts` and provides Claude with guidelines for what makes valuable memories in the context of this codebase.
