---
id: 9b3d27de-271c-4b7b-8ca7-5d9bcfd05d5a
subject: >-
  UserPromptSubmit hook uses lazy-initialized vector store for semantic search
  on prompts
keywords:
  - user-prompt-submit-hook
  - semantic-search
  - lazy-initialization
  - vector-store-caching
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-02T17:11:27.906Z'
content_hash: 0e47f3733769aad9
---
The UserPromptSubmit hook initializes the vector store lazily (only on first use) to keep it cached across multiple prompts. It performs semantic search using vector embeddings when a user submits a prompt and outputs matching memories to Claude's context. The hook receives session_id, transcript_path, cwd, and the user's prompt as JSON input.
