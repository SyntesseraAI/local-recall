---
id: ac6b7839-51d7-4f13-af57-ed6f1ca4a2e2
subject: >-
  Memory extraction parsing handles alternative field names from Claude
  responses
keywords:
  - memory-extractor
  - field-normalization
  - claude-haiku
  - parsing
  - zod-validation
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:06:56.789Z'
content_hash: 3fcaa3f92c73e198
---
The memory extractor in `src/core/memory-extractor.ts` was failing validation when Claude Haiku returned memories with alternative field names. Fixed by adding field name normalization that maps common variations to expected field names:

- `title` → `subject`
- `tags` → `keywords`
- `scope` → `applies_to`
- `body`, `description`, `memory` → `content`

This normalization is applied at lines 179-186 in the `parseClaudeResponse` function before Zod validation, making the parser more robust to different Claude response formats.

The fix allows the memory extractor to handle cases where Claude returns valid memory data but with slightly different field naming conventions.
