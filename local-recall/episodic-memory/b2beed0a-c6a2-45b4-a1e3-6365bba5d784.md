---
id: b2beed0a-c6a2-45b4-a1e3-6365bba5d784
subject: >-
  Memory deduplication uses occurred_at timestamp and content_hash to prevent
  duplicates
keywords:
  - deduplication
  - findDuplicate
  - content_hash
  - occurred_at
  - duplicate prevention
  - memory creation
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T19:38:57.499Z'
content_hash: 7d04a3edf9426e4f
---
The MemoryManager implements duplicate prevention at creation time through the `findDuplicate()` method (lines 52-67 in `src/core/memory.ts`):

- Before creating a new memory, the system checks if one with the same `occurred_at` timestamp AND `content_hash` already exists
- If a duplicate is found, the existing memory is returned instead of creating a new one
- This is the only deduplication mechanism in the system

Note: There is NO automatic compaction or cleanup of memories. The system has a `maxMemories` configuration option (in `src/utils/config.ts`) but it appears to be configured but not actively enforced for cleanup. Memories accumulate over time and must be manually managed.
