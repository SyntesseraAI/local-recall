---
id: 3484afc4-f8ac-4323-8156-d9337d1b7246
subject: Memory extraction uses transcript condensing to improve Claude's analysis
keywords:
  - transcript-condensing
  - memory-extraction
  - mcp-server
  - token-efficiency
  - claude-prompt
applies_to: global
occurred_at: '2025-12-01T16:09:02.422Z'
content_hash: a35a80e64a539d2c
---
# Transcript Condensing for Memory Extraction

## Purpose

Transcript condensing was implemented to reduce the size of transcripts sent to Claude for memory extraction. This improves:
- Token efficiency (important for prompt costs)
- Processing speed
- Claude's ability to focus on important events

## Process

1. Raw transcript from Claude's cache is read (JSONL format)
2. Transcript is condensed using `condenseTranscript()` function
3. Condensed version is sent to Claude for analysis and memory extraction
4. Claude identifies valuable memories and returns them as JSON

## Condensing Strategy

The condensing process transforms verbose transcript events into a concise format:
- `[User]` - User's question or request
- `[Assistant]` - Claude's response
- `[Tool: Name]` - Tool invocations
- `[Result: OK/ERROR]` - Tool outcomes

This format captures the essential interaction flow while removing:
- Formatting/markdown details
- Timestamps (or condensing them)
- Verbose explanations
- Repetitive context

## Implementation Location

The transcript condensing logic should be in `src/core/transcript-collector.ts` and is used by the MCP server's memory extraction process.
