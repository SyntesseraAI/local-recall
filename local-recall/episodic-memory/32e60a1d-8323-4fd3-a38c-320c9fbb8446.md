---
id: 32e60a1d-8323-4fd3-a38c-320c9fbb8446
subject: 'Mutex errors caused by ONNX runtime in fastembed, not sqlite-vec'
keywords:
  - mutex
  - fastembed
  - onnx
  - concurrent
  - embedding
  - error
applies_to: global
occurred_at: '2025-12-21T19:45:32.573Z'
content_hash: 67fe75622ecaca43
---
The mutex errors that appeared during concurrent hook execution were caused by ONNX runtime (used by fastembed for embeddings), not by sqlite-vec. The Orama migration fixed SQLite issues, but ONNX runtime still has mutex problems when multiple processes load it concurrently. The `proper-lockfile` mechanism doesn't prevent ONNX's internal mutex issues. This happens because each concurrent process tries to initialize the ONNX model simultaneously, causing system-level mutex conflicts.
