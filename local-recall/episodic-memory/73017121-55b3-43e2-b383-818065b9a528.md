---
id: 73017121-55b3-43e2-b383-818065b9a528
subject: Hook implementation location and transcript parsing logic in stop.ts
keywords:
  - stop.ts
  - transcript parsing
  - memory extraction
  - hook implementation
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-21T19:30:47.202Z'
content_hash: 543c8cacdb0112cd
---
The Stop hook implementation (src/hooks/stop.ts, lines 77-108) contains the core logic for parsing transcripts and creating episodic memories. It:

1. Receives stdin JSON with session_id, transcript_path, cwd
2. Parses the transcript using utilities from src/utils/transcript.ts
3. Extracts memory-worthy content from user interactions and assistant responses
4. Creates memories using the memory manager with deduplication
5. Outputs memory IDs to stdout

The Stop hook is the primary mechanism for immediate memory creation in environments that support it (Claude Code CLI), but is not triggered by the VS Code extension.
