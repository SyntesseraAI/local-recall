---
id: b488c977-4119-41c3-b7fb-9ac43e063c3c
subject: Vector store uses cosine distance scoring with recency tie-breaker for ranking
keywords:
  - vector-store
  - similarity-scoring
  - ranking
  - cosine-distance
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-02T22:20:32.572Z'
content_hash: c70f7e007a7c9269
---
The vector store implements semantic search with:
- Cosine distance similarity score (0.0 to 1.0 scale, rounded to 2 decimal places)
- Results sorted by score descending
- Recency tie-breaker: When scores are equal, more recent memories (`occurred_at`) are ranked first

Implementation uses better-sqlite3 with sqlite-vec extension for vector operations and fastembed for BGE-small-en-v1.5 embeddings.
