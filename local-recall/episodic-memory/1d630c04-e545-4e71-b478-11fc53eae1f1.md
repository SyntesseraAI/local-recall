---
id: 1d630c04-e545-4e71-b478-11fc53eae1f1
subject: >-
  Transcript condenser optimizes memory extraction by parsing JSONL and
  extracting minimal content
keywords:
  - transcript-condenser
  - memory-extraction
  - token-optimization
  - jsonl-parsing
  - prompt-building
applies_to: global
occurred_at: '2025-12-21T18:30:38.769Z'
content_hash: 0afbc4871c5080c9
---
Implemented a transcript condenser module (`src/core/transcript-condenser.ts`) that significantly reduces token usage for memory extraction. The condenser:

1. **Parses JSONL transcripts** using TypeScript types defined in `src/types/transcript-schema.ts`
2. **Extracts only essential content** from each transcript entry:
   - User messages: subject + key points
   - Assistant messages: concise explanation
   - Tool invocations: tool name + brief outcome
   - Results: only errors/key findings
3. **Eliminates wasteful content**: full file contents, complete bash outputs, verbose thinking blocks
4. **Creates condensed structured format** that's passed to the memory extractor
5. **Significantly reduces token usage** for the extraction prompt

This is a critical optimization for the memory extraction pipeline, especially when processing large transcripts with extensive file reads, tool outputs, and thinking blocks.
