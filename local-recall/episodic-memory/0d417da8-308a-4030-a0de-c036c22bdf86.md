---
id: 0d417da8-308a-4030-a0de-c036c22bdf86
subject: >-
  Memory extraction uses Claude Haiku via claude -p command to generate memories
  from transcripts
keywords:
  - memory extraction
  - claude haiku
  - claude -p
  - transcript processing
  - mcp server
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T21:58:45.689Z'
content_hash: 5daec7b6e6f09816
---
The memory extraction process in `src/core/memory-extractor.ts` uses the `claude -p` command to invoke Claude Haiku for extracting memories from condensed transcripts. The process:

1. Takes a condensed transcript (events with User, Assistant, and Tool results)
2. Sends it to Claude Haiku via stdin using the `claude -p --model haiku` command
3. Haiku analyzes the transcript and returns extracted memories
4. Results are parsed as JSON containing memory objects with subject, keywords, applies_to, and content fields

This is called by the MCP server daemon which runs every 5 minutes to process new transcripts asynchronously.
