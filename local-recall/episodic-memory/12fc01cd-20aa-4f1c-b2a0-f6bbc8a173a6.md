---
id: 12fc01cd-20aa-4f1c-b2a0-f6bbc8a173a6
subject: UserPromptSubmit hook uses claude-haiku to extract keywords from user prompts
keywords:
  - userpromptsubmit hook
  - keyword extraction
  - haiku model
  - prompt analysis
  - memory search triggering
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-01T21:54:52.430Z'
content_hash: e589c6cd0e9af24d
---
The UserPromptSubmit hook intercepts user prompts before Claude processes them. It uses `claude -p --model haiku` to extract keywords from the prompt via stdin/stdout. These keywords are then used to search the memory index with fuzzy matching. Matching memories are injected into Claude's context. This provides on-demand memory retrieval based on what the user is asking about.
