---
id: a210669d-3aef-4e51-84f7-36cf6b449f79
subject: >-
  Memory creation is idempotent - duplicate detection prevents duplicate memory
  files
keywords:
  - idempotent
  - deduplication
  - content hash
  - memory creation
  - occurred_at
  - duplicate detection
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-01T21:54:52.430Z'
content_hash: 6d92578bc1abc9b5
---
The memory creation system (`createMemory()`) is designed to be idempotent using two deduplication mechanisms: `occurred_at` timestamp and `content_hash` (SHA-256 prefix). The `findDuplicate()` method checks for existing memories with the same occurrence time and content hash, returning the existing memory instead of creating a duplicate. This prevents accumulating redundant memories from similar sessions.
