---
id: a18b640d-668c-4bfe-8f7d-6bf032f2066c
subject: Memory file deduplication uses occurred_at timestamp and content_hash
keywords:
  - deduplication
  - duplicate-detection
  - content-hash
  - occurred-at
  - memory-management
  - idempotent
applies_to: global
occurred_at: '2025-12-02T12:07:20.780Z'
content_hash: 2c0a1cda78e33e95
---
# Memory Deduplication Strategy

The memory system implements idempotent memory creation using two fields:

1. **occurred_at**: ISO-8601 timestamp of when the original event occurred
2. **content_hash**: SHA-256 hash prefix of the memory content (typically 16 characters)

## Deduplication Logic

Before creating a new memory, the system checks if a duplicate already exists:
- Uses `findDuplicate(occurredAt, contentHash)` method
- If a memory with the same `occurred_at` and `content_hash` exists, return that memory instead
- This prevents duplicate memories from accumulating when the same operation is run multiple times

## Why Both Fields Matter

- **occurred_at alone**: Not sufficient because different events can happen at the same timestamp
- **content_hash alone**: Not sufficient because similar content could be generated at different times
- **Combined**: Unique enough to identify the exact same event/discovery happening again

This approach allows safe, idempotent memory creation - running the memory extraction multiple times on the same transcript won't create duplicate memories.
