---
id: 04bcd26f-4a5f-4415-92c5-498f8cede4de
subject: Using Orama directly in hooks is the correct approach for local-recall
keywords:
  - hooks
  - orama
  - search
  - pure-javascript
  - no-dependencies
  - performance
applies_to: global
occurred_at: '2025-12-21T18:28:52.966Z'
content_hash: 8f4c7447fead346b
---
Local-recall's hooks (SessionStart, UserPromptSubmit) should use Orama directly for vector search rather than spawning child processes.

### Why This Works
1. **Pure JavaScript**: Orama has no native dependencies when used directly (despite sqlite-vec being a backend detail)
2. **No IPC overhead**: Direct in-process search avoids spawning new processes
3. **JSON indexes**: Orama indexes are stored as JSON files and can be loaded directly
4. **Embedding generation**: Hooks can call Ollama HTTP API directly for embeddings

### Architecture
- Hooks load the Orama index from JSON
- Call Ollama HTTP API to generate embedding for search query
- Perform vector search in-process
- Return results

This avoids all the complexity of process spawning and mutex issues while keeping hooks efficient.
