---
id: 108a75f4-868c-437f-a71d-466dbd73f916
subject: Memory extraction requires understanding transcript structure and filtering
keywords:
  - memory-extraction
  - transcript-parsing
  - filtering
  - condensing
  - events
  - jsonl
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T01:54:23.851Z'
content_hash: f261fcc697b46240
---
# Memory Extraction from Transcripts

## Transcript Structure

Transcripts contain multiple event types that need filtering:
- User messages (relevant for memory extraction)
- Assistant responses (can be extracted as learnings)
- Tool invocations (should be excluded from raw memory content)
- Tool results (contextual but shouldn't be stored verbatim)

## Condensing Strategy

When extracting memories:
1. Filter events to include only user messages and key assistant responses
2. Remove tool names and invocation details
3. Keep meaningful explanations and decisions
4. Create condensed transcript format for analysis

## Deduplication

Memories should be deduplicated based on:
- `occurred_at`: Timestamp when the original event occurred
- `content_hash`: SHA-256 hash of the memory content (prevents exact duplicates)

## Related Files

- `src/core/transcript-collector.ts`: Collects transcripts from Claude cache
- `src/core/memory-extractor.ts`: Extracts memories from transcripts
- `src/core/memory.ts`: Manages memory CRUD operations including deduplication
