---
id: 3a32af78-f405-4128-acf3-c1dd462df1c1
subject: Memory extraction uses Claude API with streaming for transcript analysis
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - transcript-processing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T22:49:25.715Z'
content_hash: 12c7c4a440699f81
---
The memory extraction process in `src/core/memory-extractor.ts` uses the Anthropic Claude API with message streaming to analyze session transcripts. The extractor:

1. Accepts a transcript as input
2. Uses Claude (typically Haiku for efficiency) to analyze and extract memories
3. Streams the response for real-time processing
4. Parses the streamed JSON response to build memory objects
5. Handles API errors and stream failures gracefully

Key implementation details:
- Uses `@anthropic-ai/sdk` for API interaction
- Streams responses to handle large outputs efficiently
- Parses JSON from streamed text chunks
- Includes error handling for network and API failures
