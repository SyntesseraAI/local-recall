---
id: 42937e2d-eb8c-452f-942d-85394a183cdc
subject: Memory reprocessing flow uses content hash for deduplication
keywords:
  - content hash
  - deduplication
  - memory extraction
  - reprocessing
  - processed-log
applies_to: global
occurred_at: '2025-12-21T18:31:46.868Z'
content_hash: 20eda06df0069da0
---
The memory extraction system uses a content hash-based approach for handling transcript changes:

1. `transcript-collector.ts` detects changes by comparing file size and mtime
2. `memory-extractor.ts` computes the actual content hash and processes the transcript
3. `processed-log.ts` tracks processed transcripts by their content hash
4. When a transcript's content changes (detected via hash), old memories associated with that transcript are deleted before creating new ones

This ensures that reprocessing a transcript doesn't create duplicate memories - old ones are cleaned up first based on the content hash comparison.
