---
id: f642bb68-4750-4c1f-9857-d139cf090cfa
subject: Local Recall transcript condensing and memory extraction process
keywords:
  - transcript
  - condensing
  - memory-extraction
  - mcp
  - daemon
  - claude-haiku
  - tool-calls
applies_to: global
occurred_at: '2025-12-01T16:05:29.049Z'
content_hash: 44ef7d91381e4fbe
---
# Transcript Condensing and Memory Extraction

Local Recall processes Claude Code transcripts to extract valuable memories using a multi-stage pipeline.

## Process Overview

1. **Transcript Collection**: Raw JSONL transcripts from `~/.claude/projects/{project}/transcripts/`
2. **Condensing**: Complex transcripts are condensed into simplified event sequences
3. **Memory Extraction**: Claude Haiku analyzes condensed transcripts to identify memories
4. **Memory Creation**: Extracted memories are saved to `local-recall/episodic-memory/`

## Condensing Format

Transcripts are reduced to a human-readable format with events:
- `[User]` - User messages and requests
- `[Assistant]` - Claude's responses and explanations
- `[Tool: Name]` - Tool invocations (with method name)
- `[Result: OK/ERROR]` - Tool outcomes
- Long tool results and assistant messages are summarized

## Implementation

The transcript condensing logic is in `src/core/transcript-collector.ts` with functions:
- `condenseTranscript()` - Main condensing logic
- `summarizeText()` - Summarization helper
- Uses environment variable `CLAUDE_MODEL_OVERRIDE` to specify model for extraction

## Daemon Operation

The MCP server daemon processes transcripts asynchronously:
- Runs every 5 minutes
- Syncs new and modified transcripts
- Uses content hashing to detect changes
- Deletes old memories when transcripts are updated
