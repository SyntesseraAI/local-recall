---
id: ce843f66-3539-4ba6-ac0c-9e66d571596f
subject: Memory extraction from transcript events
keywords:
  - memory-extraction
  - transcript
  - events
  - jsonl
  - user-message
  - assistant-message
applies_to: 'area:memory-extractor'
occurred_at: '2025-12-02T02:04:08.305Z'
content_hash: c4179461be1b8361
---
# Memory Extraction from Transcripts

The `memory-extractor.ts` module processes JSONL transcript events to create memories.

## Event Types

Transcript events include:
- `user_message`: User's prompt
- `assistant_message`: Claude's response
- `tool_call`: Tool invocation details
- `tool_result`: Tool execution results
- Session events: `session_start`, `session_end`

## Extraction Strategy

Memories are extracted from meaningful events:
1. **User intent**: Extract from `user_message` events (what the user was trying to do)
2. **Assistant responses**: Extract insights from `assistant_message` events
3. **Tool usage**: Extract from `tool_call` and `tool_result` events (what tools were used and why)
4. **Decisions**: Extract architectural or technical decisions made during conversation

## Key Fields in Events

- `timestamp`: ISO-8601 when the event occurred
- `content`: The actual message or event data
- `tool_name`: Name of the tool (for tool events)
- `tool_input`: Input parameters (for tool calls)
- `tool_output`: Result of tool execution (for tool results)

## Deduplication in Extraction

When creating memories from transcripts:
- Use `occurred_at` from the transcript timestamp
- Calculate `content_hash` of the memory content
- Check for duplicates using `findDuplicate(occurred_at, contentHash)`
- Only create new memory if no duplicate exists
