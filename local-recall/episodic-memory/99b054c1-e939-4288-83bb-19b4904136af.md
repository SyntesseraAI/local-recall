---
id: 99b054c1-e939-4288-83bb-19b4904136af
subject: >-
  UserPromptSubmit hook uses unified search combining episodic and thinking
  memories
keywords:
  - user-prompt-submit
  - hook-architecture
  - memory-search
  - unified-retrieval
applies_to: 'file:src/hooks/user-prompt-submit.ts'
occurred_at: '2025-12-21T18:17:33.752Z'
content_hash: ede4b5ac3a5aa8bc
---
The UserPromptSubmit hook performs unified semantic search combining both episodic and thinking memories based on configuration flags. It searches episodic memories if `episodicEnabled` is true and thinking memories if `thinkingEnabled` is true, filtering results by similarity threshold and token budget. Results from both sources are combined and injected into Claude's context as 'Previous Thoughts' with similarity scores.
