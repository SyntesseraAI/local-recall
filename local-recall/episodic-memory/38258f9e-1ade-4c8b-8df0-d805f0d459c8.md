---
id: 38258f9e-1ade-4c8b-8df0-d805f0d459c8
subject: Mutex errors occur when multiple processes load sqlite-vec concurrently
keywords:
  - mutex
  - sqlite-vec
  - concurrent
  - locking
  - error handling
applies_to: global
occurred_at: '2025-12-21T19:17:36.210Z'
content_hash: 8c98a7f5402c397c
---
The codebase has a known issue where concurrent process loading of sqlite-vec can cause "mutex lock failed: Invalid argument" errors. This is mentioned in src/mcp-server/server.ts:230 with a comment about using cross-process file locking to prevent these errors. The issue occurs when multiple processes try to load the sqlite-vec library simultaneously, which suggests the MCP server needs to implement proper file locking mechanisms when initializing the vector store.
