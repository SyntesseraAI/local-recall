---
id: e1aa7e69-05ed-4b38-a642-2aa9276e9c88
subject: Claude Code hooks inject memories via stdin/stdout with JSON format
keywords:
  - hooks
  - claude-code
  - sessionstart
  - userPromptsubmit
  - json-io
applies_to: global
occurred_at: '2025-12-02T17:14:14.033Z'
content_hash: f743fbd3cfb89bb5
---
Three Claude Code hooks are configured in `.claude/settings.json`:

1. **SessionStart Hook**: Loads all memories from disk, returns 5 most recent memories (not using vector store to avoid slow startup), outputs to stdout for context injection
2. **UserPromptSubmit Hook**: Initializes vector store lazily, performs semantic search on user prompt, outputs matching memories
3. **Stop Hook**: Currently disabled; memory extraction handled by MCP daemon instead

Hooks receive JSON input with session_id, transcript_path, cwd, and optionally prompt. Vector store is cached after first initialization.
