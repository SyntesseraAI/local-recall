---
id: d3de66d9-10e7-4be7-99da-979fb8a26c1a
subject: >-
  Project uses Orama for vector search instead of sqlite-vec due to mutex issues
  with C++ native extensions
keywords:
  - orama
  - vector search
  - embedding
  - pure javascript
  - no native dependencies
  - sqlite-vec
applies_to: global
occurred_at: '2025-12-21T19:31:22.788Z'
content_hash: 1e54259f284442f2
---
Local Recall migrated from sqlite-vec to Orama for vector storage and semantic search. Key reasons:

1. **sqlite-vec mutex problem**: sqlite-vec is a C++ native extension with `std::mutex` structures that fail when forked across processes (common in Node.js hook execution)
2. **Orama benefits**: Pure JavaScript implementation with no native dependencies, avoiding process isolation issues
3. **Architecture**: Hooks use Orama directly for vector search; embeddings are generated via Ollama with nomic-embed-text model (768 dimensions)
4. **Storage**: Index files stored as JSON (orama-episodic-index.json, orama-thinking-index.json) and are gitignored
5. **Scoring**: Cosine distance similarity with scores 0.0-1.0, rounded to 2 decimal places, with recency tie-breaker

This is a critical architectural decision that enables reliable memory retrieval in the hook-based architecture.
