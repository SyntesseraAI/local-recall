---
id: e308c354-0d69-4b0a-b2fd-bd9d5197f177
subject: Memory extraction uses Claude API with streaming and transcript condensing
keywords:
  - memory-extractor
  - claude-api
  - streaming
  - transcript-condensing
  - api-integration
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:27:51.476Z'
content_hash: 48409e0b35fb9771
---
The memory extraction system in `memory-extractor.ts` uses the Claude API to analyze transcripts and extract valuable memories. Key implementation details:

- Uses `Anthropic` client from `@anthropic-ai/sdk`
- Implements streaming with `stream()` method for real-time processing
- Calls `getPrompt()` from `memory-extraction.ts` to get the extraction prompt
- Integrates with transcript condensing to prepare transcript data
- Returns an array of extracted memories with metadata
- Handles API responses asynchronously

The extraction is called by the background MCP daemon which processes transcripts every 5 minutes.
