---
id: 49fcbd08-c658-4ead-8f9a-c8647a332c50
subject: Claude Haiku sometimes returns array directly in memory extraction responses
keywords:
  - claude haiku
  - response format
  - memory extraction
  - arrays
  - error handling
applies_to: global
occurred_at: '2025-12-01T23:05:04.499Z'
content_hash: 986cca9db9f30405
---
When requesting memory extraction via Claude Haiku (claude-haiku-4-5), the model may return memories as a plain JSON array `[{...}, {...}]` directly, rather than the expected object format `{ memories: [...] }`. This is a valid response that needs to be handled gracefully. The fix detects arrays and wraps them in the expected object format before schema validation.
