---
id: 80b26056-e775-48a8-8eda-bd2f9689dd1f
subject: Claude Code hooks configuration and execution flow
keywords:
  - hooks
  - session-start
  - user-prompt-submit
  - stop
  - json-stdin
  - context-injection
applies_to: 'area:hooks'
occurred_at: '2025-12-02T16:25:21.582Z'
content_hash: 993a5bff52652d48
---
Claude Code hooks receive JSON input via stdin and output to stdout. Three hooks are implemented:

1. **SessionStart**: Loads 5 most recent memories (by occurred_at) on session start. Full reload, no vector store used to avoid slow initialization.
2. **UserPromptSubmit**: Triggered before Claude processes user prompts. Lazily initializes vector store on first use, performs semantic search with user's prompt, outputs matching memories.
3. **Stop Hook**: Currently disabled. Memory extraction is handled by MCP server daemon running every 5 minutes.

Hooks configuration paths vary based on installation method (npm package vs local project). Timeout values: SessionStart 30s, UserPromptSubmit 30s, Stop 60s.
