---
id: bb62c399-d8df-4a74-b866-89a4e9d3f8de
subject: Local Recall refactoring introduces embedding-based vector search
keywords:
  - embedding
  - vector
  - search
  - fastembed
  - semantic
  - refactoring
  - memory-extractor
applies_to: global
occurred_at: '2025-12-01T22:21:03.775Z'
content_hash: ae6b0c10ce36cf16
---
# Embedding and Vector Search Implementation

## New Modules

The refactoring introduces two new core modules for semantic search:

### `src/core/embedding.ts`
- Wraps the `fastembed` library with BGE-small-en-v1.5 model (~133MB)
- Provides interface for generating vector embeddings from text
- Model downloads automatically to `local_cache/` on first use
- Subsequent runs load from cache (fast, only happens once)

### `src/core/vector-store.ts`
- Manages vector storage and similarity search
- Stores embeddings alongside memory metadata
- Enables semantic search beyond keyword-based matching
- Supports ranking results by relevance score

## Integration Points

- Memory extraction now uses embeddings for better content understanding
- Search algorithm enhanced with semantic matching
- Index system updated to include embedding data

## Performance Considerations

- First startup may take 30-60 seconds while model downloads (~133MB)
- Model cached in `local_cache/` for subsequent runs
- Embeddings generated during memory creation and search
- Trade-off: More accurate results vs slightly slower memory creation/search
