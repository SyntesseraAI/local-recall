---
id: d57fb785-9296-4b5a-8144-1a1833da2c1e
subject: Local Recall project structure and memory management architecture
keywords:
  - local-recall
  - architecture
  - memory-management
  - sqlite
  - vector-store
  - hooks
applies_to: global
occurred_at: '2025-12-02T16:54:09.686Z'
content_hash: f17e267cbc5a8170
---
Local Recall is a markdown-powered memory system for AI coding assistants. Core components include:

- **Memory Manager** (`src/core/memory.ts`): CRD operations for memory files with idempotent creation and deduplication via content hash
- **Vector Store** (`src/core/vector-store.ts`): SQLite-backed with better-sqlite3 and sqlite-vec extension for semantic search using BGE-small-en-v1.5 embeddings
- **Search** (`src/core/search.ts`): Semantic search with cosine distance scoring (0.0-1.0), sorted by score then by recency
- **Memory Format**: Markdown files with YAML frontmatter including id, subject, keywords, applies_to scope, occurred_at timestamp, and content_hash for deduplication
- **Hooks**: SessionStart (load 5 recent memories), UserPromptSubmit (semantic search), Stop (disabled, MCP server handles async transcript processing)
- **MCP Server**: Exposes memory_create, memory_get, memory_search, memory_list, index_rebuild tools with background daemon processing transcripts every 5 minutes
