---
id: 4488f7a0-b214-44fb-bda2-874c15f2b45d
subject: Memory extractor uses two-part validation with detailed logging for debugging
keywords:
  - logging
  - validation
  - debugging
  - error-handling
  - memory-extractor
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T16:06:56.789Z'
content_hash: da98dc43653da03c
---
The memory extractor implements a robust validation approach with detailed logging:

1. **Log before validation**: The parsed memory structure is logged as JSON string before Zod validation (for debugging malformed responses)
2. **Log validation errors**: Detailed error information is logged when Zod validation fails
3. **Log parsed memories**: Successfully parsed memories are logged with array index

This makes it easy to diagnose issues when Claude returns memories with unexpected field names or structures. The logging helps identify whether the problem is in parsing the JSON or in field naming mismatches.
