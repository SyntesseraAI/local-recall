---
id: d45969b4-819d-45df-ad52-99a1b5bbc7cd
subject: Memory extraction uses Claude Haiku with structured JSON prompts
keywords:
  - memory-extractor
  - claude-haiku
  - json-parsing
  - transcript-processing
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T23:05:31.368Z'
content_hash: 783ad928c1862545
---
The memory extractor in memory-extractor.ts uses Claude Haiku to parse transcripts and extract structured memories. It sends a prompt to the Claude API with the `response_format` parameter set to `{ type: 'json_object' }` to ensure responses are valid JSON. The extractor processes transcripts line-by-line, parsing each response as JSON and extracting memories with fields: id, subject, keywords, applies_to, occurred_at, content_hash, and content. Error handling includes JSON parse errors which are logged but don't block processing of other memories.
