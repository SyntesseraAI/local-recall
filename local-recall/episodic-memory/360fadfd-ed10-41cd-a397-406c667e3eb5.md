---
id: 360fadfd-ed10-41cd-a397-406c667e3eb5
subject: >-
  Memory extraction uses Claude Haiku with structured prompts to identify
  important memories from transcripts
keywords:
  - memory extraction
  - claude haiku
  - transcript analysis
  - prompt engineering
applies_to: 'area:memory-extraction'
occurred_at: '2025-12-02T06:50:46.042Z'
content_hash: 2a9764fc875ea95f
---
The memory extraction system in `src/core/memory-extractor.ts` uses Claude Haiku to intelligently analyze session transcripts and extract valuable memories. The extraction process:

1. Takes a condensed transcript as input (events like `[User]`, `[Assistant]`, `[Tool: ...]`, etc.)
2. Uses a structured prompt from `src/prompts/memory-extraction.ts` to guide Claude
3. Sends the transcript to Claude Haiku for analysis
4. Receives extracted memories in JSON format
5. Filters and deduplicates memories before storage

Key points:
- Extraction is performed asynchronously and scheduled periodically
- The prompt guides Claude to identify what was learned, what is now known, what is specific to the codebase, and what problems were solved
- Memories are stored with metadata (subject, keywords, applies_to scope, content_hash for deduplication)
- The system avoids extracting generic programming knowledge, temporary debugging steps, or obvious information
