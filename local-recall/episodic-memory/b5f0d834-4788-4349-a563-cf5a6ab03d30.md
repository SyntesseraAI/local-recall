---
id: b5f0d834-4788-4349-a563-cf5a6ab03d30
subject: Project uses both file-based and MCP-based memory access patterns
keywords:
  - memory
  - architecture
  - file-system
  - mcp-server
  - access-patterns
  - idempotent
applies_to: global
occurred_at: '2025-12-02T12:51:21.795Z'
content_hash: d0c35fc6d5ee6ef7
---
# Memory Access Patterns

The Local Recall system supports two complementary access patterns:

## File-Based Access

- Memories are stored as markdown files in `local-recall/episodic-memory/`
- These files are version-controlled (committed to git)
- Direct file operations through `MemoryManager` class
- Used by hooks for loading and listing memories
- Simpler, no database overhead

## MCP-Based Access

- Exposes memory tools through the MCP server protocol
- Supports semantic search using vector embeddings
- Requires SQLite vector store initialization
- More powerful but higher overhead
- Used for programmatic access from external clients

## Trade-offs

- SessionStart hook uses file-based (fast, no vector store overhead)
- UserPromptSubmit hook uses MCP/vector store (semantic search capability)
- MCP server provides both file and vector store access
- Vector store is lazy-initialized on first semantic search request

## Design Philosophy

The dual approach allows:
1. Simple file-based memories that are portable and git-trackable
2. Powerful semantic search when needed via vector embeddings
3. Avoiding unnecessary database overhead for simple list/load operations
