---
id: 82bb9625-cac0-4688-a39f-99c7b216144b
subject: >-
  Stop hook is disabled; MCP server daemon handles memory extraction
  asynchronously
keywords:
  - stop-hook
  - mcp-server
  - daemon
  - transcript-processing
  - async
applies_to: 'file:src/mcp-server/server.ts'
occurred_at: '2025-12-02T16:12:43.766Z'
content_hash: b95546d9c5506360
---
The Stop hook is currently disabled. Memory extraction is handled by a background daemon in the MCP server that runs every 5 minutes. The daemon:
- Syncs transcripts from Claude's cache (~/.claude/projects/<project>/transcripts/)
- Processes transcripts using claude -p to extract memories
- Tracks processed transcripts with content hashes for change detection
- Deletes and recreates memories when transcripts change

This asynchronous approach prevents blocking the Claude Code session.
