---
id: a8a8b108-5a0a-4de1-a802-4f5577aa39f6
subject: Memory extractor handles Claude field name variations for robustness
keywords:
  - memory-extractor
  - field-normalization
  - claude-response
  - zod-validation
  - resilience
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-21T19:17:53.529Z'
content_hash: 33a2865df2bfbb78
---
Added field name normalization in parseClaudeResponse() to handle cases where Claude returns memory objects with alternative field names. Maps common variations (description→subject, tags→keywords, scope→applies_to, text→content) to expected fields before Zod validation. This prevents validation failures when Claude uses slightly different terminology while extracting memories from transcripts.

Implemented in two places:
1. Main parsing path (lines 179-186): normalizeMemoryFields() helper
2. Fallback JSON extraction (lines 200-207): Same normalization applied

Also added comprehensive test coverage in memory-extractor.test.ts for field variations.
