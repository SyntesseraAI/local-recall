---
id: 5aea8275-5c1c-494a-9810-3dab7659f284
subject: >-
  Memory extractor E2BIG error fix: pass transcripts via stdin instead of
  command-line arguments
keywords:
  - memory-extractor
  - e2big
  - stdin
  - large transcripts
  - spawn
  - child-process
applies_to: 'file:src/core/memory-extractor.ts'
occurred_at: '2025-12-01T21:58:54.407Z'
content_hash: 16b5be7a32bb6c8e
---
## Problem
The `callClaudeCLI` method in memory-extractor.ts was passing large transcripts as command-line arguments to the `claude` CLI, causing E2BIG (argument list too long) errors on macOS when transcripts exceeded the system's ARG_MAX limit (~260KB).

## Solution
Modified the spawn call to pass the transcript content via stdin instead:
- Changed from: `spawn('claude', ['-p', prompt, transcript])`
- Changed to: Pass transcript through stdin using `child.stdin.write()`
- This allows handling transcripts of any size without hitting OS limits

## Impact
Fixes failures when processing large session transcripts in the memory extraction pipeline. Essential for reliable transcript-to-memory conversion.
