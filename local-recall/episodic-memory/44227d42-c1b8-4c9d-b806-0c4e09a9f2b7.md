---
id: 44227d42-c1b8-4c9d-b806-0c4e09a9f2b7
subject: >-
  Vector store uses cosine distance similarity scoring with recency as
  tie-breaker for search ranking
keywords:
  - vector-store
  - semantic-search
  - scoring
  - cosine-distance
  - ranking
applies_to: 'file:src/core/vector-store.ts'
occurred_at: '2025-12-02T16:19:51.746Z'
content_hash: dad21626b7612e3d
---
The vector store (implemented with better-sqlite3 and sqlite-vec extension) ranks search results using:

- **Score Range**: 0.0 (no match) to 1.0 (identical)
- **Similarity Metric**: Cosine distance between embeddings
- **Score Precision**: Rounded to 2 decimal places (e.g., 0.65)
- **Sorting**: Results sorted by score descending
- **Tie-breaker**: When scores are equal, more recent memories (higher `occurred_at`) are ranked first

Embeddings are generated using fastembed with the BGE-small-en-v1.5 model (~133MB).
