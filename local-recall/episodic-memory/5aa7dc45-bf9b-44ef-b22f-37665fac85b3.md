---
id: 5aa7dc45-bf9b-44ef-b22f-37665fac85b3
subject: Removed HTTP server architecture in favor of direct file-based locking
keywords:
  - http-server
  - daemon-client
  - architecture
  - refactoring
applies_to: global
occurred_at: '2025-12-03T10:13:19.759Z'
content_hash: e1fe368694412a74
---
Simplified the architecture by removing the HTTP server approach:

**Deleted:**
- `src/utils/daemon-client.ts` - No longer needed
- `src/mcp-server/http-server.ts` - No longer needed

**Modified:**
- Hooks now directly instantiate VectorStore/ThinkingVectorStore with file-based locking
- MCP server no longer starts HTTP server (removed from daemon startup)
- Hooks use the same imports as they would in the daemon: `SearchEngine`, `ThinkingSearchEngine`

This eliminates the complexity of inter-process HTTP communication while maintaining safety through file-based locking.
