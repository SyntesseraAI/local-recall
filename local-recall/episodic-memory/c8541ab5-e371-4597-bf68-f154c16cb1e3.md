---
id: c8541ab5-e371-4597-bf68-f154c16cb1e3
subject: >-
  Implemented deduplication in thinking-extractor to prevent duplicate
  thinking/text blocks
keywords:
  - thinking-extractor
  - deduplication
  - streaming artifacts
  - set deduplication
applies_to: 'file:src/core/thinking-extractor.ts'
occurred_at: '2025-12-21T18:29:32.427Z'
content_hash: 978676ae51867fae
---
Added deduplication using Set to filter out streaming duplicates at lines 146-148. Changed from directly joining `aggregated.thinkingParts` and `aggregated.textParts` to creating unique sets first: `const uniqueThinking = [...new Set(aggregated.thinkingParts)];`. This prevents memories from containing redundant repeated content caused by duplicate JSONL entries in transcripts.
