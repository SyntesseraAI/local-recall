---
id: 8924766f-358a-4ead-be30-4ec7afc6b3a6
subject: >-
  Memory idempotency prevents duplicate creation and deduplication uses
  occurred_at and content_hash
keywords:
  - idempotency
  - deduplication
  - duplicate-detection
  - memory-creation
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-02T17:11:27.906Z'
content_hash: 8804bb33f066ee26
---
`createMemory()` is idempotent - it checks for duplicates using `findDuplicate(occurredAt, contentHash)` and returns the existing memory if one is found. This prevents creating identical memories multiple times. The combination of `occurred_at` (timestamp of when the event occurred) and `content_hash` (SHA-256 prefix of content) uniquely identifies a memory, allowing deduplication across sessions.
