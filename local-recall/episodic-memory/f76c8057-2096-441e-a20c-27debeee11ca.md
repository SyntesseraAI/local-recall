---
id: f76c8057-2096-441e-a20c-27debeee11ca
subject: MemoryManager must ensure .gitignore exists in parent directory
keywords:
  - gitignore
  - memory-manager
  - initialization
  - directory-setup
  - local-recall
applies_to: 'file:src/core/memory.ts'
occurred_at: '2025-12-21T18:17:18.600Z'
content_hash: dc2e82d4a2e2cec7
---
The MemoryManager class creates the `local-recall/memories/` directory but was not ensuring the `.gitignore` file exists in the parent `local-recall/` directory. This caused the `.gitignore` to only be created by IndexManager when it was invoked, leading to inconsistent behavior.

**Fix applied:** Modified MemoryManager to:
1. Store `baseDir` as a class property
2. Add an `ensureGitignore()` method that creates `.gitignore` in the parent directory
3. Call `ensureGitignore()` in the constructor and in `createMemory()` to guarantee it exists
4. The `.gitignore` file contents are defined in `src/utils/gitignore.ts` and should be generated with paths for index files and log files

This ensures the `.gitignore` is always present regardless of which manager is initialized first.
