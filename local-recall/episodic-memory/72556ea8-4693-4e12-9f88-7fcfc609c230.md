---
id: 72556ea8-4693-4e12-9f88-7fcfc609c230
subject: Stop hook processes transcripts to extract memories via Claude API
keywords:
  - stop hook
  - transcript processing
  - memory extraction
  - claude api
applies_to: 'file:src/hooks/stop.ts'
occurred_at: '2025-12-02T06:31:27.482Z'
content_hash: 3e1f1423bec0d9b9
---
The Stop hook reads transcript files, extracts relevant content (including thinking blocks), and sends it to Claude API (via `claude -p` command) to generate memories. These generated memories are then stored in the episodic-memory directory. The hook parses the transcript JSON, extracts user messages and Claude responses (including thinking blocks), and uses Claude Haiku to intelligently extract memories from the conversation context.
