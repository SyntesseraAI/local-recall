---
id: 5229a53b-ec7a-46d2-975e-cd7d45aa90ae
subject: 'Now I understand the full data flow into SQLite: 1. **On memory creation**...'
applies_to: global
occurred_at: '2025-12-02T11:43:59.712Z'
content_hash: ffcec0342336517f
---
Now I understand the full data flow into SQLite:

1. **On memory creation** (`MemoryManager.createMemory()` at line 107-113):
   - When a new memory is created via MCP tool or memory-extractor
   - The memory is written to disk AND added to the vector store immediately
   - This is the primary way data gets into SQLite

2. **On MCP server startup** (`src/mcp-server/server.ts:73`):
   - The MCP server runs a sync on startup to ensure SQLite is in sync with file-based memories
   - Let me verify this

3. **Via `index_rebuild` MCP tool** (`src/mcp-server/tools.ts:233`):
   - Manual sync via MCP tool call

4. **On memory deletion** (`MemoryManager.deleteMemory()` at line 189-194):
   - Removes from both disk and vector store

Let me check the MCP server startup to confirm the sync:
