---
id: b55a4926-deff-49ae-8f5e-faf535a41d7a
subject: >-
  Looking at the code: 1. `search.ts` uses `VectorStore` for semantic search,
  not `IndexManager` 2....
applies_to: global
occurred_at: '2025-12-01T18:24:40.323Z'
content_hash: b00eabbfc54314d1
---
Looking at the code:

1. `search.ts` uses `VectorStore` for semantic search, not `IndexManager`
2. `IndexManager` is used in:
   - `mcp-server/tools.ts` - for `index_rebuild` tool and stats
   - `hooks/stop.ts` - for refreshing index after creating memories  
   - `memory-extractor.ts` - need to check this

The IndexManager creates/maintains `index.json` which is a JSON keyword index. Now that we have `memory.sqlite` with:
- All memory metadata
- Vector embeddings for semantic search

The IndexManager and index.json seem redundant. We should:
1. Remove IndexManager usage from mcp-server/tools.ts
2. Remove IndexManager usage from hooks/stop.ts
3. Remove the index_rebuild MCP tool (or replace it with vector store sync)
4. Delete src/core/index.ts

But this is a bigger refactor. Let me first finish the SessionStart hook fix, then ask the user if they want me to do this larger cleanup.
