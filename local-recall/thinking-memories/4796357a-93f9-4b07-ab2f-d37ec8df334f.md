---
id: 4796357a-93f9-4b07-ab2f-d37ec8df334f
subject: >-
  Now let me update the integration tests. The integration tests use the old
  SearchEngine constructor...
applies_to: global
occurred_at: '2025-12-01T18:31:52.488Z'
content_hash: a3ca3e9267192ea6
---
Now let me update the integration tests. The integration tests use the old SearchEngine constructor that took IndexManager. Looking at the current SearchEngine constructor, it only takes an optional MemoryManager. So the tests need to be updated.

Also, the tests use `indexManager.buildIndex()` and `indexManager.refreshIndex()` which we no longer have. These tests are using the keyword-based search which is now replaced with vector search.

This is a significant change. The tests are heavily dependent on the old keyword-based IndexManager. Since we've moved to vector search, these tests will need to be rewritten to work with the new system.

Let me update the integration test file to remove IndexManager and use the new SearchEngine pattern. The key changes:1. Remove IndexManager import and usage2. Update SearchEngine to use new constructor
3. Replace indexManager.buildIndex() with vectorStore.initialize() and sync()4. Update search tests to use vector search semantics

Actually, looking at the SearchEngine code, it initializes the vector store lazily when search is called. So we may not need to explicitly initialize it. But the tests were building the index before searching. With vector search, we need to make sure memories are synced to the vector store.

Let me check if MemoryManager.createMemory automatically adds to vector store...
